{"version":3,"sources":["utils/firebase/firebaseConfig.js","components/navigation/Navbar.js","images/icons/nav-logo.png","components/forms/SearchBar.js","components/layout/TwoToThreeCols.js","components/cards/TtitleCard.js","utils/flickr/getFlickrPhotos.js","utils/flickr/createFlickrImageUrl.js","utils/flickr/getFlickrPlace.js","utils/getCurrentLocation.js","utils/getGeoSuggestions.js","screens/explore/Home.js","components/map/MapPopUp.js","components/map/ChangeMapView.js","components/map/Map.js","components/layout/MapWithCards.js","components/layout/TwoCols.js","components/content/ResultsList.js","components/forms/CheckBox.js","components/forms/SubmitButton.js","utils/filterTags.js","components/forms/SubjectFilters.js","screens/explore/SearchResults.js","components/modals/Modal.js","components/modals/ResetPasswordModal.js","components/forms/TextInput.js","components/modals/ChangeDisplayName.js","screens/Account.js","components/layout/OneToTwoCols.js","components/cards/TripCard.js","utils/getPublicTrips.js","screens/trips/PublicTrips.js","components/forms/EmailInput.js","components/forms/PasswordInput.js","screens/authentication/SignIn.js","screens/authentication/SignUp.js","screens/authentication/Authenticate.js","screens/authentication/VerifyEmail.js","components/navigation/PrivateTab.js","utils/getUserTrips.js","screens/trips/MyTrips.js","screens/trips/Trips.js","components/navigation/PrivateRoute.js","components/content/Footer.js","components/slider/PhotoSlider.js","components/content/SubjectIndicators.js","utils/flickr/getFlickrPhotoInfo.js","components/buttons/DirectionsButtons.js","components/buttons/AddToTripsButtons.js","components/forms/RadioButton.js","utils/generateDateAndTime.js","utils/generateId.js","components/modals/ManageTripsModal.js","utils/getSavesCount.js","screens/location/Location.js","components/buttons/EditTripButtons.js","components/modals/EditTripModal.js","screens/trips/TripContent.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Navbar","location","useLocation","pathname","tripsPath","RegExp","accountPath","tripPagePath","locationPagePath","tripsActive","test","accountActive","tripPageActive","locationPageActive","exploreActive","className","to","src","alt","SearchBar","props","name","onClick","placeholder","backSearch","id","labelText","action","method","searchSuggestions","autoComplete","handleSuggestion","rest","searchStyle","htmlFor","window","history","back","type","map","suggestion","tabIndex","data","y","x","label","TwoToThreeCols","children","TitleCard","thumbnail","title","locationId","woeId","titleLength","length","extraChars","slicedTitle","slice","lastSpace","lastIndexOf","createUrl","url","item","options","hasOwnProperty","a","axios","get","response","console","log","getFlickrPhotos","createFlickrImageUrl","photoData","farm","server","secret","placeId","place","woe_name","getFlickrPlace","getCurrentLocation","handleSuccess","handleError","navigator","geolocation","getCurrentPosition","position","err","input","provider","AlgoliaProvider","search","query","results","getGeoSuggestions","Home","state","currentLocation","errorMessage","noLocations","locationResults","searchBarSuggestions","_isMounted","getNearbyLocations","currentLat","latitude","currentLon","longitude","existingLocations","list","then","photos","photo","forEach","woeid","tags","includes","push","placeName","setState","e","preventDefault","this","target","value","aria-live","lat","lon","coords","message","onChange","handleInput","handleSubmit","suggestionClick","renderNearby","React","Component","MapPopup","Popup","ChangeMapView","center","zoom","useMap","setView","propTypes","PropTypes","arrayOf","number","DefaultIcon","L","icon","iconUrl","shadowUrl","iconShadow","Marker","prototype","Map","locations","MapContainer","TileLayer","attribution","destination","MapWithCards","openedMap","handleToggle","mapLoctaions","mapLat","mapLon","mapZoom","toggleBarClass","bind","TwoCols","ResultsList","loaded","needLocation","count","CheckBox","SubmitButton","filterTags","abandonedTags","architectureTags","astroTags","landscapeTags","sunriseTags","sunsetTags","transportTags","peopleTags","urbanTags","waterTags","natureTags","streetArtTags","SubjectFilters","open","filters","abandoned","architecture","astro","landscape","sunrise","sunset","transport","people","urban","water","nature","streetArt","formChanged","previousFilters","prevProps","resetFilters","filterString","activeFilters","filter","index","concat","prevState","checked","toggleDropdown","closeDropdown","handleChange","sendData","SearchResults","searchResults","getSearchResults","searchLat","searchLon","parseFloat","address","decodeURIComponent","searchParams","URLSearchParams","has","handleFilters","findNearby","Modal","modalId","modalTitle","modalDescription","isOpen","handleClose","modalTitleId","closeModal","role","aria-modal","aria-labelledby","ResetPasswordModal","error","successReset","confirmReset","auth","emailAddress","email","form","sendPasswordResetEmail","catch","resetPassword","TextInput","ChangeDisplayNameModal","newName","nameUpdated","loading","user","currentUser","database","userId","uid","ref","update","displayName","triggerUpdate","currentName","changeDisplayName","Account","changeName","updateUser","component","snapshot","exists","val","openDisplayNameModal","openPasswordModal","signOut","closePasswordModal","logInLocation","ChangeDisplayName","closeDisplayNameModal","OneToTwoCols","TripCard","tripId","privacy","locationsCount","getPublicTrips","callback","existingTrips","trips","existingTripUpdate","PublicTrips","tripsList","trip","renderPublicTrips","EmailInput","PasswordInput","checkName","changeType","SignIn","emailError","forgotPassword","hideTitle","tabContent","introtext","onSubmit","handleEmailInput","required","password","handlePassInput","passError","togglePasswordReset","SignUp","firstname","handleNameInput","nameError","lastname","handleLastnameInput","lastnameError","confirmPassword","handleConfirmPassInput","confirmPassError","Authenticate","newUser","fetchSignInMethodsForEmail","signInMethods","indexOf","EmailAuthProvider","EMAIL_PASSWORD_SIGN_IN_METHOD","signInWithEmailAndPassword","userCredential","afterSignIn","errorCode","code","testString","createUserWithEmailAndPassword","userInfo","set","afterCreateAccount","changeUserOnParent","text","handleCreateAccount","handleSignIn","renderContent","changeUserType","VerifyEmail","sendEmailVerification","PrivateTab","isAuthenticated","isVerified","componentContent","getUserTrips","tripRef","inTrip","tripData","MyTrips","getTripsList","nextProps","renderUserTrips","Trips","isPublic","switchTabs","PrivateRoute","render","Footer","PhotoSlider","imageList","imagesCount","buttons","showDownloadButton","showAutoplayButton","image","author","creditUrl","href","SubjectIndicators","subjects","photoId","handleResponse","responseData","fetch","ok","Error","statusText","json","getFlickrPhotoInfo","DirectionsLarge","AddToTripsLarge","added","AddToTripsSmall","RadioButton","idName","generateDate","d","Date","day","getDate","month","getMonth","year","getFullYear","generateId","prefix","sufix","result","characters","charactersLength","i","charAt","Math","floor","random","ManageTripsModal","newTripPrivacy","newTripName","newTripTags","creatingTrip","tripNameLength","tripNameError","tripTagsError","newTripCreated","needNewTrip","errorCreatingTrip","errorCreatingLocation","errorUpdatingUserTrips","errorAddingFilters","updatingTrips","newUserValue","checkExistingTrips","checkAuth","selectExistingTrip","getNewTripInfo","renderExistingTrips","switchForm","addOrRemoveFromTrip","valueLength","renderDatabaseErrors","handleTripNamelInput","handleTripTagsInput","handleNewTripPrivacy","defaultChecked","createNewTrip","locationRef","locationPhotosArray","locationName","locationCoordinates","coordinates","locationSubjectsArray","date","locationSubjects","locationPhotos","flickrId","subject","savedCount","addedDate","curated","userLastEditedDate","subjectRef","errorAddingFilter","tripPrivacy","tripName","tripFeaturedImgSrc","tripAuthor","tripTags","endsWith","time","hour","getHours","minutes","getMinutes","seconds","getSeconds","milliseconds","getMilliseconds","generateTimeNumber","generateID","featuredImg","createdOn","lastEdited","startsWith","transaction","createNewFlickrSourcedLocation","renderModalContent","getSavesCount","Location","distance","saves","firstPhoto","showTripsModal","inTrips","checkIfInTrips","locationTrips","replace","pathQuery","_content","description","owner","realname","username","urls","getLocationDetailsFromFlickr","tagsList","tag","tagsString","setSubject","tagsArray","split","newTitle","newSrc","newAlt","newAuthor","ownername","ownerId","newLocation","manageTripsModal","data-micromodal-trigger","EditTripLarge","EditTripSmall","EditTripModal","errorUpdatingTrip","tagsUpdated","originalTripPrivacy","updatingTrip","tripUpdate","confirmDelete","tripDeleted","tagButtons","originalPrivacy","userTripRef","newPrivacy","originalTripName","originalTripTags","userTripsUpdate","remove","errorUpdatingTrips","searchQuery","searchPrivacy","defaultPrivate","defaultPublic","defaultShareable","handleTripPrivacy","updateTrip","toggleDeleteFrom","deleteTrip","renderUpdateForm","tripUpdated","updated","deleted","TripContent","tripList","showModal","getTripId","getPrivacy","getTripDetails","locationData","Object","keys","openModal","App","signedIn","userVerified","onAuthStateChanged","emailVerified","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8143d50a.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nconst config = {\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\n};\n\nfirebase.initializeApp(config);\n\nexport default firebase;","import { Link, useLocation } from 'react-router-dom';\n\nimport logo from '../../images/icons/nav-logo.png'\n\nfunction Navbar() {\n\n    // Check Router's location to set active status\n    let location = useLocation().pathname;\n\n    let tripsPath = new RegExp('/trips/?');\n    let accountPath = new RegExp('/account/?');\n    let tripPagePath = new RegExp('/trip/?');\n    let locationPagePath = new RegExp('/location/?');\n\n    let tripsActive = tripsPath.test(location);\n    let accountActive = accountPath.test(location);\n    let tripPageActive = tripPagePath.test(location)\n    let locationPageActive = locationPagePath.test(location)\n\n    let exploreActive = (!tripsActive && !accountActive && !tripPageActive && !locationPageActive );\n    \n\n    return (\n        <header>\n            <div className={`container`}>\n                <div className={`logo`}>\n                    <Link to=\"/\">\n                        <h1>Photo Atlas</h1>\n                        <img src={logo} alt={`PhotoAtlas logo`} />\n                    </Link>\n                </div>\n                <nav>\n                    <ul>\n                        <li>\n                            <Link to=\"/\" className={`explore ${exploreActive ? 'active' : 'normal'}`}>\n                                <span>Explore</span>\n                            </Link>\n                        </li>\n\n                        <li>\n                            <Link to=\"/trips\" className={`trips ${tripsActive ? 'active' : 'normal'}`}>\n                                <span>Trips</span>\n                            </Link>\n                        </li>\n\n                        <li>\n                            <Link to=\"/account\" className={`profile ${accountActive ? 'active' : 'normal'}`}>\n                                <span>Account</span>\n                            </Link>\n                        </li>\n                    </ul>\n                </nav>\n            </div>\n        </header>\n    )\n}\n\nexport default Navbar;","export default \"data:image/png;base64,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\"","import PropTypes from 'prop-types';\n\nfunction SearchBar(props) {\n\n    let {\n        className,\n        name,\n        onClick,\n        placeholder,\n        backSearch,\n        id,\n        labelText,\n        action,\n        method,\n        searchSuggestions,\n        autoComplete,\n        handleSuggestion,\n        ...rest } = props;\n\n\n    function sendData(data) {\n        if (handleSuggestion) {\n            handleSuggestion(data)\n        } else {\n            return undefined\n        }\n    }\n\n    let searchStyle = backSearch ? 'back-search' : 'standard-search';\n\n    return (\n        <>\n            {labelText && <label className={`search-label ${searchStyle}-label`} htmlFor={id ? id : 'gsearch'}>{labelText}</label>}\n            <div className={`search-bar-container ${searchStyle} ${className ? className : ''}`}>\n                <button onClick={() => { window.history.back() }} className={`search-back-button`}>Back</button>\n\n                <form className=\"search-form\" action={action} method={method}>\n\n                    <input\n\n                        type=\"search\"\n\n                        className={`text-bar`}\n\n                        name={name ? name : 'q'}\n\n                        id={id ? id : 'gsearch'}\n\n                        placeholder={placeholder ? placeholder : 'Search Term'}\n\n                        autoComplete={autoComplete ? autoComplete : 'off'}\n\n                        {...rest}\n\n                    />\n\n\n\n                    {searchSuggestions &&\n\n                        <ul className={`search-suggestions`}>\n\n                            {searchSuggestions[0] && searchSuggestions.map((suggestion, id) => {\n                                return (\n                                    <li key={id}>\n                                        <button\n                                            tabIndex=\"0\"\n\n                                            onClick={() => sendData(\n                                                //geocoding search means x = lat and y = lon https://smeijer.github.io/leaflet-geosearch/usage\n                                                {\n                                                    'lat': suggestion.y,\n                                                    'lon': suggestion.x,\n                                                    'label': suggestion.label\n                                                }\n                                            )}>{suggestion.label}</button></li>\n                                )\n\n                            }\n\n                            )\n                            }\n\n                        </ul>\n                    }\n                    <button className={`search-button`} onClick={onClick}>Search</button>\n                </form>\n            </div>\n        </>\n    )\n}\n\nSearchBar.propTypes = {\n    className: PropTypes.string,\n    labelText: PropTypes.string,\n    backSearch: PropTypes.bool,\n    name: PropTypes.string,\n    onClick: PropTypes.func,\n    placeholder: PropTypes.string,\n    autoComplete: PropTypes.string,\n    handleSuggestion: PropTypes.func\n}\n\n\nexport default SearchBar;","function TwoToThreeCols(props) {\n\n    return (\n        <div className={`grid-2_3`}>\n            {props.children}\n        </div>\n    )\n\n}\n\nexport default TwoToThreeCols;","import PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom'\n\nfunction TitleCard(props) {\n    let {\n        thumbnail,\n        title,\n        src,\n        locationId,\n        woeId } = props;\n\n    if (!title) {\n        title = \"Unamed Location\"\n    }\n\n    let titleLength = title.length;\n\n    //keep the lenght of the title at 45 characters\n    if (titleLength > 150) {\n        let extraChars = 150 - titleLength;\n        let slicedTitle = title.slice(0, extraChars);\n        let lastSpace = slicedTitle.lastIndexOf(\" \");\n        slicedTitle = slicedTitle.slice(0, lastSpace);\n        title = `${slicedTitle}...`\n    }\n\n    return (\n        <Link className={`title-card`} to={ `/location/${src}-${locationId}?woe=${woeId}`}>\n            <div className={`title-card-image`}>\n                <img src={thumbnail} alt=\"\" />\n            </div>\n\n            <p className={`title`}>{title}</p> \n        </Link>\n    )\n}\n\nTitleCard.propTypes = {\n    thumbnail: PropTypes.string,\n    title: PropTypes.string,\n    src: PropTypes.string,\n    locationId: PropTypes.string,\n    woeId: PropTypes.string\n}\n\n\nexport default TitleCard;","import axios from 'axios';\n\nfunction createUrl(options = {}) {\n    let url, item;\n    url = `https://api.flickr.com/services/rest/?api_key=${process.env.REACT_APP_FLICKR_API_KEY}&method=flickr.photos.search&format=json&nojsoncallback=true}`\n\n    for (item in options) {\n        if (options.hasOwnProperty(item)) {\n            url += \"&\" + item + \"=\" + options[item];\n        }\n    }\n\n    return url;\n}\n\nasync function getFlickrPhotos(options = {}) {\n    \n    let url = createUrl(options)\n    let response;\n\n    try {\n       response = await axios.get(url)\n       return response.data\n       \n    } catch(err) {\n        console.log(err); \n    }\n\n};\n\n\nexport default getFlickrPhotos;","\n\nfunction createFlickrImageUrl(photoData) {\n\n    let {farm,server,id,secret} = photoData;\n\n    return `https://farm${farm}.staticflickr.com/${server}/${id}_${secret}.jpg`\n}\n\n//reference https://idratherbewriting.com/learnapidoc/docapis_flickr_example.html\n\nexport default createFlickrImageUrl;","import axios from 'axios';\n\nasync function getFlickrPlace(options = {}) {\n    \n    let url, response;\n\n    if (options.placeId) {\n        url = `https://api.flickr.com/services/rest/?api_key=${process.env.REACT_APP_FLICKR_API_KEY}&method=flickr.places.getInfo&format=json&nojsoncallback=1}&place_id=${options.placeId}`\n    }\n    else if (options.woeId) {\n        url = `https://api.flickr.com/services/rest/?api_key=${process.env.REACT_APP_FLICKR_API_KEY}&method=flickr.places.getInfo&format=json&nojsoncallback=1}&woe_id=${options.woeId}`\n    }\n    else {\n        return\n    }\n\n        try {\n            response = await axios.get(url)\n            if (response.data) {\n                if(response.data.place.woe_name) {\n                    return response.data.place.woe_name\n                 }\n            }\n         } catch(err) {\n             console.log(err); \n         }\n     \n};\n\nexport default getFlickrPlace;\n","function getCurrentLocation  (handleSuccess, handleError) {\n    window.navigator.geolocation.getCurrentPosition(\n        position => handleSuccess(position),\n        err => handleError(err)\n    );\n}\n\nexport default getCurrentLocation;","import { AlgoliaProvider } from 'leaflet-geosearch';\n\nasync function getGeoSuggestions(input) {\n    const provider = new AlgoliaProvider();\n\n    try {\n        const results = await provider.search({query: input});\n        if (results) {\n            return results\n        }\n        else {\n            return []\n        }\n    }\n    catch (err) {\n        console.log(err);\n    }\n}\n\nexport default getGeoSuggestions;\n\n//https://smeijer.github.io/leaflet-geosearch/providers/algolia\n//https://smeijer.github.io/leaflet-geosearch/usage","import React from 'react';\nimport SearchBar from '../../components/forms/SearchBar';\nimport TwoToThreeCols from '../../components/layout/TwoToThreeCols'\nimport TitleCard from '../../components/cards/TtitleCard'\nimport getFlickrPhotos from '../../utils/flickr/getFlickrPhotos';\nimport createFlickrImageUrl from '../../utils/flickr/createFlickrImageUrl';\nimport getFlickrPlace from '../../utils/flickr/getFlickrPlace';\nimport getCurrentLocation from '../../utils/getCurrentLocation';\nimport getGeoSuggestions from '../../utils/getGeoSuggestions'\n\nclass Home extends React.Component {\n\n    state = {\n        query: '',\n        currentLocation: null,\n        errorMessage: '',\n        noLocations: false,\n        locationResults: [],\n        searchBarSuggestions: ''\n    };\n\n    _isMounted = false;\n\n    handleSubmit(e) {\n        e.preventDefault();\n\n        // use the first suggestion to search\n        if(this.state.searchBarSuggestions) {\n            let suggestion = this.state.searchBarSuggestions[0]\n\n            this.setState({query:suggestion.label})\n\n            //geocoding search means x = lat and y = lon https://smeijer.github.io/leaflet-geosearch/usage\n            let search = `address=${suggestion.label}&lat=${suggestion.y}&lon=${suggestion.x}`\n            this.props.history.push(`/explore/?q&${search}`);\n        }\n        else {\n            return undefined\n        }\n    }\n\n    \n    handleInput(e) {\n        this.setState(\n           \n            { query: e.target.value }, \n            \n            () => {\n\n                if(!this.state.query) {\n                    this.setState({searchBarSuggestions: ''})\n                }\n                else {\n                    getGeoSuggestions(this.state.query).then(results =>this.setState({searchBarSuggestions: results}))\n                }\n           \n        })\n       \n    }\n\n    renderNearby(list) {\n\n        if (this.state.errorMessage && !this.state.currentLocation) {\n            console.log(`Error: ${this.state.errorMessage}`)\n            return <p aria-live=\"polite\" >Share your location to explore what's nearby.</p>\n        }\n\n        if (!this.state.errorMessage && this.state.noLocations) {\n            return <p aria-live=\"polite\">Looks like there aren't any photo spots nearby yet. Let's explore a different location</p>\n        }\n\n        if (!this.state.errorMessage && this.state.currentLocation) {\n            return (\n                <>\n                <p aria-live=\"polite\" className=\"sr-only\">Showing nearby locations</p>\n                <TwoToThreeCols >\n                    {list.map((location, id) => {\n                        const { thumbnail, title, src, locationId, woeId } = location;\n                        return (\n                            //make these into links where the search param should be the photo id\n                            <TitleCard \n                                key={id} \n                                thumbnail={thumbnail} \n                                title={title} \n                                src={src}\n                                locationId={locationId}\n                                woeId={woeId}\n                            />\n                        )\n\n                    })}\n                </TwoToThreeCols>\n                </>\n            )\n\n        }\n\n        return <p>Getting nearby photo spots...</p>\n    }\n\n\n    getNearbyLocations = () => {\n\n        if (this.state.currentLocation) {\n\n            let currentLat = this.state.currentLocation.latitude;\n\n            let currentLon = this.state.currentLocation.longitude;\n            let options = {\n                \"lat\": currentLat,\n                \"lon\": currentLon,\n                \"accuracy\": 16,\n                \"extras\": \"geo, tags\"\n            }\n\n            //create a list of locations\n            let existingLocations = [];\n\n            let list = [];\n\n            getFlickrPhotos(options).then(data => {\n\n                if (!data) {\n                    return undefined\n                }\n\n                let photos = data.photos.photo;\n\n                if (!photos[0]) {\n                    this.setState({ noLocations: true })\n                }\n\n                else {\n\n                    photos.forEach(\n\n                        photo => {\n\n                            let url = createFlickrImageUrl(photo);\n\n                            let title = photo.title;\n\n                            let woeId = photo.woeid;\n\n                            let locationId = photo.id; \n\n                            let tags = photo.tags;\n                            \n                            //prevent duplicate locations and locations with no tags\n                            if (woeId && !existingLocations.includes(woeId) && tags) {\n\n                                existingLocations.push(woeId);\n\n                                let location = {\n                                    \"src\": \"flickr\",\n                                    \"locationId\" : locationId, \n                                    \"thumbnail\": url,\n                                    \"title\": title,\n                                    \"woeId\" : woeId\n                                }\n\n                                let place = async (options) => {\n                                    let placeName = await getFlickrPlace(options);\n                                    return placeName\n                                }\n\n                                place({ \"woeId\": woeId }).then(placeName => {\n\n                                    if (placeName) {\n                                        location.title = placeName\n                                    }\n\n                                }).then(\n\n                                    list.push(location)\n\n                                )\n                            }\n                        }\n                    )\n\n                    this.setState({\n                        locationResults: list,\n                        noLocations: false\n                    })\n\n\n                }\n            }\n\n            )\n        }\n\n    }\n\n    suggestionClick(suggestion, e) {\n        \n        this.setState({query:suggestion.label})\n        let search = `address=${suggestion.label}&lat=${suggestion.lat}&lon=${suggestion.lon}`\n        this.props.history.push(`/explore/?q&${search}`);\n    }\n\n    componentDidMount() {\n\n        this._isMounted = true;\n\n         getCurrentLocation(\n            position => this._isMounted && this.setState({ currentLocation: position.coords }, () => { this.getNearbyLocations() }),\n            err => this._isMounted && this.setState({ errorMessage: err.message })\n        )\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n\n    render() {\n        let { query, locationResults, searchBarSuggestions } = this.state;\n\n        return (\n            <div className={`home`}>\n                <div className={`background-image`}>\n                    <div className={`container mobile-padding`}>\n                        <p className={`home-heading`}>Photo Atlas</p>\n                        <h2 className={`h5-font`}>Find new places to capture your best work.</h2>\n                        <SearchBar\n\n                            method={`get`}\n\n                            value={query}\n\n                            onChange={(e) => { this.handleInput(e) }}\n\n                            labelText=\"Where do you want to go?\"\n\n                            placeholder=\"Search a place\"\n\n                            onClick={(e) => this.handleSubmit(e)}\n\n                            searchSuggestions={searchBarSuggestions}\n\n                            handleSuggestion={(suggestion, e)=> {this.suggestionClick(suggestion)}}\n                        />\n\n\n                    </div>\n                </div>\n                <div className={`container mobile-padding`}>\n                    <h2 className={`h5-font`}>Explore Nearby</h2>\n                    {this.renderNearby(locationResults)}\n                </div>\n\n            </div>\n        )\n\n    }\n\n}\n\nexport default Home;","import PropTypes from 'prop-types';\nimport { Popup } from 'react-leaflet';\nimport { Link } from 'react-router-dom'\n\nfunction MapPopup(props) {\n\n    let {\n        thumbnail,\n        title,\n        src,\n        locationId,\n        woeId } = props;\n\n    if (!title) {\n        title = \"Unamed Location\"\n    }\n\n    let titleLength = title.length;\n\n    //keep the lenght of the title at 45 characters\n    if (titleLength > 150) {\n        let extraChars = 150 - titleLength;\n        let slicedTitle = title.slice(0, extraChars);\n        let lastSpace = slicedTitle.lastIndexOf(\" \");\n        slicedTitle = slicedTitle.slice(0, lastSpace);\n        title = `${slicedTitle}...`\n    }\n\n    return (\n        <Popup>\n            <div className={\"map-popup\"}>\n\n                <div className={\"location-popup-image\"}>\n                    <img src={thumbnail} alt=\"\" />\n                </div>\n                <Link to={ `/location/${src}-${locationId}?woe=${woeId}`} className={`title`}>{title}</Link>\n\n            </div>\n        </Popup>\n    )\n}\n\nMapPopup.propTypes = {\n    thumbnail: PropTypes.string,\n    title: PropTypes.string,\n    src: PropTypes.string,\n    locationId: PropTypes.string,\n    woeId: PropTypes.string\n}\n\n\nexport default MapPopup;","import PropTypes from 'prop-types';\nimport { useMap } from 'react-leaflet';\nfunction ChangeMapView(props) {\n    let { center, zoom } = props;\n    const map = useMap();\n    map.setView(center, zoom);\n    return null\n}\n\nChangeMapView.propTypes = {\n    center: PropTypes.arrayOf(PropTypes.number),\n    zoom:PropTypes.number\n}\n\nexport default ChangeMapView;\n/* \nExcept for its children, MapContainer props are immutable, and changes must be passed as events in children\nhttps://react-leaflet.js.org/docs/api-map/\nhttps://stackoverflow.com/questions/64665827/react-leaflet-center-attribute-does-not-change-when-the-center-state-changes*/","import React from 'react';\nimport { MapContainer, TileLayer, Marker } from 'react-leaflet';\nimport PropTypes from 'prop-types';\nimport MapPopup from '../map/MapPopUp'\n\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\nimport ChangeMapView from './ChangeMapView';\n\n/* fix marker icon not rendering */\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nlet DefaultIcon = L.icon({\n    iconUrl: icon,\n    shadowUrl: iconShadow\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\n\nfunction Map(props) {\n\n    let { locations, lat, lon, zoom } = props;\n\n    if (!locations) {\n        locations = []\n    }\n\n    if (!lat || !lon) {\n        lat = 34.36;\n        lon = -20.58;\n    }\n\n    let center = [lat, lon]\n\n    return (\n\n        <MapContainer center={center} zoom={10} >\n            <ChangeMapView center={center} zoom={zoom} />\n            <TileLayer\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            />\n\n\n            {locations.map((location, id) => {\n                const { thumbnail, title, destination, locationId, src, woeId } = location;\n\n                let lat = destination.latitude;\n                let lon = destination.longitude;\n\n                return (\n                    <Marker key={id} position={[lat, lon]}>\n                        <MapPopup \n                            thumbnail={thumbnail}\n                            title={title}\n                            locationId={locationId}\n                            src={src}\n                            woeId={woeId}\n                             />\n                    </Marker>\n                )\n            })\n\n            }\n\n        </MapContainer>\n\n    )\n}\n\nMap.propTypes ={\n    locations: PropTypes.arrayOf(PropTypes.object),\n    lat: PropTypes.number,\n    lon: PropTypes.number,\n    zoom:PropTypes.number\n}\n\nexport default Map;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Map from '../map/Map';\n\nclass MapWithCards extends React.Component {\n\n    state = {\n        openedMap: true\n    }\n\n    handleToggle = () => {\n        this.setState({ openedMap: !this.state.openedMap });\n    }\n\n    render() {\n        let { children, mapLoctaions, mapLat, mapLon, mapZoom } = this.props;\n\n        let { openedMap } = this.state;\n\n        let handleToggle = this.handleToggle;\n\n        let toggleBarClass = openedMap ? 'open' : 'close';\n\n        return (\n            <div className={`grid-map`}>\n\n                <div className={`cards-container ${toggleBarClass}`}>\n                    {children}\n                </div>\n\n                <div className={`map-container ${toggleBarClass}`}>\n\n                    <div className={`toggle-bar`} onClick={handleToggle.bind(this)}>\n                        <p>\n                            {openedMap ? 'Hide Map' : 'Show Map'}\n                        </p>\n\n                    </div>\n\n                    <div className={'map'}>\n                        <Map locations={mapLoctaions} lat={mapLat} lon={mapLon} zoom={mapZoom}/>\n                    </div>\n                </div>\n\n            </div>\n\n        )\n\n    }\n\n}\n\n\nMapWithCards.propTypes ={\n    mapLocations: PropTypes.arrayOf(PropTypes.object),\n    mapLat: PropTypes.number,\n    mapLon: PropTypes.number,\n    mapZoom:PropTypes.number\n}\n\n\n\nexport default MapWithCards;","function TwoCols(props) {\n\n    return (\n        <div className={`grid-2`}>\n            {props.children}\n        </div>\n    )\n\n}\n\nexport default TwoCols;","\nimport PropTypes from 'prop-types';\n\n\nimport TitleCard from '../cards/TtitleCard'\nimport TwoCols from '../../components/layout/TwoCols';\n\nfunction ResultsList(props) {\n\n    let { loaded, list, needLocation } = props;\n\n    let count = list.length;\n\n    if (!loaded) {\n        return <p>Getting Locations...</p>\n    }\n\n    if (loaded && count > 0) {\n        return (\n            <>\n            <div aria-live=\"polite\" className=\"sr-only\">\n                <p>Showing search results</p>\n            </div>\n            <TwoCols>\n            {list.map((location, id) => {\n                const { thumbnail, title, src, locationId, woeId } = location;\n\n                return (\n                    \n                    <TitleCard\n                        key={id}\n                        thumbnail={thumbnail}\n                        title={title}\n                        src={src}\n                        locationId={locationId}\n                        woeId={woeId}\n                        />\n                    \n                )\n\n            })}\n            </TwoCols>\n            </>\n        )\n\n    }\n\n    if (loaded && needLocation && count === 0) {\n        return (\n            <p aria-live=\"polite\">\n                Share your location to explore what's nearby.\n            </p>\n        )\n    }\n\n    if (loaded && count === 0 && !needLocation) {\n        return (\n            <p aria-live=\"polite\">\n                Sorry, no photo spots here yet.\n            </p>\n        )\n    }\n\n}\n\nResultsList.propTypes = {\n    loaded: PropTypes.bool.isRequired,\n    list: PropTypes.arrayOf(PropTypes.object).isRequired,\n    needLocation: PropTypes.bool\n}\n\nexport default ResultsList;","import PropTypes from 'prop-types';\n\nfunction CheckBox(props) {\n\n    let {\n        className,\n        id,\n        name,\n        labelText,\n        ...rest } = props;\n\n    return (\n        <>\n            <label className={`check-container ${className ? className : ''}` } htmlFor={name}>{labelText ? labelText : 'label'}\n                \n                <input\n                    \n                    type=\"checkbox\"\n\n                    className={`${className}`}\n                    \n                    id={id ? id : name}\n\n                    name={name}\n\n                    {...rest}\n\n                />\n\n                <span className={`checkmark`}></span>\n\n            </label>\n\n        </>\n    )\n}\n\nCheckBox.propTypes = {\n    className: PropTypes.string,\n    id: PropTypes.string,\n    name: PropTypes.string.isRequired,\n    labelText: PropTypes.string.isRequired,\n}\n\n\nexport default CheckBox;","import PropTypes from 'prop-types';\n\nfunction SubmitButton(props) {\n    \n    let { className, value, ...rest } = props;\n\n    return (\n        <input \n            type=\"submit\" \n\n            className={`${className ? className : 'default-button'}`} \n\n            value={value ? value : 'Submit'} \n\n            {...rest}\n\n        />\n    )\n}\n\nSubmitButton.propTypes = {\n    className: PropTypes.string,\n    value: PropTypes.string\n}\n\nexport default SubmitButton;","\n\n const filterTags = {\n    abandonedTags: 'abandoned, ruins, ghost',\n    architectureTags: 'architecture',\n    astroTags: 'astrophotography, stars, moon',\n    landscapeTags: 'landscape, mountains, outdoors',\n    sunriseTags: 'sunrise',\n    sunsetTags: 'sunset',\n    transportTags: 'transport, train, bus, boat, airplane, airport, transit',\n    peopleTags: 'people, portrait',\n    urbanTags: 'urban, cityscape, skyline, city',\n    waterTags: 'water, lake, river, ocean, waterfall, pond, reservoir, esplanade, sea',\n    natureTags: 'trees, flower, nature, foliage, leaves, grass, animals, forest, garden, park',\n    streetArtTags: 'graffiti, mural, sreet art'\n}\n\nexport default  filterTags;","import React from 'react';\nimport CheckBox from './CheckBox';\nimport SubmitButton from './SubmitButton';\nimport filterTags from '../../utils/filterTags'\n\n\nclass SubjectFilters extends React.Component {\n\n    state = {\n        open: false,\n        filters: {\n            abandoned: false,\n            architecture: false,\n            astro: false,\n            landscape: false,\n            sunrise: false,\n            sunset: false,\n            transport: false,\n            people: false,\n            urban: false,\n            water: false,\n            nature: false,\n            streetArt: false\n        },\n        formChanged: false,\n        previousFilters: []\n    }\n\n\n    componentDidUpdate(prevProps) {\n\n        if (this.props.resetFilters !== prevProps.resetFilters) {\n\n            if (this.props.resetFilters) {\n                this.setState(\n                    {\n                        filters:\n                        {\n                            abandoned: false,\n                            architecture: false,\n                            astro: false,\n                            landscape: false,\n                            sunrise: false,\n                            sunset: false,\n                            transport: false,\n                            people: false,\n                            urban: false,\n                            water: false,\n                            nature: false,\n                            streetArt: false\n                        }\n                    })\n            }\n\n        }\n\n\n    }\n\n\n    toggleDropdown() {\n        this.setState({ open: !this.state.open })\n    }\n\n    closeDropdown() {\n\n        if (this.state.formChanged && this.state.previousFilters) {\n            this.setState({ filters: this.state.previousFilters })\n        }\n        this.setState({ open: false, formChanged: false })\n\n    }\n\n    sendData(e) {\n        e.preventDefault();\n\n        let {\n            abandoned,\n            architecture,\n            astro,\n            landscape,\n            sunrise,\n            sunset,\n            transport,\n            people,\n            urban,\n            water,\n            nature,\n            streetArt\n        } = this.state.filters;\n\n\n        let abandonedTags = abandoned ? filterTags.abandonedTags : false;\n        let architectureTags = architecture ? filterTags.architectureTags : false;\n        let astroTags = astro ? filterTags.astroTags : false;\n        let landscapeTags = landscape ? filterTags.landscapeTags : false;\n        let sunriseTags = sunrise ? filterTags.sunriseTags : false;\n        let sunsetTags = sunset ? filterTags.sunsetTags : false;\n        let transportTags = transport ? filterTags.transportTags : false;\n        let peopleTags = people ? filterTags.peopleTags : false;\n        let urbanTags = urban ? filterTags.urbanTags : false;\n        let waterTags = water ? filterTags.urbanTags : false;\n        let natureTags = nature ? filterTags.natureTags : false;\n        let streetArtTags = streetArt ? filterTags.streetArtTags : false;\n\n        let filterString = '';\n        let allFilterTags = [\n            abandonedTags,\n            architectureTags,\n            astroTags,\n            landscapeTags,\n            sunriseTags,\n            sunsetTags,\n            transportTags,\n            peopleTags,\n            urbanTags,\n            waterTags,\n            natureTags,\n            streetArtTags\n        ];\n\n        let activeFilters = [];\n\n        allFilterTags.forEach(\n            filter => {\n                if (filter) {\n                    activeFilters.push(filter)\n                }\n            }\n        )\n\n\n        activeFilters.forEach(\n            (filter, index) => {\n                if (index === 0) {\n                    filterString = filterString.concat(filter)\n                } else {\n                    filterString = filterString.concat(`, ${filter}`)\n                }\n            }\n        )\n\n        this.setState({ open: !this.state.open, formChanged: false, previousFilters: this.state.filters })\n\n\n\n\n        return this.props.handleSubmit(filterString)\n    }\n\n\n    handleChange(e) {\n\n        let filter = e.target.name;\n\n        switch (filter) {\n            case 'abandoned':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        abandoned: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'architecture':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        architecture: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'astro':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        astro: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'landscape':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        landscape: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'sunrise':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        sunrise: e.target.checked      // update the value of specific key\n                    }\n                }))\n                break;\n            case 'sunset':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        sunset: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'transport':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        transport: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'people':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        people: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'urban':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        urban: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'water':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        water: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'nature':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        nature: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'street-art':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        streetArt: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            default:\n                console.log('filter does not exist')\n        }\n    }\n\n    render() {\n        let {\n            open\n        } = this.state;\n\n        let {\n            abandoned,\n            architecture,\n            astro,\n            landscape,\n            sunrise,\n            sunset,\n            transport,\n            people,\n            urban,\n            water,\n            nature,\n            streetArt\n        } = this.state.filters;\n\n        return (\n            <span className={`search-filter-container ${open ? 'open' : 'closed'}`} >\n                <button className={`search-filter`} onClick={(e) => { this.toggleDropdown() }}>\n                    Filter by Subject\n                </button>\n                <div className={`search-filter-dropdown`}>\n                    <button className={`close-button`} onClick={() => this.closeDropdown()}>Close</button>\n                    <form onChange={() => { this.setState({ formChanged: true }) }}>\n                        <CheckBox name=\"abandoned\" checked={abandoned} labelText=\"Abandoned\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"architecture\" checked={architecture} labelText=\"Architecture\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"astro\" checked={astro} labelText=\"Astrophotography\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"landscape\" checked={landscape} labelText=\"Landscape\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"nature\" checked={nature} labelText=\"Nature\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"street-art\" checked={streetArt} labelText=\"Street Art\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"sunrise\" checked={sunrise} labelText=\"Sunrise\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"sunset\" checked={sunset} labelText=\"Sunset\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"transport\" checked={transport} labelText=\"Transport\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"people\" checked={people} labelText=\"People\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"urban\" checked={urban} labelText=\"Urban\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"water\" checked={water} labelText=\"Water\" onChange={(e) => { this.handleChange(e) }} />\n                        \n                        \n\n                        <SubmitButton onClick={(e) => { this.sendData(e) }} value=\"Apply Filters\" />\n                    </form>\n                </div>\n            </span>\n        )\n    }\n}\n\nexport default SubjectFilters;","import React from 'react';\n\nimport SearchBar from '../../components/forms/SearchBar';\nimport MapWithCards from '../../components/layout/MapWithCards';\n\nimport getFlickrPhotos from '../../utils/flickr/getFlickrPhotos';\nimport createFlickrImageUrl from '../../utils/flickr/createFlickrImageUrl';\nimport getFlickrPlace from '../../utils/flickr/getFlickrPlace';\nimport getCurrentLocation from '../../utils/getCurrentLocation';\nimport ResultsList from '../../components/content/ResultsList';\nimport getGeoSuggestions from '../../utils/getGeoSuggestions'\nimport SubjectFilters from '../../components/forms/SubjectFilters';\n\nclass SearchResults extends React.Component {\n    state = {\n        query: '',\n        loaded: false,\n        searchResults: [],\n        mapLat: null,\n        mapLon: null,\n        mapZoom: 10\n    }\n\n    _isMounted = false;\n\n    getSearchResults = (lat, lon, tags) => {\n\n        let searchLat = lat;\n\n        let searchLon = lon;\n\n        let options = {\n            \"lat\": searchLat,\n            \"lon\": searchLon,\n            \"extras\": \"geo, tags\",\n            \"accuracy\": 6\n        }\n\n        if (tags) {\n            options.tags = tags\n        }\n\n        //create a list of locations\n        let existingLocations = [];\n\n        let list = [];\n\n\n        //get from firebase\n        //in firebase I need to store the photo.id and the photo.woeid\n\n\n        //get from Flickr\n\n        getFlickrPhotos(options).then(data => {\n\n            let photos;\n\n            if (data) {\n                photos = data.photos\n            }\n\n\n            if (!photos) {\n                return this.setState({ loaded: true })\n            }\n\n            else {\n\n                photos = photos.photo\n\n\n                photos.forEach(\n\n                    photo => {\n\n                        let url = createFlickrImageUrl(photo);\n\n                        let title = photo.title;\n\n                        let lat = photo.latitude;\n\n                        let lon = photo.longitude;\n\n                        let woeId = photo.woeid;\n\n                        let locationId = photo.id;\n\n                        let tags = photo.tags;\n\n\n                        // prevent duplicate locations, and locations with no tags\n                        if (woeId && !existingLocations.includes(woeId) && tags ) {\n\n                            \n                            //add photo locations to existing list\n                            existingLocations.push(woeId);\n\n                            let location = {\n                                \"src\": \"flickr\", //added,\n                                \"locationId\": locationId,\n                                \"woeId\" : woeId,\n                                \"thumbnail\": url,\n                                \"title\": title,\n                                \"destination\": {\n                                    \"latitude\": parseFloat(lat),\n                                    \"longitude\": parseFloat(lon)\n                                }\n                            }\n\n    \n                            let place = async (options) => {\n                                let placeName = await getFlickrPlace(options);\n                                return placeName\n                            }\n\n                            place({ \"woeId\": woeId }).then(placeName => {\n\n                                if (placeName) {\n                                    location.title = placeName\n                                }\n\n                            }).then(\n\n                                list.push(location)\n\n                            )\n                        }\n                    }\n                )\n\n                this.setState({\n                    searchResults: list,\n                    loaded: true,\n                    mapLat: parseFloat(searchLat),\n                    mapLon: parseFloat(searchLon),\n                    mapZoom: 10,\n                    resetFilters: false\n                })\n\n            }\n\n        }\n\n        )\n\n    }\n\n    handleInput(e) {\n        this.setState(\n\n            { query: e.target.value },\n\n            () => {\n\n                if (!this.state.query) {\n                    this.setState({ searchBarSuggestions: '' })\n                }\n                else {\n                    getGeoSuggestions(this.state.query).then(results => this.setState({ searchBarSuggestions: results }))\n                }\n\n            })\n\n    }\n\n    handleSubmit(e) {\n\n        e.preventDefault();\n\n        this.setState({ searchResults: [], loaded: false, needLocation: false, resetFilters: true });\n\n        if (!this.state.searchBarSuggestions && !this.state.query) {\n            this.setState({ loaded: true, mapZoom: 1.5, resetFilters: false })\n        } else {\n\n            this.setState({ resetFilters: true });\n\n            let suggestion;\n\n            if (this.state.searchBarSuggestions) {\n                suggestion = this.state.searchBarSuggestions[0];\n            } else {\n                suggestion = {\n                    \"label\": this.state.query,\n                    \"y\": this.state.mapLat,\n                    \"x\": this.state.mapLon\n                }\n            }\n\n\n            this.setState({ query: suggestion.label, searchBarSuggestions: '' });\n\n            let address = suggestion.label;\n\n            let lat = suggestion.y;\n\n            let lon = suggestion.x;\n\n            let search = `address=${address}&lat=${lat}&lon=${lon}`\n\n            this.props.history.push(`/explore/?q=&${search}`)\n            this.getSearchResults(lat, lon)\n        }\n\n\n\n    }\n\n    findNearby() {\n        this.setState({ searchResults: [], loaded: false, query: 'Current Location' });\n        this.props.history.push(`/explore/`)\n\n        getCurrentLocation(\n            (position) =>\n\n                this.setState({ currentLocation: position.coords },\n                    () => {\n                        let lat = this.state.currentLocation.latitude;\n                        let lon = this.state.currentLocation.longitude;\n\n                        this.getSearchResults(lat, lon)\n                    }),\n\n            () => this.setState({ loaded: true, needLocation: true, mapZoom: 1.5 })\n        )\n    }\n\n    suggestionClick(suggestion) {\n\n        this.setState({\n            searchResults: [],\n            loaded: false,\n            needLocation: false,\n            query: suggestion.label,\n            searchBarSuggestions: '',\n            resetFilters: true\n        });\n\n\n        let search = `address=${suggestion.label}&lat=${suggestion.lat}&lon=${suggestion.lon}`\n\n        this.props.history.push(`/explore/?q=&${search}`)\n\n        if (!suggestion.lat || !suggestion.lon) {\n            this.setState({ loaded: true, mapZoom: 1.5, resetFilters: false })\n        } else {\n            let lat = suggestion.lat;\n            let lon = suggestion.lon;\n            getCurrentLocation(\n                (position) => this.setState(\n                    { currentLocation: position.coords },\n                    () => this.getSearchResults(lat, lon))\n            )\n        }\n\n    }\n\n    handleFilters(data) {\n\n        this.setState({ searchResults: [], loaded: false, needLocation: false });\n\n        if (!this.state.searchBarSuggestions && !this.state.query) {\n            this.setState({ loaded: true, mapZoom: 1.5 })\n        } else {\n\n            let suggestion = {\n                \"label\": this.state.query,\n                \"y\": this.state.mapLat,\n                \"x\": this.state.mapLon\n            }\n\n\n            let address = suggestion.label;\n\n            let lat = suggestion.y;\n\n            let lon = suggestion.x;\n\n            let search = `address=${address}&lat=${lat}&lon=${lon}`\n\n            this.props.history.push(`/explore/?q=&${search}`)\n\n            getCurrentLocation(\n                (position) => this.setState({ currentLocation: position.coords },\n                    () => this.getSearchResults(lat, lon, data))\n            )\n        }\n    }\n\n    componentDidMount() {\n        let query = decodeURIComponent(this.props.location.search);\n\n        let searchParams = new URLSearchParams(query);\n\n        this._isMounted = true\n\n        if (!searchParams.has(\"lon\") || !searchParams.has(\"lat\")) {\n\n            this._isMounted && this.setState({ loaded: true, mapZoom: 1.5 })\n\n        } else {\n            let address = searchParams.get(\"address\");\n\n            let lat = searchParams.get(\"lat\");\n\n            let lon = searchParams.get(\"lon\");\n\n            this._isMounted && this.setState({ query: address });\n\n            this.getSearchResults(lat, lon)\n        }\n    }\n\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n\n    render() {\n\n        let { query, searchResults, loaded, mapLat, mapLon, mapZoom, needLocation, searchBarSuggestions } = this.state;\n\n        return (\n            <div className={`search`}>\n\n                <div className={`dark-background`}>\n                    <div className={`container mobile-padding header-container`}>\n                        <SearchBar\n                            labelText=\"Location\"\n                            backSearch\n                            placeholder=\"Search a place\"\n                            value={query}\n                            onChange={(e) => { this.handleInput(e) }}\n                            onClick={(e) => this.handleSubmit(e)}\n                            searchSuggestions={searchBarSuggestions}\n                            handleSuggestion={(suggestion) => { this.suggestionClick(suggestion) }}\n                        />\n                        <SubjectFilters handleSubmit={(data) => this.handleFilters(data)} resetFilters={this.state.resetFilters} />\n                        <button className={`search-filter`} onClick={() => { this.findNearby() }}>Spots Near Me</button>\n                    </div>\n                </div>\n\n                <div className={`container`}>\n\n                    <MapWithCards\n                        mapLoctaions={searchResults}\n                        mapLat={mapLat}\n                        mapLon={mapLon}\n                        mapZoom={mapZoom}\n\n                    >\n                        <ResultsList loaded={loaded} list={searchResults} needLocation={needLocation} />\n\n                    </MapWithCards>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SearchResults;","import PropTypes from 'prop-types'\n\nfunction Modal({ modalId, modalTitle, modalDescription, isOpen, handleClose, children } ) {\n\n    let modalTitleId = `${modalId}-title`\n\n    function closeModal() {\n        handleClose(); //this should set props.isOpen to false on the parent\n    }\n\n    return (\n        <>\n            <div\n                className={`${isOpen ? 'open' : 'closed'} modal-overlay`}\n\n                onClick={() => closeModal()}\n\n                tabIndex=\"-1\">\n            </div>\n            <div id={modalId} className={`${isOpen ? 'open' : 'closed'} modal-wrapper ${modalId}`}>\n\n                <div className=\"modal-body\" role=\"dialog\" aria-modal=\"true\" aria-labelledby={`${modalTitleId}`}>\n\n                    <button className={`close-button`} onClick={() => closeModal()}>Close</button>\n\n                    <div aria-live=\"polite\" className=\"modal-header\">\n                        <h2 id={`${modalTitleId}`}>\n                            {modalTitle}\n                        </h2>\n                        <h3>{modalDescription}</h3>\n                    </div>\n\n                    <div className=\"modal-main\">\n                        {children}\n                    </div>\n                </div>\n\n            </div>\n        </>\n    )\n}\n\nModal.propTypes = {\n    modalId: PropTypes.string, \n    modalTitle: PropTypes.string, \n    modalDescription: PropTypes.string,\n    isOpen: PropTypes.bool,\n    handleClose: PropTypes.func.isRequired,\n    initiallyOpen: PropTypes.bool\n}\n\nexport default Modal;","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport firebase from '../../utils/firebase/firebaseConfig'\n\nimport Modal from './Modal'\n\n\nclass ResetPasswordModal extends React.Component {\n    state = {\n        error: '',\n        successReset: false\n    }\n\n    _isMounted = false;\n\n    closeModal() {\n        this.setState({\n            confirmReset: false\n        }, () => this.props.handleClose());\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n    resetPassword(e) {\n        e.preventDefault();\n        console.log('clicked')\n        let auth = firebase.auth();\n\n        let emailAddress = this.props.email;\n\n        let form = this;\n\n        form.setState({ error: '' })\n\n\n        let actionCodeSettings = { url: `https://photoatlasapp.com/` }\n\n\n       this._isMounted && auth.sendPasswordResetEmail(emailAddress,actionCodeSettings)\n       .then(() => {\n                form.setState({ successReset: true })\n                \n            }\n            ).catch(function (error) {\n                form.setState({\n                    error: error.message,\n                    successReset: false\n                })\n            });\n    }\n\n    render() {\n\n        return (\n            <Modal\n                modalId='reset-password-modal'\n                modalTitle={\"Reset Password\"}\n                isOpen={this.props.isOpen}\n                handleClose={() => this.closeModal()}\n            >\n\n                <div className=\"modal-content-padding center-text\">\n\n                    {!this.state.error && !this.state.successReset && \n                    <h3 className=\"h5-font\">Are you sure you want to reset your password?</h3>}\n                    {this.state.error &&\n                        <p className=\"error-font\" aria-live=\"polite\">\n                            {this.state.error}\n                        </p>\n                    }\n                    {this.state.successReset &&\n                        <p className=\"success-font\" aria-live=\"polite\">\n                            Check your email to reset your password.\n                        </p>}\n                        <ul className=\"button-group\">\n                            <li><button onClick={(e) => this.resetPassword(e)} className=\"default-button\">Reset Password</button></li>\n                            <li><button onClick={() => this.closeModal()} className=\"button-link\">Cancel</button></li>\n                        </ul>\n                </div>\n\n            </Modal>\n        )\n    }\n}\n\nResetPasswordModal.propTypes = {\n    email: PropTypes.string,\n    handleClose: PropTypes.func.isRequired,\n    logInLocation: PropTypes.string.isRequired,\n    isOpen: PropTypes.bool.isRequired\n}\n\nexport default ResetPasswordModal;","import PropTypes from 'prop-types';\n\nfunction TextInput(props) {\n\n    let { className, ...rest } = props;\n\n    return <input type=\"text\" className={`text-bar ${className ? className : ''}`} {...rest} />\n    \n}\n\nTextInput.propTypes = {\n    className: PropTypes.string\n}\n\nexport default TextInput;","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport firebase from '../../utils/firebase/firebaseConfig'\nimport TextInput from '../forms/TextInput'\nimport Modal from './Modal'\n\n\nclass ChangeDisplayNameModal extends React.Component {\n    state = {\n        error: '',\n        newName: '',\n        nameUpdated: false,\n        loading: false\n    }\n\n    closeModal() {\n        this.setState({\n            confirmReset: false,\n            nameUpdated: false\n        }, () => this.props.handleClose());\n    }\n\n    handleInput(e) {\n        this.setState({ newName: e.target.value, nameUpdated: true })\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n    // updateUser() {\n    //     if (this._isMounted) {\n\n    //         let user = firebase.auth().currentUser;\n\n    //         if (user) {\n    //             this.setState({\n    //                 currentName: user.displayName\n    //             })\n    //         }\n    //     }\n    // }\n\n\n\n    changeDisplayName(e) {\n        e.preventDefault();\n        let form = this;\n\n        form.setState({ error: '', loading: true })\n\n        let user = firebase.auth().currentUser;\n\n        let newName = this.state.newName;\n\n\n        //check that name and lastname does not include special characters, except for hypens\n        let testString = /^[a-zA-Z][ a-zA-Z \\-' -]+$/;\n\n\n        if (!testString.test(newName)) {\n            form.setState({ error: \"Display can only contain letters, apostrophes, hypens and spaces.\" })\n        } else {\n                let database = firebase.database();\n\n                let userId = user.uid\n                \n\n                database.ref(`users/${userId}`).update({\n                    displayName: newName\n                }\n                   \n                ).catch((error) => {\n                    console.log(error)\n                })\n           // })\n            .then(function () {\n                // Update successful.\n                form.props.triggerUpdate();\n                form.props.handleClose()\n                form.setState({loading: false})\n            }).catch(function (error) {\n                // An error happened.\n                form.setState({error: error.message, loading: false})\n            });\n\n        }\n\n    }\n\n    render() {\n\n        return (\n            <Modal\n                modalId='reset-password-modal'\n                modalTitle={\"Change Display Name\"}\n                isOpen={this.props.isOpen}\n                handleClose={() => this.closeModal()}\n            >\n\n                <div className=\"modal-content-padding\">\n\n\n                    {this.state.error &&\n                        <p className=\"error-font\" aria-live=\"polite\">\n                            {this.state.error}\n                        </p>\n                    }\n                    <label htmlFor=\"new-name\">New Name</label>\n                    <TextInput id=\"new-name\" value={this.state.nameUpdated ? this.state.newName : this.props.currentName} onChange={(e) => this.handleInput(e)} />\n\n\n                    <div aria-live=\"polite\">\n                        <button onClick={(e) => this.changeDisplayName(e)} className=\"default-button\">\n                            {this.state.loading ? 'Changing Name' : 'Change Display Name'}\n                        </button>\n                    </div>\n                </div>\n\n            </Modal>\n        )\n    }\n}\n\nChangeDisplayNameModal.propTypes = {\n    handleClose: PropTypes.func.isRequired,\n    triggerUpdate: PropTypes.func.isRequired,\n    isOpen: PropTypes.bool.isRequired,\n    currentName: PropTypes.string\n}\n\nexport default ChangeDisplayNameModal;","\nimport React from 'react'\nimport firebase from '../utils/firebase/firebaseConfig'\nimport ResetPasswordModal from '../components/modals/ResetPasswordModal'\nimport ChangeDisplayNameModal from '../components/modals/ChangeDisplayName'\n\n\nclass Account extends React.Component {\n\n    state = {\n        displayName: '',\n        email: '',\n        successReset: false,\n        resetPassword: false,\n        changeName: false\n    }\n\n\n    _isMounted = false;\n\n\n\n    componentDidMount() {\n        this._isMounted = true;\n        this.updateUser();\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    openPasswordModal() {\n        this.setState({ resetPassword: true })\n    }\n\n    closePasswordModal() {\n        this.setState({ resetPassword: false })\n    }\n\n    openDisplayNameModal() {\n        this.setState({ changeName: true })\n    }\n\n    closeDisplayNameModal() {\n        this.setState({ changeName: false })\n    }\n\n    updateUser() {\n\n        let component = this;\n\n        if (this._isMounted) {\n\n            let user = firebase.auth().currentUser;\n            let userId = user.uid;\n\n            if (userId) {\n                let database = firebase.database();\n\n\n                database.ref(`users/${userId}`).get().then(function (snapshot) {\n                    if (snapshot.exists()) {\n\n                        let displayName = snapshot.val().displayName;\n                        let email = user.email;\n\n\n\n                        component.setState({\n                            displayName: displayName,\n                            email: email\n                        })\n                    }\n                    else {\n                        console.log(\"No data available\");\n                    }\n                }).catch(function (error) {\n                    console.error(error);\n                });\n\n\n\n            }\n        }\n    }\n\n    render() {\n\n        return (\n            <>\n                <div className={`container trips mobile-padding`}>\n                    <h2>Account Settings</h2>\n                    <ul className=\"settings-list\">\n                        <li aria-live=\"polite\">\n                            Display Name: {this.state.displayName}\n                            <button onClick={() => this.openDisplayNameModal()} className=\"secondary-button\">Change Display Name</button>\n                        </li>\n                        <li>\n                            <p>Email: {this.state.email}</p>\n                        </li>\n                        <li>\n                            Password: **** <button onClick={() => this.openPasswordModal()} className=\"secondary-button\">Reset Password</button>\n                        </li>\n                    </ul>\n\n                    <button className=\"button-link\"\n                        onClick={\n                            () => {\n                                firebase.auth().signOut()\n                            }\n                        }>Sign Out</button>\n                </div>\n                <ResetPasswordModal\n                    email={this.state.email}\n                    handleClose={() => this.closePasswordModal()}\n                    logInLocation=\"account\"\n                    isOpen={this.state.resetPassword}\n                />\n\n                <ChangeDisplayNameModal\n                    handleClose={() => this.closeDisplayNameModal()}\n                    currentName={this.state.displayName}\n                    isOpen={this.state.changeName}\n                    triggerUpdate={() => this.updateUser()}\n                />\n\n            </>\n        )\n\n    }\n}\n\nexport default Account;","function OneToTwoCols(props) {\n\n    return (\n        <div className={`grid-1_2`}>\n            {props.children}\n        </div>\n    )\n\n}\n\nexport default OneToTwoCols;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom'\n\n\nfunction TripCard(props) {\n\n    let {\n        thumbnail,\n        title,\n        tripId,\n        privacy,\n        locationsCount } = props;\n\n    return (\n        <Link className={`trip-card`} to={ `/trip/${tripId}?privacy=${privacy}`}>\n\n            <div className={`trip-card-image`}>\n                <img src={thumbnail} alt=\"\" />\n            </div>\n            <div className={`trip-card-content`}>\n                <p className={`title`}>{title}</p>\n                <p className={`meta-data ${privacy}`}>\n                    {privacy}</p> \n                <p className={`meta-data marker`}>\n                   {locationsCount} {(locationsCount > 1 || locationsCount < 1) ? 'Locations' : 'Location'}</p>\n            </div>\n\n        </Link>\n    )\n\n}\n\nTripCard.propTypes = {\n    thumbnail: PropTypes.string,\n    title: PropTypes.string,\n    isPublic: PropTypes.bool,\n    locationCount: PropTypes.number,\n    tripId: PropTypes.string,\n    isShared: PropTypes.bool\n}\n\n\nexport default TripCard;","import firebase from './firebase/firebaseConfig'\n\nlet getPublicTrips = (callback) => {\n   \n    let database = firebase.database();\n    let existingTrips = [];\n\n    database.ref(`publicTrips`).get().then((snapshot) => { \n\n        let trips = snapshot.val();\n\n\n        for (const tripId in trips) {\n     \n                    //get title\n                    let title = trips[tripId]['tripName']\n\n                    //get locationsCount\n                    let locationsCount = trips[tripId]['locationsCount']\n\n                    //get thumnail\n                    let thumbnail = trips[tripId]['featuredImg']\n\n\n                    let existingTripUpdate = {\n                        tripId: tripId,\n                        thumbnail: thumbnail,\n                        title: title,\n                        locationsCount: locationsCount,\n                        privacy: 'public'\n                    }\n\n                    existingTrips.push(existingTripUpdate)\n        }\n\n        return existingTrips\n    }).catch(error => console.log(error)).then((existingTrips) => callback(existingTrips))\n}\n\nexport default getPublicTrips;","import React from 'react'\nimport OneToTwoCols from '../../components/layout/OneToTwoCols'\nimport TripCard from '../../components/cards/TripCard'\nimport getPublicTrips from '../../utils/getPublicTrips'\n\n\n\n\nclass PublicTrips extends React.Component {\n    state = {\n        existingTrips: [],\n        loading: true\n    }\n\n    _isMounted = false;\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    renderPublicTrips() {\n        let { existingTrips, loading } = this.state;\n\n        getPublicTrips((tripsList) => {\n            this._isMounted && this.setState({ existingTrips: tripsList, loading: false })\n        })\n\n        if (loading) {\n            return (\n                <div aria-live=\"polite\">\n                    <p>Getting Trips...</p>\n                </div>\n            )\n        } else {\n            if (existingTrips.length > 0) {\n                return (<>\n                    <div aria-live=\"polite\" className=\"sr-only\">\n                        <p>Showing all trips</p>\n                    </div>\n                    <OneToTwoCols>\n                        {existingTrips.map((trip, index) => {\n                            let {\n                                thumbnail,\n                                title,\n                                locationsCount,\n                                privacy, \n                                tripId } = trip;\n\n                            return (\n                                <TripCard\n                                    key={index}\n                                    thumbnail={thumbnail}\n                                    title={title}\n                                    tripId={tripId}\n                                    privacy={privacy}\n                                    locationsCount={locationsCount}\n                                />\n                            )\n                        })}\n                    </OneToTwoCols>\n                </>)\n            } else {\n                return (\n                    <div aria-live=\"polite\">\n                        <p>No trips here yet.</p>\n                    </div>\n                )\n            }\n\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    render() {\n        return (\n            <>\n\n                {this.renderPublicTrips()}\n\n            </>\n        )\n    }\n\n}\n\n\n\nexport default PublicTrips;","import PropTypes from 'prop-types';\n\nfunction EmailInput(props) {\n\n    let { className, ...rest} = props;\n\n    return <input type=\"email\" className={`text-bar ${className ? className : ''}`} {...rest} />\n}\n\nEmailInput.propTypes = {\n    className: PropTypes.string\n}\n\nexport default EmailInput;","import PropTypes from 'prop-types';\nimport React from 'react'\nimport CheckBox from './CheckBox'\n\n\nclass PasswordInput extends React.Component {\n    state = {\n        type: \"password\"\n    }\n\n    changeType() {\n        if (this.state.type === \"password\") {\n            this.setState(\n                { type: \"text\" }\n            )\n        }\n        else {\n            this.setState(\n                { type: \"password\" }\n            )\n\n        }\n    }\n\n    render() {\n\n        let { className, checkName, ...rest } = this.props;\n\n\n        return (\n            <>\n                <input type={this.state.type} \n                    className={`text-bar ${className ? className : ''}`} \n                    {...rest} \n                  /><br/>\n                \n\n            <CheckBox className=\"show-pass\" name={checkName ?  checkName : 'show-pass'} onChange={() => { this.changeType()}} labelText=\"Show password\" />\n\n            </>\n        )\n    }\n\n}\n\nPasswordInput.propTypes = {\n    className: PropTypes.string\n}\n\n\nexport default PasswordInput;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EmailInput from '../../components/forms/EmailInput'\nimport PasswordInput from '../../components/forms/PasswordInput'\nimport SubmitButton from '../../components/forms/SubmitButton'\nimport firebase from '../../utils/firebase/firebaseConfig'\n\n\n\nclass SignIn extends React.Component {\n\n  state = {\n    email: '',\n    emailError: '',\n    successReset: false,\n    forgotPassword: false\n  }\n\n  handleEmailInput(e) {\n    this.setState({ email: e.target.value })\n  }\n\n  togglePasswordReset(e) {\n    e.preventDefault();\n    this.setState({forgotPassword: !this.state.forgotPassword})\n  }\n\n  resetPassword(e) {\n    e.preventDefault();\n\n    let auth = firebase.auth();\n\n    let emailAddress = this.state.email;\n\n    let form = this;\n\n    form.setState({emailError:''})\n\n    let actionCodeSettings = { url: `https://photoatlasapp.com/` }\n\n\n    auth.sendPasswordResetEmail(emailAddress, actionCodeSettings).then(() => {\n        form.setState({successReset: true, forgotPassword: false, email: ''})\n    } \n    ).catch(function (error) {\n        form.setState({\n          emailError: error.message, \n          forgotPassword: true, \n          successReset: false\n        })\n    });\n  }\n\n\n  render() {\n    return (\n      <>\n        <div className={`container mobile-padding`}>\n          <div className={this.props.hideTitle ? \"hidden\" : \"visible\"}>\n            {this.props.tabContent ? <h3>Sign In</h3> : <h2>Sign In</h2>}\n\n            {this.props.tabContent ?\n              <h4 className=\"h5-font\">Sign in to {this.props.introtext}.</h4> :\n              <h3 className=\"h5-font\">Sign in to {this.props.introtext}.</h3>}\n          </div>\n\n    \n          <p className={`${this.state.successReset ? \"visible\" : \"hidden\"} success-font`} aria-live=\"polite\">Check your email to reset your password.</p> \n\n          <form className={this.state.forgotPassword? 'hidden' : 'visible'} action={\"/\"} onSubmit={(e) => this.props.handleSubmit(e)}>\n\n            <div className=\"form-component-wrapper\">\n              <label htmlFor=\"email\">Email</label>\n              <EmailInput autoComplete=\"username\"\n                id=\"email\"\n                value={this.props.email}\n                onChange={(e) => this.props.handleEmailInput(e)} required />\n              {this.props.emailError && <p className=\"error-font\" aria-live=\"polite\">{this.props.emailError}</p>}\n            </div>\n\n            <div className=\"form-component-wrapper\">\n              <label htmlFor=\"pass\">Password</label>\n              <PasswordInput autoComplete=\"current-password\"\n                id=\"pass\"\n                value={this.props.password}\n                onChange={(e) => this.props.handlePassInput(e)} required />\n              {this.props.passError && <p className=\"error-font\" aria-live=\"polite\">{this.props.passError}</p>}\n            </div>\n\n            <div className=\"form-component-wrapper\">\n              <SubmitButton value={`${this.props.loading ? 'Signing In...' : 'Sign In'}`} />\n            </div>\n\n          </form>\n\n          <div className={`${this.state.forgotPassword ? 'hidden' : 'visible'} form-component-wrapper`}>\n              <button\n                onClick={(e) => { this.togglePasswordReset(e) }}\n                className=\"secondary-button forgot-pass\">Forgot password?</button>\n            </div>\n\n          <form className={this.state.forgotPassword ? 'visible' : 'hidden'} action={\"/\"}  onSubmit={(e) => this.resetPassword(e)}>\n            <div className=\"form-component-wrapper\">\n              \n              <label htmlFor=\"password-reset-email\">Email</label>\n              \n              <EmailInput id=\"password-reset-email\"\n                value={this.state.email}\n\n                onChange={(e) => this.handleEmailInput(e)} required />\n              \n                {this.state.emailError && <p className=\"error-font\"\n                aria-live=\"polite\">\n                  {this.state.emailError}\n                  </p>}\n            </div>\n            \n            <div className=\"form-component-wrapper\">\n              <SubmitButton value=\"Reset Password\" />\n            </div>\n          </form>\n\n\n          <div className={`${this.state.forgotPassword ? 'visible' : 'hidden'} form-component-wrapper`}>\n            <button className=\"button-link\" onClick={(e) => { this.togglePasswordReset(e) }}>\n              Sign In\n              </button>\n          </div>\n\n\n        </div>\n      </>\n    )\n\n  }\n\n}\n\n\n\nSignIn.propTypes = {\n  introtext: PropTypes.string,\n  handleSubmit: PropTypes.func,\n  email: PropTypes.string,\n  handleEmailInput: PropTypes.func,\n  emailError: PropTypes.string,\n  password: PropTypes.string,\n  handlePassInput: PropTypes.func,\n  passError: PropTypes.string,\n  tabContent: PropTypes.bool,\n  hiddeTitle: PropTypes.bool,\n  logInLocation: PropTypes.string\n}\n\n\nexport default SignIn;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EmailInput from '../../components/forms/EmailInput'\nimport TextInput from '../../components/forms/TextInput'\nimport PasswordInput from '../../components/forms/PasswordInput'\nimport SubmitButton from '../../components/forms/SubmitButton'\n\n\n\nfunction SignUp(props) {\n\n  return (\n    <>\n      <div className={`container mobile-padding`}>\n        <div className={props.hideTitle ? \"hidden\" : \"visible\"}>\n          {props.tabContent ? <h3>Sign Up</h3> : <h2>Sign Up</h2>}\n\n          {props.tabContent ?\n            <h4 className=\"h5-font\">Create an account to {props.introtext}.</h4> :\n            <h3 className=\"h5-font\">Create an account to {props.introtext}.</h3>}\n        </div>\n        <form action={\"/\"} onSubmit={(e) => props.handleSubmit(e)}>\n\n\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"firstname\">Name</label>\n            <TextInput autoComplete=\"name\" id=\"firstname\" value={props.firstname} onChange={(e) => props.handleNameInput(e)} required />\n            {props.nameError && <p className=\"error-font\" aria-live=\"polite\">{props.nameError}</p>}\n          </div>\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"lastname\">Last Name <span>(Optional)</span></label>\n            <TextInput autoComplete=\"lastname\" id=\"lastname\" value={props.lastname} onChange={(e) => props.handleLastnameInput(e)} />\n            {props.lastnameError && <p className=\"error-font\" aria-live=\"polite\">{props.lastnameError}</p>}\n          </div>\n\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"email\">Email</label>\n            <EmailInput autoComplete=\"username\" id=\"email\" value={props.email} onChange={(e) => props.handleEmailInput(e)} required />\n            {props.emailError && <p className=\"error-font\" aria-live=\"polite\">{props.emailError}</p>}\n          </div>\n\n\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"pass\">Password (6 characters minimum)</label>\n            <PasswordInput autoComplete=\"new-password\" id=\"pass\" value={props.password} onChange={(e) => props.handlePassInput(e)} required />\n            {props.passError && <p className=\"error-font\" aria-live=\"polite\">{props.passError}</p>}\n          </div>\n\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"confirm-pass\">Confirm Password</label>\n            <PasswordInput  autoComplete=\"new-password\" checkName=\"show-confirm-pass\" id=\"confirm-pass\" value={props.confirmPassword} onChange={(e) => props.handleConfirmPassInput(e)} required />\n            {props.confirmPassError && <p className=\"error-font\" aria-live=\"polite\">{props.confirmPassError}</p>}\n          </div>\n\n          <div className=\"form-component-wrapper\">\n            <SubmitButton value={`${props.loading ? 'Creating Account...' : 'Create Account'}`} />\n          </div>\n\n        </form>\n      </div>\n    </>\n  )\n\n}\n\n\n\nSignUp.propTypes = {\n  introtext: PropTypes.string,\n  handleSubmit: PropTypes.func,\n  name: PropTypes.string,\n  handleNameInput: PropTypes.func,\n  nameError: PropTypes.string,\n  lastname: PropTypes.string,\n  handleLastnameInput: PropTypes.func,\n  lastnameError: PropTypes.string,\n  email: PropTypes.string,\n  handleEmailInput: PropTypes.func,\n  emailError: PropTypes.string,\n  password: PropTypes.string,\n  handlePassInput: PropTypes.func,\n  passError: PropTypes.string,\n  confirmPassword: PropTypes.string,\n  handleConfirmPassInput: PropTypes.func,\n  confirmPassError: PropTypes.string,\n  tabContent: PropTypes.bool,\n  hiddeTitle: PropTypes.bool\n}\n\n\nexport default SignUp;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport firebase from '../../utils/firebase/firebaseConfig'\n\nimport SignIn from './SignIn'\nimport SignUp from './SignUp'\n\n\n\nclass Authenticate extends React.Component {\n\n    state = {\n        newUser: false,\n        firstname: '',\n        lastname: '',\n        email: '',\n        password: '',\n        confirmPassword: '',\n        emailError: '',\n        passError: '',\n        confirmPassError: '',\n        nameError: '',\n        lastnameError: '',\n        loading: false\n    }\n\n    handleSignIn(e) {\n\n        e.preventDefault();\n        this.setState({\n            emailError: '',\n            passError: '',\n            loading: true\n        })\n\n\n        let email = this.state.email;\n        let password = this.state.password;\n        let component = this;\n\n\n        firebase.auth().fetchSignInMethodsForEmail(email).then(\n            signInMethods => {\n                if (signInMethods.indexOf(firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD) !== -1) {\n\n                    firebase.auth().signInWithEmailAndPassword(email, password).then(\n                        (userCredential) => {\n                            if (this.props.afterSignIn) {\n                                let user = userCredential.user;\n                                this.props.afterSignIn(user)\n                            }\n                        }\n                    )\n                        .catch((error) => {\n                            let errorCode = error.code;\n                            let errorMessage = error.message;\n                            if (errorCode === \"auth/too-many-requests\") {\n                                component.setState({ passError: \"Too many sign in attempts, reset password or try again later.\" })\n                            }\n                            else if (errorCode === \"auth/wrong-password\") {\n                                component.setState({ passError: \"Invalid password\" })\n                            }\n                            else {\n                                component.setState({ passError: errorMessage })\n                            }\n\n                        });\n                }\n\n                else {\n                    this.setState({ emailError: \"Couldn't find an account with that email.\" })\n                }\n\n            }\n        )\n\n        this.setState({ loading: false })\n\n    }\n\n\n    handleCreateAccount(e) {\n\n        e.preventDefault();\n        this.setState({\n            confirmPassword: '',\n            emailError: '',\n            passError: '',\n            confirmPassError: '',\n            nameError: '',\n            lastnameError: '',\n            loading: true\n        })\n\n\n        let email = this.state.email;\n        let password = this.state.password;\n        let confirmPassword = this.state.confirmPassword;\n        let firstname = this.state.firstname;\n        let lastname = this.state.lastname;\n\n        let component = this;\n\n\n        firebase.auth().fetchSignInMethodsForEmail(email).then(\n            signInMethods => {\n                if (signInMethods.indexOf(firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD) !== -1) {\n                    this.setState({ emailError: \"An account exist with that email.\" })\n                }\n\n                else {\n                    //check that name and lastname does not include special characters, except for hypens\n                    let testString = /^[a-zA-Z][ a-zA-Z \\-' -]+$/;\n\n\n                    if (!testString.test(firstname)) {\n                        component.setState({ nameError: \"Name can only contain letters, apostrophes, hypens and spaces.\" })\n                    }\n\n                    if (lastname) {\n                        if (!testString.test(lastname)) {\n                            component.setState({ lastnameError: \"Last name can only contain letters, apostrophes, hypens and spaces.\" })\n\n                        }\n                    }\n\n                    //check that name and lastname are longer than 1 character\n                    if (firstname.length === 1) {\n                        component.setState({ nameError: \"Name must be longer than one character.\" })\n                    }\n\n                    if (lastname.length === 1) {\n                        component.setState({ lastnameError: \"Last name, if provided, must be longer than one character.\" })\n                    }\n\n                    //check that passworrd is longer than 5 characters\n                    if (password.length < 6) {\n                        component.setState({ passError: \"Passowrd must be at least 6 characters long.\" })\n                    }\n\n                    //check that passwords match\n                    if (password !== confirmPassword) {\n                        component.setState({ confirmPassError: \"Passwords don't match\" })\n                    }\n\n                    //check that there are no errors\n                    if (!this.state.emailError && !this.state.confirmPassError && !this.state.nameError && !this.state.passError) {\n                        //create account\n                        let displayName = firstname;\n\n                        if (firstname && lastname) {\n                            displayName = `${firstname} ${lastname}`\n                        }\n                        //create credentials\n                        firebase.auth().createUserWithEmailAndPassword(email, password).then(userCredential => {\n                            let user = userCredential.user;\n                            let userId = user.uid;\n                            let email = user.email;\n                        \n\n                            //add user displayName and email to databsse\n                            let userInfo = {\n                                email: email,\n                                displayName: displayName\n                            }\n                            let database = firebase.database();\n\n                            database.ref(`users/${userId}`).set(\n                                userInfo\n                            ).catch((error) => {\n                                console.log(error)\n                            })\n\n                            if (this.props.afterCreateAccount) {\n                                let user = userCredential.user;\n                                this.props.afterCreateAccount(user)\n                            }\n\n                        }\n\n                        )\n                            .catch((error) => {\n                                var errorCode = error.code;\n                                var errorMessage = error.message;\n\n                                if (errorCode === \"auth/email-already-in-use\") {\n                                    this.setState({ emailError: \"An account exist with that email.\" })\n                                }\n\n                                if (errorCode === \"auth/invalid-email\") {\n                                    this.setState({ emailError: \"Please use a valid email address\" })\n                                }\n\n                                if (errorCode === \"auth/operation-not-allowed\") {\n                                    this.setState({ emailError: errorMessage })\n                                }\n\n                                if (errorCode === \"auth/weak-password\") {\n                                    component.setState({ passError: \"Passowrd must be at least 6 characters long.\" })\n                                }\n                            });\n                    }\n\n                }\n\n            }\n        )\n        this.setState({ loading: false })\n\n    }\n\n    handleEmailInput(e) {\n        this.setState({ email: e.target.value })\n    }\n\n    handlePassInput(e) {\n        this.setState({ password: e.target.value })\n    }\n\n    handleNameInput(e) {\n        this.setState({ firstname: e.target.value })\n    }\n\n    handleLastnameInput(e) {\n        this.setState({ lastname: e.target.value })\n    }\n\n    handleConfirmPassInput(e) {\n        this.setState({ confirmPassword: e.target.value })\n    }\n\n\n    changeUserType() {\n        this.setState({ newUser: !this.state.newUser }, () => {\n            if (this.props.changeUserOnParent) {\n                this.props.changeUserOnParent(this.state.newUser)\n            }\n        })\n    }\n\n    renderContent(newUser) {\n\n        let logInLocation = this.props.logInLocation;\n\n        let trips = 'trips'\n        let add = 'add'\n        let account = 'account'\n\n\n        let text;\n\n        switch (logInLocation) {\n            case trips:\n                text = \"view your trips\"\n                break;\n            case add:\n                text = \"add a location\"\n                break;\n            case account:\n                text = \"view your account information\"\n                break;\n            default:\n                text = \"continue your PhotoAtlas journey\"\n        }\n\n        if (newUser) {\n            return (\n                <>\n                    <SignUp\n                        hideTitle={this.props.hideTitle ? true : false}\n                        tabContent={this.props.tabContent}\n                        introtext={text}\n                        handleSubmit={(e) => this.handleCreateAccount(e)}\n                        email={this.state.email}\n                        handleEmailInput={(e) => this.handleEmailInput(e)}\n                        emailError={this.state.emailError}\n                        password={this.state.password}\n                        handlePassInput={(e) => this.handlePassInput(e)}\n                        passError={this.state.passError}\n                        loading={this.state.loading}\n\n                        firstname={this.state.firstname}\n                        nameError={this.state.nameError}\n                        handleNameInput={(e) => this.handleNameInput(e)}\n\n                        lastname={this.state.lastname}\n                        lastnameError={this.state.lastnameError}\n                        handleLastnameInput={(e) => this.handleLastnameInput(e)}\n\n                        confirmPassword={this.state.confirmPassword}\n                        confirmPassError={this.state.confirmPassError}\n                        handleConfirmPassInput={(e) => this.handleConfirmPassInput(e)}\n                    />\n                </>\n            )\n        }\n        else {\n            return (\n                <>\n                    <SignIn\n                        hideTitle={this.props.hideTitle ? true : false}\n                        tabContent={this.props.tabContent}\n                        introtext={text}\n                        handleSubmit={(e) => this.handleSignIn(e)}\n                        email={this.state.email}\n                        handleEmailInput={(e) => this.handleEmailInput(e)}\n                        emailError={this.state.emailError}\n                        password={this.state.password}\n                        handlePassInput={(e) => this.handlePassInput(e)}\n                        passError={this.state.passError}\n                        loading={this.state.loading}\n                        logInLocation={logInLocation}\n                    />\n                </>\n            )\n        }\n    }\n\n\n    render() {\n\n        let { newUser } = this.state;\n\n        return (\n            <>\n\n                {this.renderContent(newUser)}\n\n                <div className=\"container mobile-padding\">\n                    <button className=\"button-link\" onClick={() => this.changeUserType()}>\n                        {newUser ? \"Sign In\" : \"Create Account\"}\n                    </button>\n                </div>\n            </>\n\n        )\n\n    }\n\n}\n\nAuthenticate.propTypes = {\n    logInLocation: PropTypes.string,\n    tabContent: PropTypes.bool,\n    hideTitle: PropTypes.bool,\n    afterSignIn: PropTypes.func,\n    afterCreateAccount: PropTypes.func\n}\n\n\nexport default Authenticate;","import React from 'react'\nimport PropTypes from 'prop-types';\nimport firebase from '../../utils/firebase/firebaseConfig'\n\n\nclass VerifyEmail extends React.Component {\n\n    state = {\n        error: null\n    }\n\n    componentDidMount() {\n\n        let user = firebase.auth().currentUser;\n        let component = this;\n\n        let actionCodeSettings = {\n            url: `https://photoatlasapp.com/`\n        };\n\n        if (user) {\n\n            user.sendEmailVerification(actionCodeSettings)\n                .catch(function (error) {\n                    component.setState({ error: `${error}` })\n                });\n\n        }\n\n    }\n\n    renderContent() {\n        if (!this.state.error) {\n            return (\n                <>\n                    {this.props.tabContent ? \n                        <h3 className=\"h4-font\">Just one more step</h3> :\n                        <h2 className=\"h4-font\">Just one more step</h2>}\n                    <p>\n                        We've sent a verification link to your email.<br />\n                        Please check your inbox to verify your account.\n                    </p>\n\n                    <h3 className=\"h6-font\">\n                        Need a new link?\n                    </h3>\n\n                    <button className=\"button-link\">Re-Send Link</button>\n\n                </>\n\n            )\n        }\n        else {\n            return (\n                <>\n                    <h2 className=\"h4-font\">Sorry, there was a problem</h2>\n                    <p className=\"error-font\">{this.state.error}</p>\n                    <p>\n                        Please contact support at photoatlasapp@gmail.com.\n                </p>\n                </>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <>\n                <div className={`container mobile-padding`}>\n                    {this.renderContent()}\n                    <button className=\"secondary-button back-button\"\n                        onClick={\n                            () => {\n                                firebase.auth().signOut()\n                            }\n                        }>\n                        Back to Sign In\n                    </button>\n                </div>\n            </>\n        )\n    }\n}\n\nVerifyEmail.propTypes = {\n    logInLocation: PropTypes.string,\n    tabContent: PropTypes.bool\n}\n\nexport default VerifyEmail;","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Authenticate from '../../screens/authentication/Authenticate'\nimport VerifyEmail from '../../screens/authentication/VerifyEmail'\n\n\n\n\nfunction PrivateTab (props) {\n        if (props.isAuthenticated) {\n            if (!props.isVerified) {\n                return <VerifyEmail logInLocation={props.logInLocation} tabContent={true}/>\n            } else {\n               return props.componentContent();\n            }\n        }\n        else {\n            return (\n                <Authenticate logInLocation={props.logInLocation} tabContent={true}/>\n            )\n        }\n}\n\nPrivateTab.propTypes = {\n    logInLocation: PropTypes.string,\n    componentContent: PropTypes.func.isRequired\n}\n\n\n\nexport default PrivateTab;","import firebase from './firebase/firebaseConfig'\n\nlet getUserTrips = (userId, callback, locationId = null) => {\n\n    let database = firebase.database();\n    let existingTrips = [];\n\n    database.ref(`userTrips/${userId}`).get().then((snapshot) => {\n\n        if (snapshot.exists()) { \n            let trips = snapshot.val();\n\n\n            for (const tripId in trips) { \n                let trip = trips[tripId]\n\n                //get privacy setting \n                let privacy = trip['tripPrivacy']\n\n                let tripRef = `${privacy}Trips/${tripId}`\n\n                database.ref(`${tripRef}`).get().then(\n                    (snapshot) => {\n                        if (snapshot.exists()) {\n                            let tripData = snapshot.val()\n                            //get title\n                            let title = tripData['tripName']\n\n                            //get locationsCount\n                            let locationsCount = tripData['locationsCount']\n\n                            //get thumnail\n                            let thumbnail = tripData['featuredImg']\n\n                            //see if location is in trip\n                            let inTrip;\n\n                            if (locationId) {\n                                let locations = tripData.locations;\n\n\n                                if (locations) {\n                                    let location = locations[locationId]\n                                    if (location) {\n                                        inTrip = true\n                                    } else {\n                                        inTrip = false\n                                    }\n                                } else {\n                                    inTrip = false\n                                }\n                            }\n\n                            let existingTripUpdate = {\n                                tripId: tripId,\n                                thumbnail: thumbnail,\n                                title: title,\n                                locationsCount: locationsCount,\n                                privacy: privacy,\n                                inTrip: inTrip\n                            }\n\n                            existingTrips.push(existingTripUpdate)\n\n                            return existingTrips\n                        } else {\n                            console.log(`issue fetching: ${tripRef}`)\n                        }\n                    }\n                ).catch((error) => console.log(`could not fetch trips: ${error}`)).then((existingTrips) => callback(existingTrips))\n\n            }\n\n        } else {\n            callback(existingTrips)\n        }\n\n    })\n}\n\nexport default getUserTrips;","import React from 'react'\nimport PropTypes from 'prop-types'\nimport PrivateTab from '../../components/navigation/PrivateTab'\nimport OneToTwoCols from '../../components/layout/OneToTwoCols'\nimport TripCard from '../../components/cards/TripCard'\nimport getUserTrips from '../../utils/getUserTrips'\n\n\n\nclass MyTrips extends React.Component {\n\n    state = {\n        existingTrips: [],\n        loading: true\n    }\n    _isMounted = false;\n\n    getTripsList() {\n        let userId = this.props.userId;\n        if (this.props.isAuthenticated) {\n            this._isMounted &&  getUserTrips(userId, (tripsList) => {\n                if (tripsList.length > 0) {\n                    this.setState({ existingTrips: tripsList, loading: false })\n                } else {\n                    this.setState({ loading: false })\n                }\n            }\n            )\n        }\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n        this.getTripsList()\n    }\n\n    componentDidUpdate(nextProps) {\n        if(this.props.isAuthenticated !== nextProps.isAuthenticated) {\n            this.getTripsList()\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    renderUserTrips() {\n\n        let { existingTrips, loading } = this.state;\n\n        while (loading) {\n            return (\n                <div aria-live=\"polite\">\n                    <p>Getting Trips...</p>\n                </div>\n            )\n        } \n        \n            if (existingTrips.length > 0) {\n                return (\n                    <>\n                        <div aria-live=\"polite\" className=\"sr-only\">\n                            <p>Showing all trips</p>\n                        </div>\n                        <OneToTwoCols>\n                            {existingTrips.map((trip, index) => {\n                                let {\n                                    thumbnail,\n                                    title,\n                                    locationsCount,\n                                    privacy,\n                                    tripId } = trip;\n\n                                return (\n                                    <TripCard\n                                        key={index}\n                                        thumbnail={thumbnail}\n                                        title={title}\n                                        tripId={tripId}\n                                        privacy={privacy}\n                                        locationsCount={locationsCount}\n                                    />\n                                )\n                            })}\n                        </OneToTwoCols>\n                    </>)\n\n            } else {\n\n                return (\n                    <div aria-live=\"polite\">\n                        <p>No trips here yet.</p>\n                    </div>\n                )\n\n\n            }\n\n    }\n\n    render() {\n        return (\n            <>\n                <PrivateTab\n                    componentContent={() => this.renderUserTrips()}\n                    logInLocation={\"trips\"}\n                    isVerified={this.props.isVerified}\n                    isAuthenticated={this.props.isAuthenticated}\n                />\n            </>\n        )\n    }\n\n}\n\nMyTrips.propTypes = {\n    userId: PropTypes.string,\n    isAuthenticated: PropTypes.bool,\n    isVerified: PropTypes.bool\n}\n\n\n\nexport default MyTrips;","import React from 'react'\nimport PropTypes from 'prop-types';\nimport PublicTrips from './PublicTrips'\nimport MyTrips from './MyTrips'\n\n\n\n\nclass Trips extends React.Component {\n\n    state = {\n        isPublic: true\n    }\n\n    renderContent() {\n\n        if (this.state.isPublic) {\n            return <PublicTrips />\n        }\n        else {\n            return (\n                <MyTrips \n                    isVerified={this.props.isVerified} \n                    isAuthenticated={this.props.isAuthenticated}\n                    userId={this.props.userId}\n                    />\n            )\n        }\n\n    }\n\n    switchTabs(value) {\n        this.setState({isPublic: value})\n    }\n\n    render() {\n        return (\n            <>\n                <div className={`container trips mobile-padding`}>\n                    <h2>Trips</h2>\n                    <ul className={`tabs`}>\n                        <li>\n                            <button \n                                className={this.state.isPublic ? 'active' : 'inactive'} \n                                onClick={() => this.switchTabs(true)}>All Public Trips\n                            </button>\n                        </li>\n                        <li>\n                            <button\n                            className={this.state.isPublic ? 'inactive' : 'active' } \n                            onClick={() => this.switchTabs(false)}>\n                                My Trips\n                            </button>\n                            </li>\n                    </ul>\n                    {this.renderContent()}\n                </div>\n            </>\n        )\n    }\n\n}\n\nTrips.propTypes = {\n    userId: PropTypes.string,\n    isAuthenticated: PropTypes.bool,\n    isVerified: PropTypes.bool\n}\n\n\n\nexport default Trips;","import { Route } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport Authenticate from '../../screens/authentication/Authenticate'\nimport VerifyEmail from '../../screens/authentication/VerifyEmail'\n\n\nfunction PrivateRoute({ component: Component, isAuthenticated, logInLocation, isVerified, user, ...rest }) {\n    \n    return (\n        <Route\n\n            {...rest}\n\n            render={props => (\n\n                isAuthenticated ?\n\n                    (\n                        isVerified ?\n\n                            <Component {...props} />\n                            :\n                            <VerifyEmail logInLocation={logInLocation} />\n\n                    )\n\n                    :\n\n                    (<Authenticate logInLocation={logInLocation} />)\n            )} />\n\n    )\n}\n\n\nPrivateRoute.propTypes = {\n    isAuthenticated: PropTypes.bool.isRequired,\n    isVerified: PropTypes.bool.isRequired,\n    logInLocation: PropTypes.string\n}\n\nexport default PrivateRoute;","function Footer() {\n    return (\n        <footer>\n            <div className={`container`}>\n                <p>&copy; PhotoAtlas 2021</p>\n                <p className={`caption`}>\n                    All photographs and their titles/metadata on PhotoAtlas are copyrighted and owned by\n                    their respective owners (the photographers) and not by PhotoAtlas. As such Photo Atlas does\n                    not grant any licenses to any copyrights, patents or any other intellectual property rights. \n                    PhotoAtlas is not affiliated with Flickr.com, but sources its photos through the Flickr API.\n          </p>\n            </div>\n        </footer>\n    )\n}\n\nexport default Footer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SimpleReactLightbox, { SRLWrapper } from \"simple-react-lightbox\";\n\n\nconst PhotoSlider = (props) => {\n  const { imageList } = props;\n  const imagesCount = imageList.length;\n\n  const lightboxOptions = {\n    buttons: {\n      showDownloadButton: false,\n      showAutoplayButton: false\n    }\n  }\n\n  return (\n    <SimpleReactLightbox>\n      <div className={`photo-slider`}>\n\n        <SRLWrapper options={lightboxOptions}>\n\n          {imageList.map((image, id) => {\n\n            const { src, alt, author, creditUrl } = image;\n\n            return (\n              <div key={id} className={`image-with-credit`}>\n                <a href={src}>\n                 <div className={`image-container`}>\n                 <img  src={src} alt={alt ? alt : ''}   />\n                 </div>\n                </a>\n                {author && <span className={`credit`}><a href={creditUrl}>{author}</a></span>}\n              </div>\n            )\n\n          })}\n\n        </SRLWrapper>\n\n      </div>\n\n      <p className={`caption`}>Total images: {imagesCount}</p>\n\n    </SimpleReactLightbox>\n\n  )\n\n}\n\nPhotoSlider.propTypes = {\n  imageList: PropTypes.arrayOf(PropTypes.object).isRequired\n}\n\n\nexport default PhotoSlider;\n","import PropTypes from 'prop-types';\n\nfunction SubjectIndicators(props) {\n\n    let { subjects } = props;\n\n    if (!subjects) {\n        subjects = [];\n    }\n\n\n    return (\n        <>\n            <h3>Photo Subjects</h3>\n            <div className={`data-container`}>\n                <ul className={`subject-indicators`}>\n\n                    {subjects.includes('abandoned') && <li className={`abandoned`}>Abandoned</li>}\n\n                    {subjects.includes('architecture') && <li className={`architecture`}>Architecture</li>}\n\n                    {subjects.includes('astro') && <li className={`astro`}>Astrophotography</li>}\n\n                    {subjects.includes('landscape') && <li className={`landscape`}>Landscape</li>}\n\n                    {subjects.includes('nature') && <li className={`nature`}>Nature</li>}\n\n                    {subjects.includes('street art') && <li className={`street-art`}>Street Art</li>}\n\n                    {subjects.includes('sunrise') && <li className={`sunrise`}>Sunrise</li>}\n\n                    {subjects.includes('sunset') && <li className={`sunset`}>Sunset</li>}\n\n                    {subjects.includes('transport') && <li className={`transport`}>Transport</li>}\n\n                    {subjects.includes('people') && <li className={`people`}>People</li>}\n\n                    {subjects.includes('urban') && <li className={`urban`}>Urban</li>}\n\n                    {subjects.includes('water') && <li className={`water`}>Water Feature</li>}\n\n                </ul>\n            </div>\n        </>\n    )\n\n}\n\nSubjectIndicators.propTypes = {\n    subjects: PropTypes.arrayOf(PropTypes.string)\n}\n\nexport default SubjectIndicators;","async function getFlickrPhotoInfo(photoId, handleResponse =\n    (responseData) => console.log(responseData)) {\n\n    let url = `https://api.flickr.com/services/rest/?api_key=${process.env.REACT_APP_FLICKR_API_KEY}&method=flickr.photos.getInfo&format=json&nojsoncallback=1}&photo_id=${photoId}`\n\n    await fetch(url)\n        .then(response => {\n            if (!response.ok) {\n                throw Error(response.statusText);\n            }\n            return response.json().then(data => {\n                handleResponse(data);\n            });\n        }).catch(error => {\n            console.log(error)\n        }\n        )\n};\n\nexport default getFlickrPhotoInfo;","\nimport PropTypes from 'prop-types'\n\nconst DirectionsLarge = (props) => {\n    return (\n        <a href={`https://maps.google.com/?q=${props.latitude},${props.longitude}`} className={`action-button directions`}>Directions</a>\n    )\n}\n\nDirectionsLarge.propTypes = {\n    latitude: PropTypes.number,\n    longitude: PropTypes.number\n}\n\nexport {DirectionsLarge};","import PropTypes from 'prop-types'\n\nconst AddToTripsLarge = ({added, ...rest}) => {\n\n    return (\n        <button className={`action-button ${added ? 'added' : 'add'}`} {...rest}>\n            {\n                added ? 'Change Trips' : 'Add to Trip'\n            }\n        </button>\n    )\n}\n\nconst AddToTripsSmall = ({added, ...rest}) => {\n\n    return (\n        <button className={`action-button-small ${added ? 'added' : 'add'}`} {...rest}>\n            {\n                added ? 'Change Trips' : 'Add to Trip'\n            }\n        </button>\n    )\n}\n\nAddToTripsLarge.propTypes = {\n    add: PropTypes.bool\n}\n\nAddToTripsSmall.propTypes = {\n    add: PropTypes.bool\n}\n\nexport {AddToTripsLarge, AddToTripsSmall};","import PropTypes from 'prop-types';\n\nfunction RadioButton(props) {\n\n    let { \n        id,\n        value,\n        labelText,\n        className,\n        name,\n        ...rest } = props;\n \n    let idName = id ? id : value;\n\n    return (\n        \n        <>\n        \n            <label className={`check-container ${className ? className : ''}`} htmlFor={idName}>{labelText ? labelText : 'label'}\n\n                <input\n                    \n                    type=\"radio\"\n\n                    id={idName}\n\n                    name={name}\n\n                    value={value}\n\n                    {...rest}\n\n                />\n\n                <span className={`radiomark`}></span>\n\n            </label>\n    </>\n    )\n}\n\nRadioButton.propTypes = {\n    className: PropTypes.string,\n    value: PropTypes.string.isRequired,\n    labelText: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n}\n\n\nexport default RadioButton;","function generateDate() {\n\tlet result;\n\tlet months = [\"JAN\",\"FEB\",\"MAR\",\"APR\",\"MAY\",\"JUN\",\"JUL\",\"AUG\",\"SEP\",\"OCT\",\"NOV\",\"DEC\"]\n\tlet d = new Date();\n\tlet day = d.getDate();\n\tlet month = months[d.getMonth()];\n\tlet year = d.getFullYear();\n\n\tresult = `${day}-${month}-${year}`\n\n\treturn result;\n\n}\n\nfunction generateTimeNumber() {\n\tlet result;\n\tlet d = new Date();\n\tlet hour = d.getHours();\n\tlet minutes = d.getMinutes();\n\tlet seconds = d.getSeconds();\n\tlet milliseconds = d.getMilliseconds();\n\tresult = `${hour}-${minutes}-${seconds}-${milliseconds}`\n\treturn result;\n}\n\n\nexport {generateDate, generateTimeNumber}\n","function generateId(length, prefix, sufix) {\n    let result  = '';\n    let characters  = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let charactersLength = characters.length;\n    for ( let i = 0; i < length; i++ ) {\n       result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    if(prefix) {\n        result = `${prefix}-${result}`\n    }\n    if(sufix) {\n        result = `${result}-${sufix}`\n    }\n    \n    return result;\n }\n\n export default generateId;\n","import React from 'react'\n\nimport firebase from '../../utils/firebase/firebaseConfig'\nimport Authenticate from '../../screens/authentication/Authenticate'\nimport Modal from './Modal'\nimport TexInput from '../forms/TextInput'\nimport SubmitButton from '../forms/SubmitButton'\nimport RadioButton from '../forms/RadioButton'\nimport { generateDate, generateTimeNumber } from '../../utils/generateDateAndTime'\nimport generateID from '../../utils/generateId'\nimport getUserTrips from '../../utils/getUserTrips'\n\nclass ManageTripsModal extends React.Component {\n    state = {\n        modalTitle: 'Add or Remove from Trips',\n        modalDescription: '',\n        isAuthenticated: false,\n        userId: '',\n        existingTrips: [],\n        newTripPrivacy: 'public',\n        newTripName: '',\n        newTripTags: '',\n        newUser: false,\n        creatingTrip: false,\n        tripNameLength: 0,\n        tripNameError: '',\n        tripTagsError: '',\n        newTripCreated: false,\n        needNewTrip: false,\n        errorCreatingTrip: '',\n        errorCreatingLocation: '',\n        errorUpdatingUserTrips: '',\n        errorAddingFilters: '',\n        updatingTrips: true\n    }\n\n    _isMounted = false;\n\n    closeModal() {\n        this.setState({\n            newTripCreated: false,\n            newTripPrivacy: 'public',\n            newTripName: '',\n            newTripTags: '',\n            errorCreatingTrip: '',\n            errorCreatingLocation: '',\n            errorUpdatingUserTrips: '',\n            errorAddingFilters: '',\n            needNewTrip: false\n        }, () => this.props.handleClose());\n    }\n\n    changeUserType(newUserValue) {\n        this.setState({ newUser: newUserValue }, () => {\n\n            if (this.state.newUser) {\n                this.setState(\n                    {\n                        modalTitle: 'Sign Up',\n                        modalDescription: 'Create an account to manage your trips.'\n                    }\n                )\n            } else {\n                this.setState(\n                    {\n                        modalTitle: 'Sign In',\n                        modalDescription: 'Sign in to manage your trips.'\n                    }\n                )\n            }\n        })\n    }\n\n    checkExistingTrips(userId) {\n        \n        this.setState({ updatingTrips: true })\n\n        this._isMounted && \n        getUserTrips(userId,  (existingTrips) => this.setState({ existingTrips: existingTrips, updatingTrips: false }), this.props.locationId)\n    }\n\n\n\n    checkAuth() {\n\n        let userId = this.props.userId;\n\n        if(!userId) {\n            let user = firebase.auth().currentUser;\n            if(user) {\n                userId = user.uid;\n            } \n        }\n\n\n        if (this._isMounted) {\n\n\n            if (userId) {\n\n           \n                //get user trips\n                this._isMounted && this.checkExistingTrips(userId);\n\n                this.setState({ isAuthenticated: true, userId: userId })\n\n                if (this.state.existingTrips.length < 1) {\n                    this.setState(\n                        {\n                            modalTitle: 'Save to a New Trip',\n                            modalDescription: '',\n                            updatingTrips: false\n                        }\n                    )\n                }\n\n            } else {\n                this.setState(\n                    {\n                        modalTitle: 'Sign In',\n                        modalDescription: 'Sign in to manage your trips.'\n                    }\n                )\n            }\n        }\n\n\n\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        this.checkAuth();\n        //set a listner or trips https://firebase.google.com/docs/database/web/read-and-write#web_value_events\n    }\n\n\n    componentDidUpdate(prevProps) {\n        this._isMounted = true;\n        // Typical usage (don't forget to compare props):\n        if (this.props.locationId !== prevProps.locationId) {\n            this.checkAuth();\n        }\n    }\n\n    renderModalContent() {\n        //modal will ask user to sign in or create account if user is not authenticated\n        //user will NOT be required to have a verified email when saving a location\n\n        //authenticate\n        if (!this.state.isAuthenticated) {\n            return (\n                <div className=\"modal-content-padding\">\n                    <Authenticate\n                        hideTitle\n                        changeUserOnParent={(newUserValue) => this.changeUserType(newUserValue)}\n                        afterSignIn={(user) => this.checkAuth(user)}\n                        afterCreateAccount={(user) => this.checkAuth(user)}\n\n                    />\n                </div>\n            )\n        } else {\n\n            if (this.state.updatingTrips) {\n                return (\n                    <div className=\"modal-content-padding center-text\">\n                        <p>Updating trips...</p>\n                    </div>)\n\n            } else {\n                if (this.state.existingTrips.length > 0 && !this.state.needNewTrip && !this.state.newTripCreated) {\n                    return this.selectExistingTrip();\n                }\n                else {\n                    if (!this.state.newTripCreated && !this.state.updatingTrips) {\n                        return this.getNewTripInfo();\n                    } else {\n\n                        return this.newTripCreated()\n\n\n                    }\n                }\n            }\n        }\n\n    }\n\n    selectExistingTrip() {\n        //show list of trips\n        //a button that triggets getNewTripInfo\n        return (\n            <>\n\n                {this.renderExistingTrips()}\n                <div className=\"modal-content-padding center-text\">\n                    <button onClick={() => this.switchForm()} className=\"button-link\"> + Create a New Trip</button>\n                </div>\n\n            </>\n        )\n\n    }\n\n    switchForm() {\n        this.setState({ needNewTrip: !this.state.needNewTrip })\n    }\n\n    renderExistingTrips() {\n        let { existingTrips } = this.state;\n\n\n\n        return (<ul className=\"existing-trips\">\n            {existingTrips.map((trip, index) => {\n                let {\n                    thumbnail,\n                    title,\n                    locationsCount,\n                    privacy,\n                    tripId,\n                    inTrip } = trip;\n\n                return (\n                    <li key={index} className=\"trip-card-small\">\n                        <div className={`trip-card-image`}>\n                            <img src={thumbnail} alt=\"\" />\n                        </div>\n                        <div className={`trip-card-content`}>\n                            <p className={`title`}>{title}</p>\n                            <p className={`meta-data ${privacy}`}>\n                                {privacy}</p>\n                            <p className={`meta-data marker`}>\n                                {locationsCount} {(locationsCount > 1 || locationsCount < 1) ? 'Locations' : 'Location'}</p>\n                            <button className=\"add-or-remove\" onClick={() => { this.addOrRemoveFromTrip(tripId, privacy) }}>\n                                {inTrip ? '- Remove' : '+ Add'}\n                                <span>{inTrip ? `from ${title}` : `to ${title}`}</span>\n                            </button>\n                        </div>\n                    </li>\n                )\n            })}\n        </ul>)\n\n    }\n\n    handleTripNamelInput(e) {\n        e.preventDefault();\n        let value = e.target.value;\n        let valueLength = value.length;\n\n        this.setState({\n            newTripName: e.target.value,\n            tripNameLength: valueLength,\n            tripNameError: \"\"\n        })\n        if (valueLength > 50) {\n            this.setState({\n                tripNameError: \"Your trip name is too long.\"\n            })\n        }\n    }\n\n    handleTripTagsInput(e) {\n        e.preventDefault();\n\n        this.setState({\n            newTripTags: e.target.value,\n            tripTagsError: \"\"\n        }, () => {\n            //check if tags have special characters other than comma\n            let testString = /^[a-zA-Z ,0-9]+$/;\n\n            if (this.state.newTripTags && !testString.test(this.state.newTripTags)) {\n                this.setState({\n                    tripTagsError: \"Tags may only contain letters, numbers, and commas\"\n                })\n            }\n        });\n\n\n    }\n\n    renderDatabaseErrors() {\n        if (\n            this.state.errorCreatingLocation ||\n            this.state.errorUpdatingUserTrips ||\n            this.state.errorCreatingTrip ||\n            this.state.errorAddingFilters\n        ) {\n            return (\n                <div className=\"error-font\" aria-live=\"polite\">\n                    <ul>\n                        {this.state.errorCreatingTrip && <li>{this.state.errorCreatingTrip}</li>}\n                        {this.state.errorUpdatingUserTrips && <li >{this.state.errorUpdatingUserTrips}</li>}\n                        {this.state.errorCreatingLocation && <li>{this.state.errorCreatingLocation}</li>}\n                        {this.state.errorAddingFilters && <li>{this.state.errorAddingFilters}</li>}\n                    </ul>\n                </div>\n            )\n        }\n\n\n    }\n\n    getNewTripInfo() {\n        return (\n            <>\n                <h3 className=\"h5-font center-text\">Create a New Trip</h3>\n                {this.renderDatabaseErrors()}\n\n                <form className=\"modal-content-padding\">\n                    <div className=\"form-component-wrapper\">\n                        <label htmlFor=\"trip-name\">Trip Name (Max 50 Characters)</label>\n                        <TexInput placeholder=\"Beautiful City\" id=\"trip-name\" value={this.state.newTripName} onChange={(e) => this.handleTripNamelInput(e)} required />\n                        {this.state.tripNameLength !== 0 && <p className=\"character-count\" aria-live=\"polite\">Characters left: {50 - this.state.tripNameLength}</p>}\n                        {this.state.tripNameError && <p className=\"error-font\" aria-live=\"polite\">{this.state.tripNameError}</p>}\n                    </div>\n\n                    <div className=\"form-component-wrapper\">\n                        <label htmlFor=\"trip-tags\">Tags (Comma separated)</label>\n                        <TexInput placeholder=\"city, urban architecture\" id=\"trip-tags\" value={this.state.newTripTags} onChange={(e) => this.handleTripTagsInput(e)} />\n                        {this.state.tripTagsError && <p className=\"error-font\" aria-live=\"polite\">{this.state.tripTagsError}</p>}\n                    </div>\n\n                    <fieldset className=\"form-component-wrapper\">\n                        <legend>Visibility Settings</legend>\n                        <RadioButton onChange={(e) => this.handleNewTripPrivacy(e)} labelText=\"Public\" defaultChecked name=\"trip-privacy\" value=\"public\" />\n                        <label className=\"caption-font\" htmlFor=\"public\">Anyone can see</label>\n                        <RadioButton onChange={(e) => this.handleNewTripPrivacy(e)} labelText=\"Private\" name=\"trip-privacy\" value=\"private\" />\n                        <label className=\"caption-font\" htmlFor=\"private\">Only you can see</label>\n                        <RadioButton onChange={(e) => this.handleNewTripPrivacy(e)} labelText=\"Shareable\" name=\"trip-privacy\" value=\"shareable\" />\n                        <label className=\"caption-font\" htmlFor=\"shareable\">Anyone with a link can see</label>\n                    </fieldset>\n\n                    <div className=\"form-component-wrapper\">\n                        <SubmitButton onClick={(e) => this.createNewTrip(e)} value={`${this.state.creatingTrip ? 'Creating Trip...' : 'Create Trip'}`} />\n                    </div>\n\n\n                </form>\n\n                {this.state.existingTrips.length > 0 &&\n                    <div className=\"modal-content-padding\">\n                        <button onClick={() => this.switchForm()} className=\"secondary-button back-button\">Back to Existing Trips</button>\n                    </div>\n                }\n            </>\n        )\n\n    }\n\n    newTripCreated() {\n        return (\n            <div className=\"modal-content-padding center-text\">\n                <h3 className=\"h5-font center-text\">\n                    This location was added to your new trip.\n                </h3>\n            </div>\n        )\n\n    }\n\n    createNewFlickrSourcedLocation(locationRef) {\n        let database = firebase.database();\n        let locationId = this.props.locationId;\n        let locationPhotosArray = this.props.photos;\n        let locationName = locationPhotosArray[0].title;\n        let locationCoordinates = this.props.coordinates;\n        let locationSubjectsArray = this.props.subjects;\n        let date = generateDate();\n\n        // arrays are handled like objects on Firebase Realtime Database\n        //https://firebase.googleblog.com/2014/04/best-practices-arrays-in-firebase.html\n        //convert props arrays into objects for better database handling\n        let locationSubjects = {};\n        let locationPhotos = {};\n\n        locationPhotosArray.forEach(photo => {\n            let flickrId = photo.flickrId;\n            let photoId;\n            if (flickrId) {\n                photoId = `flickrPhoto-${flickrId}`\n            }\n\n            locationPhotos[photoId] = {\n                title: photo.title,\n                author: photo.author,\n                src: photo.src,\n                creditUrl: photo.creditUrl ? photo.creditUrl : null\n            }\n        }\n        )\n\n\n        locationSubjectsArray.forEach(subject => {\n\n            locationSubjects[subject] = true\n\n        });\n\n        database.ref(`${locationRef}`).set({\n            locationName: locationName,\n            photos: locationPhotos,\n            coordinates: locationCoordinates,\n            savedCount: 1,\n            subjects: locationSubjects,\n            addedDate: date,\n            curated: false, //indicates that app has not been curated by a PhotoAtlas user\n            userLastEditedDate: null,\n            woeId: this.props.woeId\n        }).then(() => {\n\n            // add subjects record\n            locationSubjectsArray.forEach(\n\n                subject => {\n\n                    let subjectRef = subject;\n\n                    let update = {};\n\n                    update[locationId] = true;\n\n                    database.ref(`subjects/${subjectRef}`).update(\n                        update\n                    ).catch(\n                        (error) => {\n                            this.setState({ errorAddingFilter: `Could not add all filters to database: ${error.message}` })\n                        });\n\n                })\n\n        }).catch(\n            (error) => {\n                this.setState({ errorCreatingLocation: `Could not add location to database: ${error.message}` })\n            }\n        )\n\n    }\n\n    createNewTrip(e) {\n        e.preventDefault();\n\n        this.setState(\n            {\n                errorCreatingTrip: '',\n                errorCreatingLocation: '',\n                errorUpdatingUserTrips: '',\n                errorAddingFilters: ''\n            }\n        )\n\n        if (!this.state.newTripName) {\n            this.setState({ tripNameError: 'Please name your trip.' })\n        }\n\n        if (!this.state.tripNameError && this.state.newTripName && !this.state.tripTagsError) {\n            this.setState({ creatingTrip: true })\n\n            let locationId = this.props.locationId;\n            let locationPhotosArray = this.props.photos;\n\n            let tripPrivacy = this.state.newTripPrivacy;\n            let tripName = this.state.newTripName;\n            let tripFeaturedImg = locationPhotosArray[0];\n            let tripFeaturedImgSrc = tripFeaturedImg.src;\n            let tripAuthor = this.state.userId;\n            let tripTags = this.state.newTripTags;\n            if (tripTags.endsWith(\",\") || tripTags.endsWith(\" ,\")) {\n                tripTags = tripTags.slice(0, -1)\n            }\n            let date = generateDate();\n            let time = generateTimeNumber();\n            let tripId = generateID(7, `trip-${date}`, `${time}`)\n\n            let locations = {}\n            locations[locationId] = true;\n\n            let database = firebase.database();\n\n            // create new trip\n            database.ref(`${tripPrivacy}Trips/` + tripId).set({\n                tripName: tripName,\n                featuredImg: tripFeaturedImgSrc,\n                author: tripAuthor,\n                locationsCount: 1,\n                locations: locations,\n                tags: tripTags,\n                createdOn: date,\n                lastEdited: date\n            }).catch((error) => {\n                this.setState({ errorCreatingTrip: `Could not create trip: ${error.message}` })\n            }).then(() => {\n                //add trip to user trips\n                database.ref(`userTrips/${tripAuthor}/${tripId}`).set({\n                    tripPrivacy: tripPrivacy\n                }).catch((error) => {\n                    this.setState({ errorUpdatingUserTrips: `Could to your list of trips: ${error.message}` })\n                });\n            }).then(() => {\n                if (locationId.startsWith(\"flickr-\")) { // check if primary source is from flickr or user created\n\n                    let locationRef = `appLocations/flickrSourced/${locationId}`;\n\n                    //check if location exists in lists of locations if not, then add location\n                    //use transactions to make sure that count stays accurate\n                    //https://firebase.google.com/docs/database/web/read-and-write#save_data_as_transactions\n\n                    database.ref(`${locationRef}`).get().then((snapshot) => {\n                        //if location exists\n                        if (snapshot.exists()) {\n                            //get how many people have saved it, and who has saved it\n                            let savedCount = snapshot.val().savedCount;\n\n                            //add to the saved count \n                            //and add the author\n                            if (savedCount) {\n                                database.ref(`${locationRef}`).transaction(\n                                    (location) => {\n                                        if (location) {\n                                            location.savedCount++;\n                                        }\n                                        return location;\n                                    }\n                                )\n                            }\n\n                        }\n                        else {\n                            //create the location\n                            this.createNewFlickrSourcedLocation(locationRef);\n                        }\n                    })\n                }\n\n            }).then(() => {\n\n                if (!this.state.errorCreatingTrip && !this.state.errorCreatingLocation && !this.state.errorUpdatingUserTrips && !this.state.errorAddingFilters) {\n                    this.setState({\n                        creatingTrip: false,\n                        newTripCreated: true,\n                        modalTitle: 'You have a New Trip',\n                        modalDescription: ''\n                    })\n                } else {\n                    this.setState({\n                        creatingTrip: false\n                    })\n                }\n            }).then(\n                () => this.checkExistingTrips(this.state.userId)\n            )\n\n        }\n\n    }\n\n    addOrRemoveFromTrip(tripId, privacy) {\n\n        this.setState({ updatingTrips: true })\n\n        let database = firebase.database();\n        let currentLocation = this.props.locationId;\n        let user = this.state.userId;\n        let date = generateDate();\n\n        let tripRef = `${privacy}Trips/${tripId}/`\n        //need to change\n        //last edited\n        //locationsCount\n        //locations\n\n        let locationRef = `appLocations/flickrSourced/${currentLocation}`\n        //need to change savedCount\n\n\n        database.ref(`${tripRef}/locations/${currentLocation}`).get().then(\n            snapshot => {\n\n                if (snapshot.exists()) {\n                    //remove\n\n                    database.ref(`${tripRef}`).transaction(\n                        trip => {\n                            if (trip) {\n                                //decrease locationsCount\n                                if (trip.locationsCount > 0) {\n                                    trip.locationsCount--;\n                                }\n                                //change the last edited\n                                trip.lastEdited = date;\n\n                            }\n                            return trip\n                        }).catch((error) => console.log(error)).then(() => {\n                            //remove location from trip\n                            database.ref(`${tripRef}/locations/${currentLocation}`).transaction(\n                                location => {\n                                    if (location) {\n                                        location = null\n                                    }\n                                    return location\n                                }\n                            )\n                        }).then(() => this.checkExistingTrips(user))\n\n                    database.ref(`${locationRef}`).transaction(\n                        location => {\n                            if (location) {\n                                //decrease savedCount\n\n                                location.savedCount--\n\n\n                            }\n                            return location\n                        }).catch((error) => console.log(error))\n\n\n                }\n                else {\n                    //add\n\n                    if (currentLocation.startsWith(\"flickr-\")) {\n                        let locationRef = `appLocations/flickrSourced/${currentLocation}`\n\n                        database.ref(`${locationRef}`).get().then(\n                            (snapshot) => {\n                                if (!snapshot.exists()) {\n                                    this.createNewFlickrSourcedLocation(locationRef)\n                                }\n                            }\n                        )\n                    }\n\n                    database.ref(`${tripRef}`).transaction(\n                        trip => {\n                            if (trip) {\n                                //increase locationsCount\n                                trip.locationsCount++;\n                                //change the last edited\n                                trip.lastEdited = date;\n                            }\n                            return trip\n                        }).catch((error) => console.log(error)).then(() => {\n                            //add location to trip\n                            //check if trip has locations\n                            database.ref(`${tripRef}/locations`).get().then((snapshot) => {\n                                if (snapshot.exists()) {\n                                    let update = {}\n                                    update[currentLocation] = true\n\n                                    database.ref(`${tripRef}/locations`).update(\n                                        update\n                                    ).catch((error) => console.log(error))\n                                } else {\n                                    let update = { locations: {} }\n                                    update.locations[currentLocation] = true\n\n                                    database.ref(`${tripRef}`).update(\n                                        update\n                                    ).catch((error) => console.log(error))\n                                }\n\n                            }).then(() => this.checkExistingTrips(user))\n\n                        })\n\n\n                    database.ref(`${locationRef}`).transaction(\n                        location => {\n                            if (location) {\n                                //increase savedCount\n                                location.savedCount++\n                            }\n                            return location\n                        }).catch((error) => console.log(error))\n\n                }\n            }).then(() => this.setState({ updatingTrips: false }))\n    }\n\n    handleNewTripPrivacy(e) {\n        this.setState({ newTripPrivacy: e.target.value })\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    render() {\n        let {\n            modalTitle,\n            modalDescription\n        } = this.state;\n\n        return (\n            <Modal\n                modalId='manage-trips-modal'\n                modalTitle={modalTitle}\n                modalDescription={modalDescription}\n                isOpen={this.props.isOpen}\n                handleClose={() => this.closeModal()}\n            >\n                {this.renderModalContent()}\n            </Modal>\n        )\n    }\n}\n\nexport default ManageTripsModal;","import firebase from './firebase/firebaseConfig'\n\nlet getSavesCount = (locationId, callback) => {\n    let database = firebase.database();\n\n    database.ref(`appLocations/flickrSourced/${locationId}`).get().then(\n        (snapshot) => {\n            let count = 0;\n            if (snapshot.exists()) {\n                let location = snapshot.val();\n                count = location['savedCount'];\n            }\n            return count\n        }).catch((error)=> console.log(error)).then((count) => {\n            callback(count)\n        }\n        )\n\n}\n\nexport default getSavesCount;","import React from 'react'\nimport PropTypes from 'prop-types';\n\nimport PhotoSlider from '../../components/slider/PhotoSlider'\nimport SubjectIndicators from '../../components/content/SubjectIndicators'\nimport getFlickrPhotoInfo from '../../utils/flickr/getFlickrPhotoInfo'\nimport createFlickrImageUrl from '../../utils/flickr/createFlickrImageUrl'\nimport getFlickrPlace from '../../utils/flickr/getFlickrPlace'\nimport getFlickrPhotos from '../../utils/flickr/getFlickrPhotos'\nimport filterTags from '../../utils/filterTags'\nimport { DirectionsLarge } from '../../components/buttons/DirectionsButtons'\nimport { AddToTripsLarge, AddToTripsSmall } from '../../components/buttons/AddToTripsButtons'\nimport ManageTripsModal from '../../components/modals/ManageTripsModal'\nimport firebase from '../../utils/firebase/firebaseConfig'\nimport getSavesCount from '../../utils/getSavesCount'\n\nclass Location extends React.Component {\n    state = {\n        locationId: '',\n        title: \"\",\n        distance: 'loading...',\n        saves: 0,\n        destination: {\n            latitude: 0,\n            longitude: 0,\n        },\n        imageList: [],\n        subjects: [],\n        firstPhoto: {},\n        showTripsModal: false,\n        inTrips: false,\n        userId: null,\n        woeId: null\n    };\n\n    _isMounted = false;\n\n\n    manageTripsModal() {\n        this.setState({ showTripsModal: !this.state.showTripsModal })\n        let userId = this.props.userId;\n        this.checkIfInTrips(userId)\n\n        getSavesCount(\n            this.state.locationId,\n            (count) => {\n\n                this.setState({ saves: count })\n            }\n        );\n\n    }\n\n    checkIfInTrips(userId) {\n\n\n\n        if (userId) {\n            let database = firebase.database()\n\n\n            this._isMounted && database.ref(`userTrips/${userId}`).get().then((snapshot) => {\n                let locationTrips = [];\n                if (snapshot.exists()) {\n                    let trips = snapshot.val();\n\n\n                    for (const tripId in trips) {\n\n                        let privacy = trips[tripId]['tripPrivacy']\n\n                        let location = this.state.locationId\n\n                        let locationRef = `${privacy}Trips/${tripId}/locations/${location}`\n\n                        this._isMounted && database.ref(`${locationRef}`).get().then(\n                            snapshot => {\n\n                                if (snapshot.exists()) {\n                                    locationTrips.push(tripId)\n                                }\n\n                                if (locationTrips.length > 0) {\n\n                                    this.setState({ inTrips: true })\n                                    \n                                } else {\n                                    this.setState({ inTrips: false })\n                                }\n\n                            })\n\n\n                    }\n\n                }\n                return locationTrips\n            })\n        }\n\n\n\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.userId !== this.props.userId) {\n            let userId = this.props.userId;\n\n            this.checkIfInTrips(userId)\n\n        }\n    }\n\n\n\n    componentDidMount() {\n        this._isMounted = true;\n        let userId = this.props.userId;\n        this.checkIfInTrips(userId)\n\n        //get the location id from the path\n        let path = this.props.location.pathname;\n        let locationId = path.replace(\"/location/\", \"\");\n        this.setState({ locationId: locationId });\n\n\n\n        getSavesCount(\n            locationId,\n            (count) => {\n\n                this.setState({ saves: count })\n            }\n        );\n\n\n\n        //get the woeId from the search query\n        let pathQuery = this.props.location.search;\n        let searchParams = new URLSearchParams(pathQuery);\n        let woeId = searchParams.get(\"woe\");\n        this.setState({woeId: woeId})\n\n\n        //if the path starts with flickr\n        if (locationId.startsWith(\"flickr-\")) {\n\n\n            //get the photo id\n            let photoId = locationId.replace(\"flickr-\", \"\");\n\n\n            //get the photo information\n            this._isMounted && getFlickrPhotoInfo(\n\n                photoId,\n\n                (data) => {\n\n                    let photoData = data.photo;\n                    let src, title, alt, lat, lon, author, creditUrl, tags;\n\n                    if (photoData) {\n                        src = createFlickrImageUrl(photoData);\n                        title = photoData.title._content;\n                        alt = photoData.description._content;\n                        lat = photoData.location.latitude;\n                        lon = photoData.location.longitude;\n                        author = photoData.owner.realname;\n                        if (!author) {\n                            author = photoData.owner.username\n                        }\n                        creditUrl = photoData.urls.url[0]._content;\n                        tags = photoData.tags\n                    }\n\n                    let firstPhoto = {\n                        src: src,\n                        title: title,\n                        alt: alt,\n                        lon: lon,\n                        lat: lat,\n                        author: author,\n                        creditUrl: creditUrl,\n                        tags: tags\n                    }\n\n                    this.setState({ firstPhoto: firstPhoto }, () => {\n\n                        this.getLocationDetailsFromFlickr(photoId, woeId);\n\n                    })\n                }\n            )\n\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n    getLocationDetailsFromFlickr(photoId, woeId) {\n\n        //get the photo data\n        let photo = this.state.firstPhoto;\n        let src = photo.src;\n        let title = photo.title;\n        let alt = photo.alt;\n        let lat = photo.lat;\n        let lon = photo.lon;\n        let author = photo.author;\n        let creditUrl = photo.creditUrl;\n\n\n\n        //get each tag\n        let tagsList = photo.tags;\n\n        if (!tagsList) {\n            tagsList = [];\n        } else {\n            tagsList = tagsList.tag\n        }\n\n        // generate a string from tags\n        let tagsString = '';\n        tagsList.forEach(\n            (tag, index) => {\n                tag = tag._content;\n                if (tag) {\n                    if (index === 0) {\n                        tagsString = tagsString.concat(tag)\n                    } else {\n                        tagsString = tagsString.concat(`, ${tag}`)\n                    }\n                }\n            }\n        )\n\n        //check if filter tags are within the tagsString, if so add subjects list\n        if (tagsString) {\n\n            let subjects = []\n\n            //make the filterTags string into an array\n            //for each item in the array check if it's in tags string\n            //once one tag is found subject\n            //use a \"for\" loop instead of \"forEach\" so that it breaks on first match\n\n            let setSubject = (tagsArray, subject) => {\n                for (let i = 0; i < tagsArray.length; i++) {\n                    let tag = tagsArray[i];\n                    if (tagsString.includes(tag)) {\n                        subjects.push(subject)\n                        break;\n                    }\n                }\n            }\n\n            //'abandoned'\n            let abandonedString = filterTags.abandonedTags;\n            let abandonedArray = abandonedString.split(', ');\n            setSubject(abandonedArray, 'abandoned');\n\n            //'architecture'\n            let architectureString = filterTags.architectureTags;\n            let architectureArray = architectureString.split(', ');\n            setSubject(architectureArray, 'architecture');\n\n            //'astro'\n            let astroString = filterTags.astroTags;\n            let astroArray = astroString.split(', ');\n            setSubject(astroArray, 'astro');\n\n            //'landscape'\n            let landscapeString = filterTags.landscapeTags;\n            let landscapeArray = landscapeString.split(', ');\n            setSubject(landscapeArray, 'landscape');\n\n            //'nature'\n            let natureString = filterTags.natureTags;\n            let natureArray = natureString.split(', ');\n            setSubject(natureArray, 'nature');\n\n            //'street art'\n            let streetArtString = filterTags.streetArtTags;\n            let streetArtArray = streetArtString.split(', ');\n            setSubject(streetArtArray, 'street art');\n\n            //'sunrise'\n            let sunriseString = filterTags.sunriseTags;\n            let sunriseArray = sunriseString.split(', ');\n            setSubject(sunriseArray, 'sunrise');\n\n            //'sunset'\n            let sunsetString = filterTags.sunsetTags;\n            let sunsetArray = sunsetString.split(', ');\n            setSubject(sunsetArray, 'sunset');\n\n            //'transport'\n            let transportString = filterTags.transportTags;\n            let transportArray = transportString.split(', ');\n            setSubject(transportArray, 'transport');\n\n            //'people'\n            let peopleString = filterTags.peopleTags;\n            let peopleArray = peopleString.split(', ');\n            setSubject(peopleArray, 'people');\n\n            //'urban'\n            let urbanString = filterTags.urbanTags;\n            let urbanArray = urbanString.split(', ');\n            setSubject(urbanArray, 'urban');\n\n            //'water'\n            let waterString = filterTags.waterTags;\n            let waterArray = waterString.split(', ');\n            setSubject(waterArray, 'water');\n\n            //if the location contains any subjects, update the state\n            if (subjects.length > 0) {\n                this.setState({ subjects: subjects })\n            }\n        }\n\n        //create a location object and add it to imageList\n\n        createFlickrImageUrl(photo)\n\n        let location = {\n            \"title\": title,\n            \"src\": src,\n            \"alt\": alt,\n            \"author\": author,\n            \"creditUrl\": creditUrl,\n            \"flickrId\": photoId\n        }\n\n        let place = async (options) => {\n            let placeName = await getFlickrPlace(options);\n            return placeName\n        }\n\n        place({ \"woeId\": woeId }).then(placeName => {\n\n            if (placeName) {\n                location.title = placeName\n            }\n\n        }).then(\n\n            this.setState(\n                {\n                    title: title,\n                    destination: {\n                        latitude: parseFloat(lat),\n                        longitude: parseFloat(lon)\n                    },\n\n                    imageList: [location] //will need to makesure this stays as first photo when others are added\n                }\n            )\n\n        ).then(\n            () => {\n\n\n                //use woeid to get other images\n                let options = {\n                    \"lat\": lat,\n                    \"lon\": lon,\n                    \"extras\": \"geo, description, owner_name, tags\",\n                    \"accuracy\": 16\n                }\n\n                getFlickrPhotos(options).then(\n                    data => {\n\n                        if (data) {\n\n                            let photos = data.photos\n\n                            if (photos) {\n                                photos = photos.photo\n                                let imageList = this.state.imageList;\n\n                                photos.forEach(\n                                    photo => {\n                                        //only select photos with the same woeid (same location)\n                                        //prevent duplicate locations and locations with no tags\n                                        if (photo.woeid === woeId && photo.id !== photoId && photo.tags) {\n\n                                            let newTitle = photo.title;\n                                            let newSrc = createFlickrImageUrl(photo);\n                                            let newAlt = photo.description._content;\n                                            let newAuthor = photo.ownername;\n                                            let ownerId = photo.owner;\n                                            let newCreditUrl = `https://www.flickr.com/photos/${ownerId}/${photo.id}`;\n                                            let newphotoId = photo.id;\n\n\n                                            let newLocation = {\n                                                \"title\": newTitle,\n                                                \"src\": newSrc,\n                                                \"alt\": newAlt,\n                                                \"author\": newAuthor,\n                                                \"creditUrl\": newCreditUrl,\n                                                \"flickrId\": newphotoId\n                                            }\n\n                                            imageList.push(newLocation);\n\n                                            this.setState({ imageList: imageList })\n\n                                        }\n\n                                    }\n                                )\n                            }\n                        }\n\n\n                    }\n                )\n            }\n\n        )\n\n    }\n\n\n    render() {\n\n        let { title,\n            saves,\n            destination,\n            imageList,\n            subjects,\n            inTrips } = this.state;\n\n        if (!title) {\n            title = \"Untitled Location\"\n        }\n\n        if (!saves) {\n            saves = 0;\n        }\n\n        return (\n            <>\n                <div className=\"location\">\n                    <div className='dark-background mobile-header'>\n                        <div className={`container mobile-padding`}>\n                            <button onClick={() => { window.history.back() }} className={`secondary-button back-button`}>Back</button>\n                            <AddToTripsSmall added={inTrips} onClick={() => { this.manageTripsModal() }} />\n                        </div>\n\n                    </div>\n                    <div className={`container mobile-padding`}>\n\n                        {imageList && <PhotoSlider imageList={imageList} />}\n\n                        <h2 className={`title`}>{title}</h2>\n                        <div className={`gird-70-30`}>\n                            <div className={`col-70`}>\n                                <p className={`meta-data saved`}>Saved in: {saves} {(saves > 1 || saves < 1) ? 'trips' : 'trip'}</p>\n                                <p className={`meta-data marker`}>Coordinates: <a href={`https://maps.google.com/?q=${destination.latitude},${destination.longitude}`}>{destination.latitude}, {destination.longitude}</a></p>\n                            </div>\n                            <div className={`col-30`}>\n                                <ul className=\"actions\">\n                                    <li>\n                                        <DirectionsLarge latitude={destination.latitude} longitude={destination.longitude} />\n                                    </li>\n                                    <li>\n                                        <AddToTripsLarge data-micromodal-trigger=\"modal-1\" onClick={() => { this.manageTripsModal() }} added={inTrips} />\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n\n                        {subjects.length > 0 && <SubjectIndicators subjects={subjects} />}\n\n                    </div>\n\n\n                </div>\n                <ManageTripsModal\n                    isOpen={this.state.showTripsModal}\n                    handleClose={() => this.manageTripsModal()}\n                    locationId={this.state.locationId}\n                    photos={this.state.imageList}\n                    coordinates={this.state.destination}\n                    subjects={this.state.subjects}\n                    userId={this.state.userId}\n                    woeId={this.state.woeId}\n\n                />\n            </>\n\n        )\n\n    }\n}\n\n\nLocation.propTypes = {\n    userId: PropTypes.string\n}\n\n\nexport default Location;","\nconst EditTripLarge = ({added, ...rest}) => {\n\n    return (\n        <button className={`action-button edit`} {...rest}>\n            Edit Trip\n        </button>\n    )\n}\n\nconst EditTripSmall = ({added, ...rest}) => {\n\n    return (\n        <button className={`action-button-small edit`} {...rest}>\n            Edit Trip\n        </button>\n    )\n}\n\n\nexport {EditTripLarge,  EditTripSmall};","import React from 'react'\nimport Modal from './Modal'\nimport TexInput from '../forms/TextInput'\nimport SubmitButton from '../forms/SubmitButton'\nimport RadioButton from '../forms/RadioButton'\nimport firebase from '../../utils/firebase/firebaseConfig'\n\nclass EditTripModal extends React.Component {\n\n    state = {\n        errorUpdatingTrip: '',\n        errorUpdatingUserTrips: '',\n        tripNameError: '',\n        tripNameLength: 0,\n        tripName: '',\n        nameUpdated: false,\n        tripTags: '',\n        tagsUpdated: false,\n        tripTagsError: '',\n        tripPrivacy: this.props.originalTripPrivacy,\n        updatingTrip: false,\n        tripUpdate: false,\n        confirmDelete: false,\n        tripDeleted: false,\n        tagButtons: ''\n    }\n\n    _isMounted = false;\n\n\n\n\n    updateTrip(e) {\n        //update userTrips\n        //update trip\n        e.preventDefault();\n\n\n        if (!this.state.errorUpdatingTrip &&\n            !this.state.errorUpdatingUserTrips &&\n            !this.state.tripNameError &&\n            !this.state.tripTagsError\n        ) {\n\n            this.setState({ updatingTrip: true })\n            let database = firebase.database()\n            let userId = this.props.userId;\n            let tripId = this.props.tripId;\n            let originalPrivacy = this.props.originalTripPrivacy;\n\n\n            let tripRef = `${originalPrivacy}Trips/${tripId}`\n            let userTripRef = `userTrips/${userId}/${tripId}`\n\n            let newPrivacy = this.state.tripPrivacy\n            let tripUpdate = {}\n\n\n            if (this.state.tripName && (this.state.tripName !== this.props.originalTripName)) {\n                tripUpdate[\"tripName\"] = this.state.tripName\n            }\n\n            //this gets buggy when I update tags plus it's not refreshing the update...\n            if (this.state.tripTags !== this.props.originalTripTags) {\n                tripUpdate[\"tags\"] = this.state.tripTags\n            }\n\n            //update trip name and tags\n            if (tripUpdate || newPrivacy) {\n                database.ref(`${tripRef}`).update(tripUpdate).catch(error => {\n                    this.setState({ errorUpdatingTrip: error })\n                }).then(() => {\n                    if (this.state.tripPrivacy) {\n                        let userTripsUpdate = {\n                            tripPrivacy: newPrivacy\n                        }\n                        //update userTrips\n                        database.ref(`${userTripRef}`).update(userTripsUpdate).catch(error => {\n                            this.setState({ errorUpdatingUserTrips: error })\n                        })\n\n                        //get trip from current spot and store it\n                        let tripData;\n                        database.ref(`${tripRef}`).get().then(\n                            (snapshot) => {\n                                tripData = snapshot.val()\n\n                            }\n                        ).catch(error => {\n                            this.setState({ errorUpdatingUserTrips: `When getting original privacy setting ${error}` })\n                        }).then(() => {\n                            //delete trip from current spot\n                            database.ref(`${tripRef}`).remove().catch(error => {\n                                this.setState({ errorUpdatingUserTrips: `When deleting original privacy setting ${error}` })\n                            })\n                        }).then(() => {\n                            //add trip under new privacy\n                            let tripRef = `${newPrivacy}Trips/${tripId}`\n                            database.ref(`${tripRef}`).set(\n                                tripData\n                            ).catch(error => {\n                                this.setState({ errorUpdatingUserTrips: `When setting new privacy setting ${error}` })\n                            })\n                        }).then(() =>\n                            //inidicate update finished\n                            this.setState({ updatingTrip: false, tripUpdate: true }))\n                    } else {\n                        //if privacy was not changed, simply indicate update done\n                        this.setState({ updatingTrip: false, tripUpdate: true })\n                    }\n                })\n\n            }\n\n        }\n\n\n    }\n\n    tripDeleted() {\n        return (\n            <div className=\"modal-content-padding center-text\">\n                <h3 className=\"h5-font center-text\">\n                    This trip has been deleted.\n                </h3>\n            </div>\n        )\n\n    }\n\n    tripUpdated() {\n        return (\n            <div className=\"modal-content-padding center-text\">\n                <h3 className=\"h5-font center-text\">\n                    Trip information updated.\n                </h3>\n            </div>\n        )\n\n    }\n\n    renderDatabaseErrors() {\n        if (\n            this.state.errorUpdatingUserTrips ||\n            this.state.errorUpdatingTrip\n        ) {\n            return (\n                <div className=\"error-font\" aria-live=\"polite\">\n                    <ul>\n                        {this.state.errorUpdatingTrip && <li>Issue updating trip: {this.state.errorUpdatingTrip}</li>}\n                        {this.state.errorUpdatingUserTrips && <li> Issue updating user trips: {this.state.errorUpdatingUserTrips}</li>}\n                    </ul>\n                </div>\n            )\n        }\n    }\n\n    deleteTrip() {\n        let database = firebase.database();\n        let userId = this.props.userId;\n        let tripId = this.props.tripId;\n        let originalPrivacy = this.props.originalTripPrivacy;\n        let tripRef = `${originalPrivacy}Trips/${tripId}`\n        let userTripRef = `userTrips/${userId}/${tripId}`\n\n        database.ref(`${tripRef}`).remove().catch(error => {\n            this.setState({ errorUpdatingTrips: `When deleting trip ${error}` })\n        }).then(\n            () => {\n                database.ref(`${userTripRef}`).remove().catch(error => {\n                    this.setState({ errorUpdatingUserTrips: `When deleting trip from user trips list: ${error}` })\n                })\n            }\n        ).then(\n            () => {\n                this.setState({ tripDeleted: true })\n            }\n        )\n\n    }\n\n    toggleDeleteFrom() {\n        this.setState({ confirmDelete: !this.state.confirmDelete })\n    }\n\n\n    componentDidUpdate(prevProps) {\n        if (this.props.originalTripPrivacy !== prevProps.originalTripPrivacy) {\n            this.setState({ tripPrivacy: this.props.originalTripPrivacy })\n        }\n\n    }\n\n    renderUpdateForm() {\n        let pathQuery = this.props.searchQuery;\n        let searchParams = new URLSearchParams(pathQuery);\n        let searchPrivacy = searchParams.get(\"privacy\")\n        let privacy = this.state.tripPrivacy ? this.state.tripPrivacy : searchPrivacy;\n\n        let defaultPrivate = privacy === 'private'\n        let defaultPublic = privacy === 'public'\n        let defaultShareable = privacy === 'shareable'\n\n        return (\n            <>\n                {this.renderDatabaseErrors()}\n\n                <form className=\"modal-content-padding\">\n                    <div className=\"form-component-wrapper\">\n                        <label htmlFor=\"trip-name\">Trip Name (Max 50 Characters)</label>\n                        <TexInput id=\"trip-name\"\n                            value={this.state.nameUpdated ? this.state.tripName : this.props.originalTripName}\n                            onChange={(e) => this.handleTripNamelInput(e)}\n                            required />\n                        {this.state.tripNameLength !== 0 && <p className=\"character-count\" aria-live=\"polite\">Characters left: {50 - this.state.tripNameLength}</p>}\n                        {this.state.tripNameError && <p className=\"error-font\" aria-live=\"polite\">{this.state.tripNameError}</p>}\n                    </div>\n\n                    <div className=\"form-component-wrapper\">\n                        <label htmlFor=\"trip-tags\">Tags (Comma separated)</label>\n                        <TexInput id=\"trip-tags\"\n                            value={this.state.tagsUpdated ? this.state.tripTags : this.props.originalTripTags}\n                            onChange={(e) => this.handleTripTagsInput(e)} />\n                        {this.state.tripTagsError && <p className=\"error-font\" aria-live=\"polite\">{this.state.tripTagsError}</p>}\n                    </div>\n\n                    <fieldset className=\"form-component-wrapper\">\n                        <legend>Visibility Settings</legend>\n\n                        <RadioButton\n                            defaultChecked={defaultPublic}\n                            onChange={(e) => this.handleTripPrivacy(e)}\n                            labelText=\"Public\"\n                            name=\"trip-privacy\"\n                            value=\"public\" />\n\n                        <label className=\"caption-font\" htmlFor=\"public\">Anyone can see</label>\n\n                        <RadioButton\n                            defaultChecked={defaultPrivate}\n                            onChange={(e) => this.handleTripPrivacy(e)}\n                            labelText=\"Private\"\n                            name=\"trip-privacy\"\n                            value=\"private\" />\n                        <label className=\"caption-font\" htmlFor=\"private\">Only you can see</label>\n\n                        <RadioButton\n                            defaultChecked={defaultShareable}\n                            onChange={(e) => this.handleTripPrivacy(e)}\n                            labelText=\"Shareable\"\n                            name=\"trip-privacy\"\n                            value=\"shareable\" />\n                        <label className=\"caption-font\" htmlFor=\"shareable\">Anyone with a link can see</label>\n\n                    </fieldset>\n\n                    <div className=\"form-component-wrapper\">\n                        <SubmitButton onClick={(e) => this.updateTrip(e)} value={`${this.state.updatingTrip ? 'Updating Trip...' : 'Update Trip'}`} />\n                    </div>\n\n                </form>\n\n                {\n                    <div className=\"modal-content-padding\">\n                        <button onClick={() => this.toggleDeleteFrom()} className=\"secondary-button delete-button\">Delete Trip</button>\n                        {this.state.confirmDelete && <div>\n                            <ul className=\"button-group\">\n                                <li><button onClick={() => this.deleteTrip()} className=\"default-button\">Delete</button></li>\n                                <li><button onClick={() => this.toggleDeleteFrom()} className=\"button-link\">Cancel</button></li>\n                            </ul>\n                        </div>}\n                    </div>\n                }\n            </>\n        )\n\n    }\n\n    handleTripNamelInput(e) {\n        e.preventDefault();\n        let value = e.target.value;\n        let valueLength = value.length;\n\n        this.setState({\n            nameUpdated: true,\n            tripName: e.target.value,\n            tripNameLength: valueLength,\n            tripNameError: \"\"\n        })\n        if(valueLength === 0) {\n            this.setState({\n                tripNameError: \"Your trip must have a name.\"\n            })\n        }\n        if (valueLength > 50) {\n            this.setState({\n                tripNameError: \"Your trip name is too long.\"\n            })\n        }\n    }\n\n    handleTripTagsInput(e) {\n        e.preventDefault();\n\n        this.setState({\n            tagsUpdated: true,\n            tripTags: e.target.value,\n            tripTagsError: \"\"\n        }, () => {\n            //check if tags have special characters other than comma\n            let testString = /^[a-zA-Z ,0-9]+$/;\n\n            if (this.state.tripTags && !testString.test(this.state.tripTags)) {\n                this.setState({\n                    tripTagsError: \"Tags may only contain letters, numbers, and commas\"\n                })\n            }\n        });\n\n    }\n\n    handleTripPrivacy(e) {\n        this.setState({ tripPrivacy: e.target.value })\n    }\n\n\n    renderModalContent() {\n        if (this.state.tripDeleted) {\n            return this.tripDeleted()\n        } else {\n            if (!this.state.tripUpdate ||\n                this.state.errorUpdatingTrip ||\n                this.state.errorUpdatingUserTrips ||\n                this.state.tripNameError ||\n                this.state.tripTagsError) {\n                return this.renderUpdateForm()\n            } else {\n                return this.tripUpdated()\n            }\n        }\n\n    }\n\n    closeModal() {\n\n        //if the trip was updated\n        //reset the state of the modal\n        //and tell the parent of the update\n        //else close the modal and indate that the update did not happen\n\n        let update = {}\n\n        if (!this.state.tripDeleted) {\n\n            if (this.state.tripUpdate) {\n\n                let originalPrivacy = this.props.originalTripPrivacy\n                let newPrivacy = this.state.tripPrivacy\n\n\n                if (newPrivacy && (newPrivacy !== originalPrivacy)) {\n                    update = {\n                        updated: true,\n                        newPrivacy: newPrivacy\n                    }\n                } else {\n                    update = {\n                        updated: true\n                    }\n                }\n\n            } else {\n                update = { updated: false }\n            }\n\n            this.setState({ tripUpdate: false, nameUpdated: false, tagsUpdated: false },\n                () => this.props.handleClose(update))\n\n        } else {\n            update = { updated: true, deleted: true }\n            this.props.handleClose(update)\n        }\n\n    }\n\n\n    render() {\n        return (\n\n            <Modal\n                modalId='edit-trip-modal'\n                modalTitle={'Update Trip'}\n                isOpen={this.props.isOpen}\n                handleClose={() => this.closeModal()}\n            >\n                {this.renderModalContent()}\n            </Modal>\n\n\n        )\n    }\n\n}\n\nexport default EditTripModal;\n","import React from 'react'\nimport MapWithCards from '../../components/layout/MapWithCards'\nimport ResultsList from '../../components/content/ResultsList'\nimport firebase from '../../utils/firebase/firebaseConfig'\nimport { EditTripLarge, EditTripSmall } from '../../components/buttons/EditTripButtons'\nimport EditTripModal from '../../components/modals/EditTripModal'\nclass TripContent extends React.Component {\n    state = {\n        loaded: false,\n        tripList: [],\n        tripName: '',\n        tripTags: '',\n        locationsCount: 0,\n        mapLat: null,\n        mapLon: null,\n        mapZoom: 10,\n        showModal: false,\n        tripPrivacy: null,\n        author: ''\n    }\n    _isMounted = false;\n\n    tripId = this.getTripId()\n\n    getPrivacy () {\n        let pathQuery = this.props.location.search;\n        let searchParams = new URLSearchParams(pathQuery);\n        let privacy = searchParams.get(\"privacy\");\n        return privacy;\n    }\n\n    getTripId() {\n        let pathname = this.props.location.pathname;\n        let tripId = pathname.replace(\"/trip/\", \"\");\n        return tripId;\n    }\n\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        let privacy = this.getPrivacy()\n\n        this.setState({tripPrivacy: privacy}, () =>  {\n            this._isMounted && this.getTripDetails(this.state.tripPrivacy, this.tripId);\n        }   \n        )\n\n        \n    }\n\n    getTripDetails(privacy, tripId) {\n        let database = firebase.database();\n\n        let tripName, locationsCount, tripTags, author;\n        let list = []\n        let tripRef = `${privacy}Trips/${tripId}`\n        \n        database.ref(`${tripRef}`).get().then(\n            snapshot => {\n                let tripData = snapshot.val()\n                tripName = tripData['tripName']\n                tripTags = tripData['tags']\n                author = tripData['author']\n                locationsCount = tripData['locationsCount']\n                this.setState({\n                    tripName: tripName,\n                    locationsCount: locationsCount,\n                    tripTags: tripTags,\n                    author: author\n                })\n                let locations = tripData['locations']\n\n\n\n                for (const locationId in locations) {\n\n\n                    let location, src, woeId, url, title, lat, lon, locationRef, photoId;\n                    if (locationId.startsWith(\"flickr-\")) {\n                        src = \"flickr\"\n                        locationRef = `appLocations/flickrSourced/${locationId}`\n                        photoId = locationId.replace(\"flickr-\", \"\");\n                    }\n\n\n                    database.ref(`${locationRef}`).get().then(\n                        (snapshot) => {\n                            let locationData = snapshot.val()\n                            if (locationData) {\n                                let photos = locationData[\"photos\"]\n                                let firstPhoto = photos[Object.keys(photos)[0]]\n                                let coordinates = locationData[\"coordinates\"]\n                                woeId = locationData['woeId']\n                                url = firstPhoto[\"src\"]\n                                title = locationData[\"locationName\"]\n                                lat = coordinates[\"latitude\"]\n                                lon = coordinates[\"longitude\"]\n                            }\n\n                            location = {\n                                \"src\": src,\n                                \"locationId\": photoId,\n                                \"woeId\": woeId,\n                                \"thumbnail\": url,\n                                \"title\": title,\n                                \"destination\": {\n                                    \"latitude\": parseFloat(lat),\n                                    \"longitude\": parseFloat(lon)\n                                }\n                            }\n\n                        }\n                    ).then(() => list.push(location)).catch(error => console.log(\"issue getting location info\", error)).then(\n                        () => {\n\n                            let firstLocation = list[0]\n                            let coordinates = firstLocation[\"destination\"]\n                            let lon = coordinates[\"longitude\"]\n                            let lat = coordinates[\"latitude\"]\n\n                            let update = {\n                                tripList: list,\n                                loaded: true,\n                                mapLat: lat,\n                                mapLon: lon\n                            }\n\n\n                            this.setState(update)\n                        }\n                    )\n                }\n            }\n        ).catch(error => console.log(error))\n\n    }\n\n    openModal(){\n        let privacy = this.getPrivacy()\n        this.setState({ tripPrivacy: privacy},\n            () => this.setState({showModal: true})) \n    }\n\n    closeModal(update) {\n        let updated = update['updated']\n        let deleted = update['deleted']\n\n        if(updated) {\n            if(deleted) {\n                this.setState({ showModal: !this.state.showModal },\n                    ()=> {\n                        this.props.history.push('/trips')\n                    })\n\n            } else {\n                let newPrivacy = update['newPrivacy']\n\n                if(newPrivacy && (this.state.tripPrivacy !== newPrivacy)) {\n                    this.props.history.push({\n                        search: `?privacy=${newPrivacy}`\n                      })\n    \n                    this.setState({tripPrivacy: newPrivacy})\n                    this._isMounted && this.getTripDetails(newPrivacy, this.tripId);\n                } else {\n                    this._isMounted && this.getTripDetails(this.state.tripPrivacy, this.tripId);\n                } \n            }\n\n        } \n        this.setState({ showModal: !this.state.showModal })\n        \n    }\n\n\n    render() {\n        let {\n            loaded,\n            tripList,\n            mapLat,\n            mapLon,\n            mapZoom,\n            locationsCount,\n            tripName,\n            tripTags,\n            tripPrivacy,\n            author } = this.state;\n\n\n        return (\n            <>\n                <div className={`trip`}>\n            \n                    <MapWithCards\n                        mapLoctaions={tripList}\n                        mapLat={mapLat}\n                        mapLon={mapLon}\n                        mapZoom={mapZoom}\n                    >\n                        <div className='dark-background mobile-header'>\n                            <div className={`container mobile-padding`}>\n                                <button onClick={() => { window.history.back() }} className={`secondary-button back-button`}>Back</button>\n                                {this.props.userId === author &&  <EditTripSmall onClick={()=>this.openModal()} />}\n                            </div>\n                        </div>\n\n                        <div className={`gird-70-30`}>\n                            <div className={`col-70`}>\n                                <div className={`container mobile-padding`}>\n                                    <h2 className=\"h6-font\">{tripName}</h2>\n                                    <p className={`meta-data ${tripPrivacy ==='public' ? 'public' : 'private'}`}>{tripPrivacy}</p>\n                                    <p className={`meta-data marker`}>{locationsCount} {locationsCount === 1 ? 'Location' : 'Locations'}</p>\n                                    <p className={`meta-data tags`}>Tags: {tripTags}</p>\n                                </div>\n                            </div>\n                            <div className={`col-30`}>\n                                <ul className=\"actions\">\n                                    {this.props.userId === author && <li>\n                                        <EditTripLarge onClick={()=>this.openModal()} />\n                                    </li>}\n                                </ul>\n                            </div>\n                        </div>\n                        <div className={`container`}>\n                            <ResultsList loaded={loaded} list={tripList} />\n                        </div>\n\n                    </MapWithCards>\n                    <EditTripModal\n                        isOpen={this.state.showModal}\n                        handleClose={(update) => this.closeModal(update)}\n                        originalTripName={tripName}\n                        originalTripTags={tripTags}\n                        originalTripPrivacy={tripPrivacy}\n                        userId={this.props.userId}\n                        tripId={this.tripId}\n                        searchQuery={this.props.location.search}\n                    />\n                </div>\n            </>\n        )\n    }\n}\n\nexport default TripContent;","import { Switch, Route } from 'react-router-dom';\nimport React from 'react';\nimport firebase from './utils/firebase/firebaseConfig'\n\nimport Navbar from './components/navigation/Navbar';\nimport Home from './screens/explore/Home';\nimport SearchResults from './screens/explore/SearchResults';\nimport Account from './screens/Account';\nimport Trips from './screens/trips/Trips';\nimport PrivateRoute from './components/navigation/PrivateRoute';\nimport Footer from './components/content/Footer';\nimport Location from './screens/location/Location';\nimport TripContent from './screens/trips/TripContent';\nimport './styles/main.scss';\n\n\nclass App extends React.Component {\n\n  state = {\n    signedIn: false,\n    userVerified: false,\n    userId: null\n\n  }\n\n\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n\n\n      if (user) {\n        this.setState({\n          signedIn: true,\n          userVerified: user.emailVerified,\n          userId: user.uid\n        });\n      } else {\n        this.setState({ signedIn: false });\n      }\n    });\n  };\n\n\n  render() {\n\n    let { signedIn, userVerified } = this.state;\n\n    return (\n      <>\n\n        <Navbar />\n        <main>\n\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n\n            <Route path=\"/explore\" component={SearchResults} />\n\n            <Route path=\"/location\"\n\n              render={\n                (props) => <Location {...props} userId={this.state.userId} />\n\n              } />\n\n            <Route path=\"/trips\"\n\n              render={\n                (props) => <Trips {...props} userId={this.state.userId} isAuthenticated={signedIn} isVerified={userVerified} />\n\n              } />\n\n            <Route path=\"/trip\"\n\n              render={\n                (props) => <TripContent {...props} userId={this.state.userId} />\n\n              } />\n\n            <PrivateRoute path=\"/account\" component={Account} isAuthenticated={signedIn} isVerified={userVerified} logInLocation={\"account\"} />\n\n\n          </Switch>\n\n\n        </main>\n\n        <Footer />\n\n      </>\n    );\n  }\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\n\n\n\n\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n     <BrowserRouter>\n         <App />  \n    </BrowserRouter>    \n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}