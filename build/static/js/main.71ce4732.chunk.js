(this["webpackJsonpphoto-atlas-app"]=this["webpackJsonpphoto-atlas-app"]||[]).push([[0],{88:function(t,e,a){},89:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(1),s=a.n(r),i=a(26),c=a.n(i),o=a(15),l=a(3),u=a(6),d=a(7),h=a(9),p=a(8),j=a(12),m=a(34);a(60),a(62);m.a.initializeApp({apiKey:"AIzaSyDjoByCIo4qMsUdYyUID6Q_ptARktEZR00",authDomain:"photo-atlas-app-fb08d.firebaseapp.com",databaseURL:"https://photo-atlas-app-fb08d-default-rtdb.firebaseio.com/",projectId:"photo-atlas-app-fb08d",storageBucket:"photo-atlas-app-fb08d.appspot.com",messagingSenderId:"239109748869",appId:"1:239109748869:web:6a7059f212a31de5b311ec"});var b=m.a;var f=function(){var t=Object(j.f)().pathname,e=new RegExp("/trips/?"),a=new RegExp("/account/?"),r=new RegExp("/trip/?"),s=new RegExp("/location/?"),i=e.test(t),c=a.test(t),l=r.test(t),u=s.test(t),d=!i&&!c&&!l&&!u;return Object(n.jsx)("header",{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"logo",children:Object(n.jsxs)(o.b,{to:"/",children:[Object(n.jsx)("h1",{children:"Photo Atlas"}),Object(n.jsx)("img",{src:"data:image/png;base64,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",alt:"PhotoAtlas logo"})]})}),Object(n.jsx)("nav",{children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/",className:"explore ".concat(d?"active":"normal"),children:Object(n.jsx)("span",{children:"Explore"})})}),Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/trips",className:"trips ".concat(i?"active":"normal"),children:Object(n.jsx)("span",{children:"Trips"})})}),Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/account",className:"profile ".concat(c?"active":"normal"),children:Object(n.jsx)("span",{children:"Account"})})})]})})]})})},g=a(13),v=a.n(g),O=a(16),x=a(10);var y=function(t){var e=t.className,a=t.name,r=t.onClick,s=t.placeholder,i=t.backSearch,c=t.id,o=t.labelText,u=t.action,d=t.method,h=t.searchSuggestions,p=t.autoComplete,j=t.handleSuggestion,m=Object(x.a)(t,["className","name","onClick","placeholder","backSearch","id","labelText","action","method","searchSuggestions","autoComplete","handleSuggestion"]),b=i?"back-search":"standard-search";return Object(n.jsxs)(n.Fragment,{children:[o&&Object(n.jsx)("label",{className:"search-label ".concat(b,"-label"),htmlFor:c||"gsearch",children:o}),Object(n.jsxs)("div",{className:"search-bar-container ".concat(b," ").concat(e||""),children:[Object(n.jsx)("button",{onClick:function(){window.history.back()},className:"search-back-buttton",children:"Back"}),Object(n.jsxs)("form",{action:u,method:d,children:[Object(n.jsx)("input",Object(l.a)({type:"search",className:"text-bar",name:a||"q",id:c||"gsearch",placeholder:s||"Search Term",autoComplete:p||"off"},m)),h&&Object(n.jsx)("ul",{className:"search-suggestions",children:h[0]&&h.map((function(t,e){return Object(n.jsx)("li",{children:Object(n.jsx)("button",{tabIndex:"0",onClick:function(){return e={lat:t.y,lon:t.x,label:t.label},void(j&&j(e));var e},children:t.label})},e)}))}),Object(n.jsx)("button",{className:"search-button",onClick:r,children:"Search"})]})]})]})};var N=function(t){return Object(n.jsx)("div",{className:"grid-2_3",children:t.children})};var T=function(t){var e=t.thumbnail,a=t.title,r=t.src,s=t.locationId,i=t.woeId;a||(a="Unamed Location");var c=a.length;if(c>150){var l=150-c,u=a.slice(0,l),d=u.lastIndexOf(" ");u=u.slice(0,d),a="".concat(u,"...")}return Object(n.jsxs)(o.b,{className:"title-card",to:"/location/".concat(r,"-").concat(s,"?woe=").concat(i),children:[Object(n.jsx)("div",{className:"title-card-image",children:Object(n.jsx)("img",{src:e,alt:""})}),Object(n.jsx)("p",{className:"title",children:a})]})},k=a(31),w=a.n(k);function S(){var t,e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(e in t="https://api.flickr.com/services/rest/?api_key=".concat("8f4e32dfe64f3675be06e06d24bd62a1","&method=flickr.photos.search&format=json&nojsoncallback=true}"),a)a.hasOwnProperty(e)&&(t+="&"+e+"="+a[e]);return t}function C(){return(C=Object(O.a)(v.a.mark((function t(){var e,a,n,r=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},a=S(e),t.prev=2,t.next=5,w.a.get(a);case 5:return n=t.sent,t.abrupt("return",n.data);case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}var I=function(){return C.apply(this,arguments)};var A=function(t){var e=t.farm,a=t.server,n=t.id,r=t.secret;return"https://farm".concat(e,".staticflickr.com/").concat(a,"/").concat(n,"_").concat(r,".jpg")};function P(){return(P=Object(O.a)(v.a.mark((function t(){var e,a,n,r=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=r.length>0&&void 0!==r[0]?r[0]:{}).placeId){t.next=5;break}a="https://api.flickr.com/services/rest/?api_key=".concat("8f4e32dfe64f3675be06e06d24bd62a1","&method=flickr.places.getInfo&format=json&nojsoncallback=1}&place_id=").concat(e.placeId),t.next=10;break;case 5:if(!e.woeId){t.next=9;break}a="https://api.flickr.com/services/rest/?api_key=".concat("8f4e32dfe64f3675be06e06d24bd62a1","&method=flickr.places.getInfo&format=json&nojsoncallback=1}&woe_id=").concat(e.woeId),t.next=10;break;case 9:return t.abrupt("return");case 10:return t.prev=10,t.next=13,w.a.get(a);case 13:if(!(n=t.sent).data){t.next=17;break}if(!n.data.place.woe_name){t.next=17;break}return t.abrupt("return",n.data.place.woe_name);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(10),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[10,19]])})))).apply(this,arguments)}var E=function(){return P.apply(this,arguments)};var L=function(t,e){window.navigator.geolocation.getCurrentPosition((function(e){return t(e)}),(function(t){return e(t)}))},M=a(51);function F(){return(F=Object(O.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new M.a,t.prev=1,t.next=4,a.search({query:e});case 4:if(!(n=t.sent)){t.next=9;break}return t.abrupt("return",n);case 9:return t.abrupt("return",[]);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}var D=function(t){return F.apply(this,arguments)},U=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={query:"",currentLocation:null,errorMessage:"",noLocations:!1,locationResults:[],searchBarSuggestions:""},t._isMounted=!1,t.getNearbyLocations=function(){if(t.state.currentLocation){var e=t.state.currentLocation.latitude,a=t.state.currentLocation.longitude,n=[],r=[];I({lat:e,lon:a,accuracy:6,extras:"geo, tags"}).then((function(e){if(e){var a=e.photos.photo;a[0]?(a.forEach((function(t){var e=A(t),a=t.title,s=t.woeid,i=t.id,c=t.tags;if(s&&!n.includes(s)&&c){n.push(s);var o={src:"flickr",locationId:i,thumbnail:e,title:a,woeId:s};(function(){var t=Object(O.a)(v.a.mark((function t(e){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()({woeId:s}).then((function(t){t&&(o.title=t)})).then(r.push(o))}})),t.setState({locationResults:r,noLocations:!1})):t.setState({noLocations:!0})}}))}},t}return Object(d.a)(a,[{key:"handleSubmit",value:function(t){if(t.preventDefault(),this.state.searchBarSuggestions){var e=this.state.searchBarSuggestions[0];this.setState({query:e.label});var a="address=".concat(e.label,"&lat=").concat(e.y,"&lon=").concat(e.x);this.props.history.push("/explore/?q&".concat(a))}}},{key:"handleInput",value:function(t){var e=this;this.setState({query:t.target.value},(function(){e.state.query?D(e.state.query).then((function(t){return e.setState({searchBarSuggestions:t})})):e.setState({searchBarSuggestions:""})}))}},{key:"renderNearby",value:function(t){return this.state.errorMessage&&!this.state.currentLocation?(console.log("Error: ".concat(this.state.errorMessage)),Object(n.jsx)("p",{"aria-live":"polite",children:"Share your location to explore what's nearby."})):!this.state.errorMessage&&this.state.noLocations?Object(n.jsx)("p",{"aria-live":"polite",children:"Looks like there aren't any photo spots nearby yet. Let's explore a different location"}):!this.state.errorMessage&&this.state.currentLocation?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{"aria-live":"polite",className:"sr-only",children:"Showing nearby locations"}),Object(n.jsx)(N,{children:t.map((function(t,e){var a=t.thumbnail,r=t.title,s=t.src,i=t.locationId,c=t.woeId;return Object(n.jsx)(T,{thumbnail:a,title:r,src:s,locationId:i,woeId:c},e)}))})]}):Object(n.jsx)("p",{children:"Getting nearby photo spots..."})}},{key:"suggestionClick",value:function(t,e){this.setState({query:t.label});var a="address=".concat(t.label,"&lat=").concat(t.lat,"&lon=").concat(t.lon);this.props.history.push("/explore/?q&".concat(a))}},{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,L((function(e){return t._isMounted&&t.setState({currentLocation:e.coords},(function(){t.getNearbyLocations()}))}),(function(e){return t._isMounted&&t.setState({errorMessage:e.message})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this,e=this.state,a=e.query,r=e.locationResults,s=e.searchBarSuggestions;return Object(n.jsxs)("div",{className:"home",children:[Object(n.jsx)("div",{className:"background-image",children:Object(n.jsxs)("div",{className:"container mobile-padding",children:[Object(n.jsx)("p",{className:"home-heading",children:"Photo Atlas"}),Object(n.jsx)("h2",{className:"h5-font",children:"Find new places to capture your best work."}),Object(n.jsx)(y,{method:"get",value:a,onChange:function(e){t.handleInput(e)},labelText:"Where do you want to go?",placeholder:"Search a place",onClick:function(e){return t.handleSubmit(e)},searchSuggestions:s,handleSuggestion:function(e,a){t.suggestionClick(e)}})]})}),Object(n.jsxs)("div",{className:"container mobile-padding",children:[Object(n.jsx)("h2",{className:"h5-font",children:"Explore Nearby"}),this.renderNearby(r)]})]})}}]),a}(s.a.Component),R=a(93),B=a(95),q=a(94),Z=a(91);var W=function(t){var e=t.thumbnail,a=t.title,r=t.src,s=t.locationId,i=t.woeId;a||(a="Unamed Location");var c=a.length;if(c>150){var l=150-c,u=a.slice(0,l),d=u.lastIndexOf(" ");u=u.slice(0,d),a="".concat(u,"...")}return Object(n.jsx)(Z.a,{children:Object(n.jsxs)("div",{className:"map-popup",children:[Object(n.jsx)("div",{className:"location-popup-image",children:Object(n.jsx)("img",{src:e,alt:""})}),Object(n.jsx)(o.b,{to:"/location/".concat(r,"-").concat(s,"?woe=").concat(i),className:"title",children:a})]})})},z=(a(87),a(11)),G=a.n(z),H=a(23),X=a.n(H),Y=a(92);function Q(t){var e=t.center,a=t.zoom;return Object(Y.a)().setView(e,a),null}Q.propTypes={center:X.a.arrayOf(X.a.number),zoom:X.a.number};var V=Q,J=a(52),K=a(53),_=G.a.icon({iconUrl:J.a,shadowUrl:K.a});G.a.Marker.prototype.options.icon=_;var $=function(t){var e=t.locations,a=t.lat,r=t.lon,s=t.zoom;e||(e=[]),a&&r||(a=34.36,r=-20.58);var i=[a,r];return Object(n.jsxs)(R.a,{center:i,zoom:10,children:[Object(n.jsx)(V,{center:i,zoom:s}),Object(n.jsx)(B.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.map((function(t,e){var a=t.thumbnail,r=t.title,s=t.destination,i=t.locationId,c=t.src,o=t.woeId,l=s.latitude,u=s.longitude;return Object(n.jsx)(q.a,{position:[l,u],children:Object(n.jsx)(W,{thumbnail:a,title:r,locationId:i,src:c,woeId:o})},e)}))]})},tt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={openedMap:!0},t.handleToggle=function(){t.setState({openedMap:!t.state.openedMap})},t}return Object(d.a)(a,[{key:"render",value:function(){var t=this.props,e=t.children,a=t.mapLoctaions,r=t.mapLat,s=t.mapLon,i=t.mapZoom,c=this.state.openedMap,o=this.handleToggle,l=c?"open":"close";return Object(n.jsxs)("div",{className:"grid-map",children:[Object(n.jsx)("div",{className:"cards-container ".concat(l),children:e}),Object(n.jsxs)("div",{className:"map-container ".concat(l),children:[Object(n.jsx)("div",{className:"toggle-bar",onClick:o.bind(this),children:Object(n.jsx)("p",{children:c?"Hide Map":"Show Map"})}),Object(n.jsx)("div",{className:"map",children:Object(n.jsx)($,{locations:a,lat:r,lon:s,zoom:i})})]})]})}}]),a}(s.a.Component);var et=function(t){return Object(n.jsx)("div",{className:"grid-2",children:t.children})};var at=function(t){var e=t.loaded,a=t.list,r=t.needLocation,s=a.length;return e?e&&s>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{"aria-live":"polite",className:"sr-only",children:Object(n.jsx)("p",{children:"Showing search results"})}),Object(n.jsx)(et,{children:a.map((function(t,e){var a=t.thumbnail,r=t.title,s=t.src,i=t.locationId,c=t.woeId;return Object(n.jsx)(T,{thumbnail:a,title:r,src:s,locationId:i,woeId:c},e)}))})]}):e&&r&&0===s?Object(n.jsx)("p",{"aria-live":"polite",children:"Share your location to explore what's nearby."}):e&&0===s&&!r?Object(n.jsx)("p",{"aria-live":"polite",children:"Sorry, no photo spots here yet."}):void 0:Object(n.jsx)("p",{children:"Getting Locations..."})};var nt=function(t){var e=t.className,a=t.id,r=t.name,s=t.labelText,i=Object(x.a)(t,["className","id","name","labelText"]);return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("label",{className:"check-container ".concat(e||""),htmlFor:r,children:[s||"label",Object(n.jsx)("input",Object(l.a)({type:"checkbox",className:"".concat(e),id:a||r,name:r},i)),Object(n.jsx)("span",{className:"checkmark"})]})})};var rt=function(t){var e=t.className,a=t.value,r=Object(x.a)(t,["className","value"]);return Object(n.jsx)("input",Object(l.a)({type:"submit",className:"".concat(e||"default-button"),value:a||"Submit"},r))},st={abandonedTags:"abandoned, ruins, ghost",architectureTags:"architecture",astroTags:"astrophotography, stars, moon",landscapeTags:"landscape, mountains, outdoors",sunriseTags:"sunrise",sunsetTags:"sunset",transportTags:"transport, train, bus, boat, airplane, airport, transit",peopleTags:"people, portrait",urbanTags:"urban, cityscape, skyline, city",waterTags:"water, lake, river, ocean, waterfall, pond, reservoir, esplanade, sea",natureTags:"trees, flower, nature, foliage, leaves, grass, animals, forest, garden, park",streetArtTags:"graffiti, mural, sreet art"},it=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={open:!1,filters:{abandoned:!1,architecture:!1,astro:!1,landscape:!1,sunrise:!1,sunset:!1,transport:!1,people:!1,urban:!1,water:!1,nature:!1,streetArt:!1},formChanged:!1,previousFilters:[]},t}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){this.props.resetFilters!==t.resetFilters&&this.props.resetFilters&&this.setState({filters:{abandoned:!1,architecture:!1,astro:!1,landscape:!1,sunrise:!1,sunset:!1,transport:!1,people:!1,urban:!1,water:!1,nature:!1,streetArt:!1}})}},{key:"toggleDropdown",value:function(){this.setState({open:!this.state.open})}},{key:"closeDropdown",value:function(){this.state.formChanged&&this.state.previousFilters&&this.setState({filters:this.state.previousFilters}),this.setState({open:!1,formChanged:!1})}},{key:"sendData",value:function(t){t.preventDefault();var e=this.state.filters,a=e.abandoned,n=e.architecture,r=e.astro,s=e.landscape,i=e.sunrise,c=e.sunset,o=e.transport,l=e.people,u=e.urban,d=e.water,h=e.nature,p=e.streetArt,j="",m=[];return[!!a&&st.abandonedTags,!!n&&st.architectureTags,!!r&&st.astroTags,!!s&&st.landscapeTags,!!i&&st.sunriseTags,!!c&&st.sunsetTags,!!o&&st.transportTags,!!l&&st.peopleTags,!!u&&st.urbanTags,!!d&&st.urbanTags,!!h&&st.natureTags,!!p&&st.streetArtTags].forEach((function(t){t&&m.push(t)})),m.forEach((function(t,e){j=0===e?j.concat(t):j.concat(", ".concat(t))})),this.setState({open:!this.state.open,formChanged:!1,previousFilters:this.state.filters}),this.props.handleSubmit(j)}},{key:"handleChange",value:function(t){switch(t.target.name){case"abandoned":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{abandoned:t.target.checked})}}));break;case"architecture":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{architecture:t.target.checked})}}));break;case"astro":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{astro:t.target.checked})}}));break;case"landscape":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{landscape:t.target.checked})}}));break;case"sunrise":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{sunrise:t.target.checked})}}));break;case"sunset":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{sunset:t.target.checked})}}));break;case"transport":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{transport:t.target.checked})}}));break;case"people":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{people:t.target.checked})}}));break;case"urban":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{urban:t.target.checked})}}));break;case"water":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{water:t.target.checked})}}));break;case"nature":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{nature:t.target.checked})}}));break;case"street-art":this.setState((function(e){return{filters:Object(l.a)(Object(l.a)({},e.filters),{},{streetArt:t.target.checked})}}));break;default:console.log("filter does not exist")}}},{key:"render",value:function(){var t=this,e=this.state.open,a=this.state.filters,r=a.abandoned,s=a.architecture,i=a.astro,c=a.landscape,o=a.sunrise,l=a.sunset,u=a.transport,d=a.people,h=a.urban,p=a.water,j=a.nature,m=a.streetArt;return Object(n.jsxs)("span",{className:"search-filter-container ".concat(e?"open":"closed"),children:[Object(n.jsx)("button",{className:"search-filter",onClick:function(e){t.toggleDropdown()},children:"Filter by Subject"}),Object(n.jsxs)("div",{className:"search-filter-dropdown",children:[Object(n.jsx)("button",{className:"close-button",onClick:function(){return t.closeDropdown()},children:"Close"}),Object(n.jsxs)("form",{onChange:function(){t.setState({formChanged:!0})},children:[Object(n.jsx)(nt,{name:"abandoned",checked:r,labelText:"Abandoned",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"architecture",checked:s,labelText:"Architecture",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"astro",checked:i,labelText:"Astrophotography",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"landscape",checked:c,labelText:"Landscape",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"nature",checked:j,labelText:"Nature",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"street-art",checked:m,labelText:"Street Art",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"sunrise",checked:o,labelText:"Sunrise",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"sunset",checked:l,labelText:"Sunset",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"transport",checked:u,labelText:"Transport",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"people",checked:d,labelText:"People",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"urban",checked:h,labelText:"Urban",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(nt,{name:"water",checked:p,labelText:"Water",onChange:function(e){t.handleChange(e)}}),Object(n.jsx)(rt,{onClick:function(e){t.sendData(e)},value:"Apply Filters"})]})]})]})}}]),a}(s.a.Component),ct=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={query:"",loaded:!1,searchResults:[],mapLat:null,mapLon:null,mapZoom:10},t._isMounted=!1,t.getSearchResults=function(e,a,n){var r=e,s=a,i={lat:r,lon:s,extras:"geo, tags",accuracy:6};n&&(i.tags=n);var c=[],o=[];I(i).then((function(e){var a;if(e&&(a=e.photos),!a)return t.setState({loaded:!0});(a=a.photo).forEach((function(t){var e=A(t),a=t.title,n=t.latitude,r=t.longitude,s=t.woeid,i=t.id,l=t.tags;if(s&&!c.includes(s)&&l){c.push(s);var u={src:"flickr",locationId:i,woeId:s,thumbnail:e,title:a,destination:{latitude:parseFloat(n),longitude:parseFloat(r)}};(function(){var t=Object(O.a)(v.a.mark((function t(e){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()({woeId:s}).then((function(t){t&&(u.title=t)})).then(o.push(u))}})),t.setState({searchResults:o,loaded:!0,mapLat:parseFloat(r),mapLon:parseFloat(s),mapZoom:10,resetFilters:!1})}))},t}return Object(d.a)(a,[{key:"handleInput",value:function(t){var e=this;this.setState({query:t.target.value},(function(){e.state.query?D(e.state.query).then((function(t){return e.setState({searchBarSuggestions:t})})):e.setState({searchBarSuggestions:""})}))}},{key:"handleSubmit",value:function(t){var e=this;if(t.preventDefault(),this.setState({searchResults:[],loaded:!1,needLocation:!1,resetFilters:!0}),this.state.searchBarSuggestions||this.state.query){var a;this.setState({resetFilters:!0}),a=this.state.searchBarSuggestions?this.state.searchBarSuggestions[0]:{label:this.state.query,y:this.state.mapLat,x:this.state.mapLon},this.setState({query:a.label,searchBarSuggestions:""});var n=a.label,r=a.y,s=a.x,i="address=".concat(n,"&lat=").concat(r,"&lon=").concat(s);this.props.history.push("/explore/?q=&".concat(i)),L((function(t){return e.setState({currentLocation:t.coords},(function(){return e.getSearchResults(r,s)}))}))}else this.setState({loaded:!0,mapZoom:1.5,resetFilters:!1})}},{key:"findNearby",value:function(){var t=this;this.setState({searchResults:[],loaded:!1,query:"Current Location"}),this.props.history.push("/explore/"),L((function(e){return t.setState({currentLocation:e.coords},(function(){var e=t.state.currentLocation.latitude,a=t.state.currentLocation.longitude;t.getSearchResults(e,a)}))}),(function(){return t.setState({loaded:!0,needLocation:!0,mapZoom:1.5})}))}},{key:"suggestionClick",value:function(t){var e=this;this.setState({searchResults:[],loaded:!1,needLocation:!1,query:t.label,searchBarSuggestions:"",resetFilters:!0});var a="address=".concat(t.label,"&lat=").concat(t.lat,"&lon=").concat(t.lon);if(this.props.history.push("/explore/?q=&".concat(a)),t.lat&&t.lon){var n=t.lat,r=t.lon;L((function(t){return e.setState({currentLocation:t.coords},(function(){return e.getSearchResults(n,r)}))}))}else this.setState({loaded:!0,mapZoom:1.5,resetFilters:!1})}},{key:"handleFilters",value:function(t){var e=this;if(this.setState({searchResults:[],loaded:!1,needLocation:!1}),this.state.searchBarSuggestions||this.state.query){var a={label:this.state.query,y:this.state.mapLat,x:this.state.mapLon},n=a.y,r=a.x,s="address=".concat(a.label,"&lat=").concat(n,"&lon=").concat(r);this.props.history.push("/explore/?q=&".concat(s)),L((function(a){return e.setState({currentLocation:a.coords},(function(){return e.getSearchResults(n,r,t)}))}))}else this.setState({loaded:!0,mapZoom:1.5})}},{key:"componentDidMount",value:function(){var t=this,e=decodeURIComponent(this.props.location.search),a=new URLSearchParams(e);if(this._isMounted=!0,a.has("lon")&&a.has("lat")){var n=a.get("address"),r=a.get("lat"),s=a.get("lon");this._isMounted&&this.setState({query:n}),L((function(e){return t._isMounted&&t.setState({currentLocation:e.coords},t.getSearchResults(r,s))}),(function(){return t.getSearchResults(r,s)}))}else this._isMounted&&this.setState({loaded:!0,mapZoom:1.5})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this,e=this.state,a=e.query,r=e.searchResults,s=e.loaded,i=e.mapLat,c=e.mapLon,o=e.mapZoom,l=e.needLocation,u=e.searchBarSuggestions;return Object(n.jsxs)("div",{className:"search",children:[Object(n.jsx)("div",{className:"dark-background",children:Object(n.jsxs)("div",{className:"container mobile-padding header-container",children:[Object(n.jsx)(y,{labelText:"Location",backSearch:!0,placeholder:"Search a place",value:a,onChange:function(e){t.handleInput(e)},onClick:function(e){return t.handleSubmit(e)},searchSuggestions:u,handleSuggestion:function(e){t.suggestionClick(e)}}),Object(n.jsx)(it,{handleSubmit:function(e){return t.handleFilters(e)},resetFilters:this.state.resetFilters}),Object(n.jsx)("button",{className:"search-filter",onClick:function(){t.findNearby()},children:"Spots Near Me"})]})}),Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(tt,{mapLoctaions:r,mapLat:i,mapLon:c,mapZoom:o,children:Object(n.jsx)(at,{loaded:s,list:r,needLocation:l})})})]})}}]),a}(s.a.Component);var ot=function(t){var e=t.modalId,a=t.modalTitle,r=t.modalDescription,s=t.isOpen,i=t.handleClose,c=t.children,o="".concat(e,"-title");function l(){i()}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"".concat(s?"open":"closed"," modal-overlay"),onClick:function(){return l()},tabIndex:"-1"}),Object(n.jsx)("div",{id:e,className:"".concat(s?"open":"closed"," modal-wrapper ").concat(e),children:Object(n.jsxs)("div",{className:"modal-body",role:"dialog","aria-modal":"true","aria-labelledby":"".concat(o),children:[Object(n.jsx)("button",{className:"close-button",onClick:function(){return l()},children:"Close"}),Object(n.jsxs)("div",{"aria-live":"polite",className:"modal-header",children:[Object(n.jsx)("h2",{id:"".concat(o),children:a}),Object(n.jsx)("h3",{children:r})]}),Object(n.jsx)("div",{className:"modal-main",children:c})]})})]})},lt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={error:"",successReset:!1},t._isMounted=!1,t}return Object(d.a)(a,[{key:"closeModal",value:function(){var t=this;this.setState({confirmReset:!1},(function(){return t.props.handleClose()}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"resetPassword",value:function(t){t.preventDefault();var e=b.auth(),a=this.props.email,n=this.props.logInLocation,r=this;r.setState({error:""});var s={url:"https://photoatlas.app/".concat(n)};this._isMounted&&e.sendPasswordResetEmail(a,s).then((function(){r.setState({successReset:!0})})).catch((function(t){r.setState({error:t.message,successReset:!1})}))}},{key:"render",value:function(){var t=this;return Object(n.jsx)(ot,{modalId:"reset-password-modal",modalTitle:"Reset Password",isOpen:this.props.isOpen,handleClose:function(){return t.closeModal()},children:Object(n.jsxs)("div",{className:"modal-content-padding center-text",children:[!this.state.error&&!this.state.successReset&&Object(n.jsx)("h3",{className:"h5-font",children:"Are you sure you want to reset your password?"}),this.state.error&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.state.error}),this.state.successReset&&Object(n.jsx)("p",{className:"success-font","aria-live":"polite",children:"Check your email to reset your password."}),Object(n.jsxs)("ul",{className:"button-group",children:[Object(n.jsx)("li",{children:Object(n.jsx)("button",{onClick:function(e){return t.resetPassword(e)},className:"default-button",children:"Reset Password"})}),Object(n.jsx)("li",{children:Object(n.jsx)("button",{onClick:function(){return t.closeModal()},className:"button-link",children:"Cancel"})})]})]})})}}]),a}(s.a.Component);var ut=function(t){var e=t.className,a=Object(x.a)(t,["className"]);return Object(n.jsx)("input",Object(l.a)({type:"text",className:"text-bar ".concat(e||"")},a))},dt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={error:"",newName:"",currentName:"",loading:!1},t}return Object(d.a)(a,[{key:"closeModal",value:function(){var t=this;this.setState({confirmReset:!1},(function(){return t.props.handleClose()}))}},{key:"handleInput",value:function(t){this.setState({newName:t.target.value})}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"updateUser",value:function(){if(this._isMounted){var t=b.auth().currentUser;t&&this.setState({currentName:t.displayName})}}},{key:"changeDisplayName",value:function(t){t.preventDefault();var e=this;e.setState({error:"",loading:!0});var a=b.auth().currentUser,n=this.state.newName;if(/^[a-zA-Z][ a-zA-Z \-' -]+$/.test(n)){var r=b.database(),s=a.uid;r.ref("users/".concat(s)).update({displayName:n}).catch((function(t){console.log(t)})).then((function(){e.props.triggerUpdate(),e.props.handleClose(),e.setState({loading:!1})})).catch((function(t){e.setState({error:t.message,loading:!1})}))}else e.setState({error:"Display can only contain letters, apostrophes, hypens and spaces."})}},{key:"render",value:function(){var t=this;return Object(n.jsx)(ot,{modalId:"reset-password-modal",modalTitle:"Change Display Name",isOpen:this.props.isOpen,handleClose:function(){return t.closeModal()},children:Object(n.jsxs)("div",{className:"modal-content-padding",children:[this.state.error&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.state.error}),Object(n.jsx)("label",{htmlFor:"new-name",children:"New Name"}),Object(n.jsx)(ut,{id:"new-name",value:this.state.newName?this.state.newName:this.state.currentName,onChange:function(e){return t.handleInput(e)}}),Object(n.jsx)("div",{"aria-live":"polite",children:Object(n.jsx)("button",{onClick:function(e){return t.changeDisplayName(e)},className:"default-button",children:this.state.loading?"Changing Name":"Change Display Name"})})]})})}}]),a}(s.a.Component),ht=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={displayName:"",email:"",successReset:!1,resetPassword:!1,changeName:!1},t._isMounted=!1,t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.updateUser()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"openPasswordModal",value:function(){this.setState({resetPassword:!0})}},{key:"closePasswordModal",value:function(){this.setState({resetPassword:!1})}},{key:"openDisplayNameModal",value:function(){this.setState({changeName:!0})}},{key:"closeDisplayNameModal",value:function(){this.setState({changeName:!1})}},{key:"updateUser",value:function(){var t=this;if(this._isMounted){var e=b.auth().currentUser,a=e.uid;if(a)b.database().ref("users/".concat(a)).get().then((function(a){if(a.exists()){var n=a.val().displayName,r=e.email;t.setState({displayName:n,email:r})}else console.log("No data available")})).catch((function(t){console.error(t)}))}}},{key:"render",value:function(){var t=this;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"container trips mobile-padding",children:[Object(n.jsx)("h2",{children:"Account Settings"}),Object(n.jsxs)("ul",{className:"settings-list",children:[Object(n.jsxs)("li",{"aria-live":"polite",children:["Display Name: ",this.state.displayName,Object(n.jsx)("button",{onClick:function(){return t.openDisplayNameModal()},className:"secondary-button",children:"Change Display Name"})]}),Object(n.jsx)("li",{children:Object(n.jsxs)("p",{children:["Email: ",this.state.email]})}),Object(n.jsxs)("li",{children:["Password: **** ",Object(n.jsx)("button",{onClick:function(){return t.openPasswordModal()},className:"secondary-button",children:"Reset Password"})]})]}),Object(n.jsx)("button",{className:"button-link",onClick:function(){b.auth().signOut()},children:"Sign Out"})]}),Object(n.jsx)(lt,{email:this.state.email,handleClose:function(){return t.closePasswordModal()},logInLocation:"account",isOpen:this.state.resetPassword}),Object(n.jsx)(dt,{handleClose:function(){return t.closeDisplayNameModal()},isOpen:this.state.changeName,triggerUpdate:function(){return t.updateUser()}})]})}}]),a}(s.a.Component);var pt=function(t){return Object(n.jsx)("div",{className:"grid-1_2",children:t.children})};var jt=function(t){var e=t.thumbnail,a=t.title,r=t.tripId,s=t.isPublic,i=t.isShared,c=t.locationsCount;return Object(n.jsxs)(o.b,{className:"trip-card",to:"/trip/".concat(r,"?privacy=").concat(s?"public":"private"),children:[Object(n.jsx)("div",{className:"trip-card-image",children:Object(n.jsx)("img",{src:e,alt:""})}),Object(n.jsxs)("div",{className:"trip-card-content",children:[Object(n.jsx)("p",{className:"title",children:a}),Object(n.jsx)("p",{className:"meta-data ".concat(s?"public":"private"),children:s?"Public":i?"Shared":"Private"}),Object(n.jsxs)("p",{className:"meta-data marker",children:[c," ",c>1||c<1?"Locations":"Location"]})]})]})},mt=function(t){var e=b.database(),a=[];e.ref("publicTrips").get().then((function(t){var e=t.val();for(var n in e){var r=e[n].tripName,s=e[n].locationsCount,i={tripId:n,thumbnail:e[n].featuredImg,title:r,locationsCount:s,isPublic:!0};a.push(i)}return a})).catch((function(t){return console.log(t)})).then((function(e){return t(e)}))},bt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={existingTrips:[],loading:!0},t._isMounted=!1,t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"renderPublicTrips",value:function(){var t=this,e=this.state,a=e.existingTrips,r=e.loading;return mt((function(e){t._isMounted&&t.setState({existingTrips:e,loading:!1})})),r?Object(n.jsx)("div",{"aria-live":"polite",children:Object(n.jsx)("p",{children:"Getting Trips..."})}):a.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{"aria-live":"polite",className:"sr-only",children:Object(n.jsx)("p",{children:"Showing all trips"})}),Object(n.jsx)(pt,{children:a.map((function(t,e){var a=t.thumbnail,r=t.title,s=t.locationsCount,i=t.isPublic,c=t.tripId;return Object(n.jsx)(jt,{thumbnail:a,title:r,tripId:c,isPublic:i,locationsCount:s},e)}))})]}):Object(n.jsx)("div",{"aria-live":"polite",children:Object(n.jsx)("p",{children:"No trips here yet."})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:this.renderPublicTrips()})}}]),a}(s.a.Component);var ft=function(t){var e=t.className,a=Object(x.a)(t,["className"]);return Object(n.jsx)("input",Object(l.a)({type:"email",className:"text-bar ".concat(e||"")},a))},gt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={type:"password"},t}return Object(d.a)(a,[{key:"changeType",value:function(){"password"===this.state.type?this.setState({type:"text"}):this.setState({type:"password"})}},{key:"render",value:function(){var t=this,e=this.props,a=e.className,r=e.checkName,s=Object(x.a)(e,["className","checkName"]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",Object(l.a)({type:this.state.type,className:"text-bar ".concat(a||"")},s)),Object(n.jsx)("br",{}),Object(n.jsx)(nt,{className:"show-pass",name:r||"show-pass",onChange:function(){t.changeType()},labelText:"Show password"})]})}}]),a}(s.a.Component),vt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={email:"",emailError:"",successReset:!1,forgotPassword:!1},t}return Object(d.a)(a,[{key:"handleEmailInput",value:function(t){this.setState({email:t.target.value})}},{key:"togglePasswordReset",value:function(t){t.preventDefault(),this.setState({forgotPassword:!this.state.forgotPassword})}},{key:"resetPassword",value:function(t){t.preventDefault();var e=b.auth(),a=this.state.email,n=this.props.logInLocation,r=this;r.setState({emailError:""});var s={url:"http://localhost:3000/".concat(n)};e.sendPasswordResetEmail(a,s).then((function(){r.setState({successReset:!0,forgotPassword:!1,email:""})})).catch((function(t){r.setState({emailError:t.message,forgotPassword:!0,successReset:!1})}))}},{key:"render",value:function(){var t=this;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"container mobile-padding",children:[Object(n.jsxs)("div",{className:this.props.hideTitle?"hidden":"visible",children:[this.props.tabContent?Object(n.jsx)("h3",{children:"Sign In"}):Object(n.jsx)("h2",{children:"Sign In"}),this.props.tabContent?Object(n.jsxs)("h4",{className:"h5-font",children:["Sign in to ",this.props.introtext,"."]}):Object(n.jsxs)("h3",{className:"h5-font",children:["Sign in to ",this.props.introtext,"."]})]}),Object(n.jsx)("p",{className:"".concat(this.state.successReset?"visible":"hidden"," success-font"),"aria-live":"polite",children:"Check your email to reset your password."}),Object(n.jsxs)("form",{className:this.state.forgotPassword?"hidden":"visible",action:"/",onSubmit:function(e){return t.props.handleSubmit(e)},children:[Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email"}),Object(n.jsx)(ft,{autoComplete:"username",id:"email",value:this.props.email,onChange:function(e){return t.props.handleEmailInput(e)},required:!0}),this.props.emailError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.props.emailError})]}),Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"pass",children:"Password"}),Object(n.jsx)(gt,{autoComplete:"current-password",id:"pass",value:this.props.password,onChange:function(e){return t.props.handlePassInput(e)},required:!0}),this.props.passError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.props.passError})]}),Object(n.jsx)("div",{className:"form-component-wrapper",children:Object(n.jsx)(rt,{value:"".concat(this.props.loading?"Signing In...":"Sign In")})})]}),Object(n.jsx)("div",{className:"".concat(this.state.forgotPassword?"hidden":"visible"," form-component-wrapper"),children:Object(n.jsx)("button",{onClick:function(e){t.togglePasswordReset(e)},className:"secondary-button forgot-pass",children:"Forgot password?"})}),Object(n.jsxs)("form",{className:this.state.forgotPassword?"visible":"hidden",action:"/",onSubmit:function(e){return t.resetPassword(e)},children:[Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"password-reset-email",children:"Email"}),Object(n.jsx)(ft,{id:"password-reset-email",value:this.state.email,onChange:function(e){return t.handleEmailInput(e)},required:!0}),this.state.emailError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.state.emailError})]}),Object(n.jsx)("div",{className:"form-component-wrapper",children:Object(n.jsx)(rt,{value:"Reset Password"})})]}),Object(n.jsx)("div",{className:"".concat(this.state.forgotPassword?"visible":"hidden"," form-component-wrapper"),children:Object(n.jsx)("button",{className:"button-link",onClick:function(e){t.togglePasswordReset(e)},children:"Sign In"})})]})})}}]),a}(s.a.Component);var Ot=function(t){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"container mobile-padding",children:[Object(n.jsxs)("div",{className:t.hideTitle?"hidden":"visible",children:[t.tabContent?Object(n.jsx)("h3",{children:"Sign Up"}):Object(n.jsx)("h2",{children:"Sign Up"}),t.tabContent?Object(n.jsxs)("h4",{className:"h5-font",children:["Create an account to ",t.introtext,"."]}):Object(n.jsxs)("h3",{className:"h5-font",children:["Create an account to ",t.introtext,"."]})]}),Object(n.jsxs)("form",{action:"/",onSubmit:function(e){return t.handleSubmit(e)},children:[Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"firstname",children:"Name"}),Object(n.jsx)(ut,{autoComplete:"name",id:"firstname",value:t.firstname,onChange:function(e){return t.handleNameInput(e)},required:!0}),t.nameError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:t.nameError})]}),Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsxs)("label",{htmlFor:"lastname",children:["Last Name ",Object(n.jsx)("span",{children:"(Optional)"})]}),Object(n.jsx)(ut,{autoComplete:"lastname",id:"lastname",value:t.lastname,onChange:function(e){return t.handleLastnameInput(e)}}),t.lastnameError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:t.lastnameError})]}),Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email"}),Object(n.jsx)(ft,{autoComplete:"username",id:"email",value:t.email,onChange:function(e){return t.handleEmailInput(e)},required:!0}),t.emailError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:t.emailError})]}),Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"pass",children:"Password (6 characters minimum)"}),Object(n.jsx)(gt,{autoComplete:"new-password",id:"pass",value:t.password,onChange:function(e){return t.handlePassInput(e)},required:!0}),t.passError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:t.passError})]}),Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"confirm-pass",children:"Confirm Password"}),Object(n.jsx)(gt,{autoComplete:"new-password",checkName:"show-confirm-pass",id:"confirm-pass",value:t.confirmPassword,onChange:function(e){return t.handleConfirmPassInput(e)},required:!0}),t.confirmPassError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:t.confirmPassError})]}),Object(n.jsx)("div",{className:"form-component-wrapper",children:Object(n.jsx)(rt,{value:"".concat(t.loading?"Creating Account...":"Create Account")})})]})]})})},xt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={newUser:!1,firstname:"",lastname:"",email:"",password:"",confirmPassword:"",emailError:"",passError:"",confirmPassError:"",nameError:"",lastnameError:"",loading:!1},t}return Object(d.a)(a,[{key:"handleSignIn",value:function(t){var e=this;t.preventDefault(),this.setState({emailError:"",passError:"",loading:!0});var a=this.state.email,n=this.state.password,r=this;b.auth().fetchSignInMethodsForEmail(a).then((function(t){-1!==t.indexOf(b.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?b.auth().signInWithEmailAndPassword(a,n).then((function(t){if(e.props.afterSignIn){var a=t.user;e.props.afterSignIn(a)}})).catch((function(t){var e=t.code,a=t.message;"auth/too-many-requests"===e?r.setState({passError:"Too many sign in attempts, reset password or try again later."}):"auth/wrong-password"===e?r.setState({passError:"Invalid password"}):r.setState({passError:a})})):e.setState({emailError:"Couldn't find an account with that email."})})),this.setState({loading:!1})}},{key:"handleCreateAccount",value:function(t){var e=this;t.preventDefault(),this.setState({confirmPassword:"",emailError:"",passError:"",confirmPassError:"",nameError:"",lastnameError:"",loading:!0});var a=this.state.email,n=this.state.password,r=this.state.confirmPassword,s=this.state.firstname,i=this.state.lastname,c=this;b.auth().fetchSignInMethodsForEmail(a).then((function(t){if(-1!==t.indexOf(b.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD))e.setState({emailError:"An account exist with that email."});else{var o=/^[a-zA-Z][ a-zA-Z \-' -]+$/;if(o.test(s)||c.setState({nameError:"Name can only contain letters, apostrophes, hypens and spaces."}),i&&(o.test(i)||c.setState({lastnameError:"Last name can only contain letters, apostrophes, hypens and spaces."})),1===s.length&&c.setState({nameError:"Name must be longer than one character."}),1===i.length&&c.setState({lastnameError:"Last name, if provided, must be longer than one character."}),n.length<6&&c.setState({passError:"Passowrd must be at least 6 characters long."}),n!==r&&c.setState({confirmPassError:"Passwords don't match"}),!e.state.emailError&&!e.state.confirmPassError&&!e.state.nameError&&!e.state.passError){var l=s;s&&i&&(l="".concat(s," ").concat(i)),b.auth().createUserWithEmailAndPassword(a,n).then((function(t){var a=t.user,n=a.uid,r={email:a.email,displayName:l};if(b.database().ref("users/".concat(n)).set(r).catch((function(t){console.log(t)})),e.props.afterCreateAccount){var s=t.user;e.props.afterCreateAccount(s)}})).catch((function(t){var a=t.code,n=t.message;"auth/email-already-in-use"===a&&e.setState({emailError:"An account exist with that email."}),"auth/invalid-email"===a&&e.setState({emailError:"Please use a valid email address"}),"auth/operation-not-allowed"===a&&e.setState({emailError:n}),"auth/weak-password"===a&&c.setState({passError:"Passowrd must be at least 6 characters long."})}))}}})),this.setState({loading:!1})}},{key:"handleEmailInput",value:function(t){this.setState({email:t.target.value})}},{key:"handlePassInput",value:function(t){this.setState({password:t.target.value})}},{key:"handleNameInput",value:function(t){this.setState({firstname:t.target.value})}},{key:"handleLastnameInput",value:function(t){this.setState({lastname:t.target.value})}},{key:"handleConfirmPassInput",value:function(t){this.setState({confirmPassword:t.target.value})}},{key:"changeUserType",value:function(){var t=this;this.setState({newUser:!this.state.newUser},(function(){t.props.changeUserOnParent&&t.props.changeUserOnParent(t.state.newUser)}))}},{key:"renderContent",value:function(t){var e,a=this,r=this.props.logInLocation;switch(r){case"trips":e="view your trips";break;case"add":e="add a location";break;case"account":e="view your account information";break;default:e="continue your PhotoAtlas journey"}return t?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Ot,{hideTitle:!!this.props.hideTitle,tabContent:this.props.tabContent,introtext:e,handleSubmit:function(t){return a.handleCreateAccount(t)},email:this.state.email,handleEmailInput:function(t){return a.handleEmailInput(t)},emailError:this.state.emailError,password:this.state.password,handlePassInput:function(t){return a.handlePassInput(t)},passError:this.state.passError,loading:this.state.loading,firstname:this.state.firstname,nameError:this.state.nameError,handleNameInput:function(t){return a.handleNameInput(t)},lastname:this.state.lastname,lastnameError:this.state.lastnameError,handleLastnameInput:function(t){return a.handleLastnameInput(t)},confirmPassword:this.state.confirmPassword,confirmPassError:this.state.confirmPassError,handleConfirmPassInput:function(t){return a.handleConfirmPassInput(t)}})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(vt,{hideTitle:!!this.props.hideTitle,tabContent:this.props.tabContent,introtext:e,handleSubmit:function(t){return a.handleSignIn(t)},email:this.state.email,handleEmailInput:function(t){return a.handleEmailInput(t)},emailError:this.state.emailError,password:this.state.password,handlePassInput:function(t){return a.handlePassInput(t)},passError:this.state.passError,loading:this.state.loading,logInLocation:r})})}},{key:"render",value:function(){var t=this,e=this.state.newUser;return Object(n.jsxs)(n.Fragment,{children:[this.renderContent(e),Object(n.jsx)("div",{className:"container mobile-padding",children:Object(n.jsx)("button",{className:"button-link",onClick:function(){return t.changeUserType()},children:e?"Sign In":"Create Account"})})]})}}]),a}(s.a.Component),yt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={error:null},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=b.auth().currentUser,e=this,a="https://photoatlas.app/";this.props.logInLocation&&(a="https://photoatlas.app/".concat(this.props.logInLocation));var n={url:"".concat(a)};t&&t.sendEmailVerification(n).catch((function(t){e.setState({error:"".concat(t)})}))}},{key:"renderContent",value:function(){return this.state.error?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"h4-font",children:"Sorry, there was a problem"}),Object(n.jsx)("p",{className:"error-font",children:this.state.error}),Object(n.jsx)("p",{children:"Please contact support at photoatlasapp@gmail.com."})]}):Object(n.jsxs)(n.Fragment,{children:[this.props.tabContent?Object(n.jsx)("h3",{className:"h4-font",children:"Just one more step"}):Object(n.jsx)("h2",{className:"h4-font",children:"Just one more step"}),Object(n.jsxs)("p",{children:["We've sent a verification link to your email.",Object(n.jsx)("br",{}),"Please check your inbox to verify your account."]}),Object(n.jsx)("h3",{className:"h6-font",children:"Need a new link?"}),Object(n.jsx)("button",{className:"button-link",children:"Re-Send Link"})]})}},{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"container mobile-padding",children:[this.renderContent(),Object(n.jsx)("button",{className:"secondary-button back-button",onClick:function(){b.auth().signOut()},children:"Back to Sign In"})]})})}}]),a}(s.a.Component);var Nt=function(t){return t.isAuthenticated?t.isVerified?t.componentContent():Object(n.jsx)(yt,{logInLocation:t.logInLocation,tabContent:!0}):Object(n.jsx)(xt,{logInLocation:t.logInLocation,tabContent:!0})},Tt=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=b.database(),r=[];n.ref("userTrips/".concat(t)).get().then((function(t){if(t.exists()){var s=t.val(),i=function(t){var i=s[t],c=i.tripPrivacy,o="public"===c,l=i.isShared,u="".concat(c,"Trips/").concat(t);n.ref("".concat(u)).get().then((function(e){if(e.exists()){var n,s=e.val(),i=s.tripName,c=s.locationsCount,d=s.featuredImg;if(a){var h=s.locations;if(h)n=!!h[a];else n=!1}var p={tripId:t,thumbnail:d,title:i,locationsCount:c,isPublic:o,isShared:l,inTrip:n};return r.push(p),r}console.log("issue fetching: ".concat(u))})).catch((function(t){return console.log("could not fetch trips: ".concat(t))})).then((function(t){return e(t)}))};for(var c in s)i(c)}else e(r)}))},kt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={existingTrips:[],loading:!0},t._isMounted=!1,t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0;var e=this.props.userId;this._isMounted&&Tt(e,(function(e){e?t.setState({existingTrips:e,loading:!1}):t.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"renderUserTrips",value:function(){var t=this.state,e=t.existingTrips;return t.loading?Object(n.jsx)("div",{"aria-live":"polite",children:Object(n.jsx)("p",{children:"Getting Trips..."})}):e.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{"aria-live":"polite",className:"sr-only",children:Object(n.jsx)("p",{children:"Showing all trips"})}),Object(n.jsx)(pt,{children:e.map((function(t,e){var a=t.thumbnail,r=t.title,s=t.locationsCount,i=t.isPublic,c=t.isShared,o=t.tripId;return Object(n.jsx)(jt,{thumbnail:a,title:r,tripId:o,isPublic:i,isShared:c,locationsCount:s},e)}))})]}):Object(n.jsx)("div",{"aria-live":"polite",children:Object(n.jsx)("p",{children:"No trips here yet."})})}},{key:"render",value:function(){var t=this;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Nt,{componentContent:function(){return t.renderUserTrips()},logInLocation:"trips",isVerified:this.props.isVerified,isAuthenticated:this.props.isAuthenticated})})}}]),a}(s.a.Component),wt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={isPublic:!0},t}return Object(d.a)(a,[{key:"renderContent",value:function(){return this.state.isPublic?Object(n.jsx)(bt,{}):Object(n.jsx)(kt,{isVerified:this.props.isVerified,isAuthenticated:this.props.isAuthenticated,userId:this.props.userId})}},{key:"switchTabs",value:function(t){this.setState({isPublic:t})}},{key:"render",value:function(){var t=this;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"container trips mobile-padding",children:[Object(n.jsx)("h2",{children:"Trips"}),Object(n.jsxs)("ul",{className:"tabs",children:[Object(n.jsx)("li",{children:Object(n.jsx)("button",{className:this.state.isPublic?"active":"inactive",onClick:function(){return t.switchTabs(!0)},children:"All Public Trips"})}),Object(n.jsx)("li",{children:Object(n.jsx)("button",{className:this.state.isPublic?"inactive":"active",onClick:function(){return t.switchTabs(!1)},children:"My Trips"})})]}),this.renderContent()]})})}}]),a}(s.a.Component);var St=function(t){var e=t.component,a=t.isAuthenticated,r=t.logInLocation,s=t.isVerified,i=(t.user,Object(x.a)(t,["component","isAuthenticated","logInLocation","isVerified","user"]));return Object(n.jsx)(j.a,Object(l.a)(Object(l.a)({},i),{},{render:function(t){return a?s?Object(n.jsx)(e,Object(l.a)({},t)):Object(n.jsx)(yt,{logInLocation:r}):Object(n.jsx)(xt,{logInLocation:r})}}))};var Ct=function(){return Object(n.jsx)("footer",{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("p",{children:"\xa9 PhotoAtlas 2021"}),Object(n.jsx)("p",{className:"caption",children:"All photographs and their titles/metadata on PhotoAtlas are copyrighted and owned by their respective owners (the photographers) and not by PhotoAtlas. As such Photo Atlas does not grant any licenses to any copyrights, patents or any other intellectual property rights."})]})})},It=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=t.width,r=t.height,s=n,i=r;if(n>a||r>e){var c=Math.min(a/n,e/r);s=n*c,i=r*c}t.width=s,t.height=i},At=function(t){var e=t.src,a=t.alt;return Object(n.jsx)("div",{className:"image-container",children:Object(n.jsx)("img",{onLoad:function(e){var a=e.target;It(a,t.maxHeight,t.maxWidth)},src:e,alt:a||""})})},Pt=a(37),Et=window.innerWidth,Lt=Et>600?Et/2:Et,Mt=function(t){var e=t.imageList,a=e.length;return Object(n.jsxs)(Pt.b,{children:[Object(n.jsx)("div",{className:"photo-slider",children:Object(n.jsx)(Pt.a,{options:{buttons:{showDownloadButton:!1,showAutoplayButton:!1}},children:e.map((function(t,e){var a=t.src,r=t.alt,s=t.author,i=t.creditUrl;return Object(n.jsxs)("div",{className:"image-with-credit",children:[Object(n.jsx)("a",{href:a,children:Object(n.jsx)(At,{src:a,alt:r,maxHeight:600,maxWidth:Lt})}),s&&Object(n.jsx)("span",{className:"credit",children:Object(n.jsx)("a",{href:i,children:s})})]},e)}))})}),Object(n.jsxs)("p",{className:"caption",children:["Total images: ",a]})]})};var Ft=function(t){var e=t.subjects;return e||(e=[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Photo Subjects"}),Object(n.jsx)("div",{className:"data-container",children:Object(n.jsxs)("ul",{className:"subject-indicators",children:[e.includes("abandoned")&&Object(n.jsx)("li",{className:"abandoned",children:"Abandoned"}),e.includes("architecture")&&Object(n.jsx)("li",{className:"architecture",children:"Architecture"}),e.includes("astro")&&Object(n.jsx)("li",{className:"astro",children:"Astrophotography"}),e.includes("landscape")&&Object(n.jsx)("li",{className:"landscape",children:"Landscape"}),e.includes("nature")&&Object(n.jsx)("li",{className:"nature",children:"Nature"}),e.includes("street art")&&Object(n.jsx)("li",{className:"street-art",children:"Street Art"}),e.includes("sunrise")&&Object(n.jsx)("li",{className:"sunrise",children:"Sunrise"}),e.includes("sunset")&&Object(n.jsx)("li",{className:"sunset",children:"Sunset"}),e.includes("transport")&&Object(n.jsx)("li",{className:"transport",children:"Transport"}),e.includes("people")&&Object(n.jsx)("li",{className:"people",children:"People"}),e.includes("urban")&&Object(n.jsx)("li",{className:"urban",children:"Urban"}),e.includes("water")&&Object(n.jsx)("li",{className:"water",children:"Water Feature"})]})})]})};function Dt(){return(Dt=Object(O.a)(v.a.mark((function t(e){var a,n,r=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:function(t){return console.log(t)},n="https://api.flickr.com/services/rest/?api_key=".concat("8f4e32dfe64f3675be06e06d24bd62a1","&method=flickr.photos.getInfo&format=json&nojsoncallback=1}&photo_id=").concat(e),t.next=4,fetch(n).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json().then((function(t){a(t)}))})).catch((function(t){console.log(t)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ut=function(t){return Dt.apply(this,arguments)},Rt=function(t){return Object(n.jsx)("a",{href:"https://maps.google.com/?q=".concat(t.latitude,",").concat(t.longitude),className:"action-button directions",children:"Directions"})},Bt=function(t){var e=t.added,a=Object(x.a)(t,["added"]);return Object(n.jsx)("button",Object(l.a)(Object(l.a)({className:"action-button ".concat(e?"added":"add")},a),{},{children:e?"Change Trips":"Add to Trip"}))},qt=function(t){var e=t.added,a=Object(x.a)(t,["added"]);return Object(n.jsx)("button",Object(l.a)(Object(l.a)({className:"action-button-small ".concat(e?"added":"add")},a),{},{children:e?"Change Trips":"Add to Trip"}))};var Zt=function(t){var e=t.id,a=t.value,r=t.labelText,s=t.className,i=t.name,c=Object(x.a)(t,["id","value","labelText","className","name"]),o=e||a;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("label",{className:"check-container ".concat(s||""),htmlFor:o,children:[r||"label",Object(n.jsx)("input",Object(l.a)({type:"radio",id:o,name:i,value:a},c)),Object(n.jsx)("span",{className:"radiomark"})]})})};function Wt(){var t=new Date,e=t.getDate(),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][t.getMonth()],n=t.getFullYear();return"".concat(e,"-").concat(a,"-").concat(n)}var zt=function(t,e,a){for(var n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=r.length,i=0;i<t;i++)n+=r.charAt(Math.floor(Math.random()*s));return e&&(n="".concat(e,"-").concat(n)),a&&(n="".concat(n,"-").concat(a)),n},Gt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={modalTitle:"Add or Remove from Trips",modalDescription:"",isAuthenticated:!1,userId:"",existingTrips:[],newTripPrivacy:"public",newTripName:"",newTripTags:"",newUser:!1,creatingTrip:!1,tripNameLength:0,tripNameError:"",tripTagsError:"",newTripCreated:!1,needNewTrip:!1,errorCreatingTrip:"",errorCreatingLocation:"",errorUpdatingUserTrips:"",errorAddingFilters:"",updatingTrips:!0},t._isMounted=!1,t}return Object(d.a)(a,[{key:"closeModal",value:function(){var t=this;this.setState({newTripCreated:!1,newTripPrivacy:"public",newTripName:"",newTripTags:"",errorCreatingTrip:"",errorCreatingLocation:"",errorUpdatingUserTrips:"",errorAddingFilters:"",needNewTrip:!1},(function(){return t.props.handleClose()}))}},{key:"changeUserType",value:function(t){var e=this;this.setState({newUser:t},(function(){e.state.newUser?e.setState({modalTitle:"Sign Up",modalDescription:"Create an account to manage your trips."}):e.setState({modalTitle:"Sign In",modalDescription:"Sign in to manage your trips."})}))}},{key:"checkExistingTrips",value:function(t){var e=this;this.setState({updatingTrips:!0}),this._isMounted&&Tt(t,(function(t){return e.setState({existingTrips:t,updatingTrips:!1})}),this.props.locationId)}},{key:"checkAuth",value:function(){var t=this.props.userId;if(!t){var e=b.auth().currentUser;e&&(t=e.uid)}this._isMounted&&(t?(this._isMounted&&this.checkExistingTrips(t),this.setState({isAuthenticated:!0,userId:t}),this.state.existingTrips.length<1&&this.setState({modalTitle:"Save to a New Trip",modalDescription:"",updatingTrips:!1})):this.setState({modalTitle:"Sign In",modalDescription:"Sign in to manage your trips."}))}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.checkAuth()}},{key:"componentDidUpdate",value:function(t){this._isMounted=!0,this.props.locationId!==t.locationId&&this.checkAuth()}},{key:"renderModalContent",value:function(){var t=this;return this.state.isAuthenticated?this.state.updatingTrips?Object(n.jsx)("div",{className:"modal-content-padding center-text",children:Object(n.jsx)("p",{children:"Updating trips..."})}):this.state.existingTrips.length>0&&!this.state.needNewTrip&&!this.state.newTripCreated?this.selectExistingTrip():this.state.newTripCreated||this.state.updatingTrips?this.newTripCreated():this.getNewTripInfo():Object(n.jsx)("div",{className:"modal-content-padding",children:Object(n.jsx)(xt,{hideTitle:!0,changeUserOnParent:function(e){return t.changeUserType(e)},afterSignIn:function(e){return t.checkAuth(e)},afterCreateAccount:function(e){return t.checkAuth(e)}})})}},{key:"selectExistingTrip",value:function(){var t=this;return Object(n.jsxs)(n.Fragment,{children:[this.renderExistingTrips(),Object(n.jsx)("div",{className:"modal-content-padding center-text",children:Object(n.jsx)("button",{onClick:function(){return t.switchForm()},className:"button-link",children:" + Create a New Trip"})})]})}},{key:"switchForm",value:function(){this.setState({needNewTrip:!this.state.needNewTrip})}},{key:"renderExistingTrips",value:function(){var t=this,e=this.state.existingTrips;return Object(n.jsx)("ul",{className:"existing-trips",children:e.map((function(e,a){var r=e.thumbnail,s=e.title,i=e.locationsCount,c=e.isPublic,o=e.isShared,l=e.tripId,u=e.inTrip;return Object(n.jsxs)("li",{className:"trip-card-small",children:[Object(n.jsx)("div",{className:"trip-card-image",children:Object(n.jsx)("img",{src:r,alt:""})}),Object(n.jsxs)("div",{className:"trip-card-content",children:[Object(n.jsx)("p",{className:"title",children:s}),Object(n.jsx)("p",{className:"meta-data ".concat(c?"public":"private"),children:c?"Public":o?"Shared":"Private"}),Object(n.jsxs)("p",{className:"meta-data marker",children:[i," ",i>1||i<1?"Locations":"Location"]}),Object(n.jsxs)("button",{className:"add-or-remove",onClick:function(e){t.addOrRemoveFromTrip(l,c)},children:[u?"- Remove":"+ Add",Object(n.jsx)("span",{children:u?"from ".concat(s):"to ".concat(s)})]})]})]},a)}))})}},{key:"handleTripNamelInput",value:function(t){t.preventDefault();var e=t.target.value.length;this.setState({newTripName:t.target.value,tripNameLength:e,tripNameError:""}),e>50&&this.setState({tripNameError:"Your trip name is too long."})}},{key:"handleTripTagsInput",value:function(t){var e=this;t.preventDefault(),this.setState({newTripTags:t.target.value,tripTagsError:""},(function(){e.state.newTripTags&&!/^[a-zA-Z ,0-9]+$/.test(e.state.newTripTags)&&e.setState({tripTagsError:"Tags may only contain letters, numbers, and commas"})}))}},{key:"renderDatabaseErrors",value:function(){if(this.state.errorCreatingLocation||this.state.errorUpdatingUserTrips||this.state.errorCreatingTrip||this.state.errorAddingFilters)return Object(n.jsx)("div",{className:"error-font","aria-live":"polite",children:Object(n.jsxs)("ul",{children:[this.state.errorCreatingTrip&&Object(n.jsx)("li",{children:this.state.errorCreatingTrip}),this.state.errorUpdatingUserTrips&&Object(n.jsx)("li",{children:this.state.errorUpdatingUserTrips}),this.state.errorCreatingLocation&&Object(n.jsx)("li",{children:this.state.errorCreatingLocation}),this.state.errorAddingFilters&&Object(n.jsx)("li",{children:this.state.errorAddingFilters})]})})}},{key:"getNewTripInfo",value:function(){var t=this;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{className:"h5-font center-text",children:"Create a New Trip"}),this.renderDatabaseErrors(),Object(n.jsxs)("form",{className:"modal-content-padding",children:[Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"trip-name",children:"Trip Name (Max 50 Characters)"}),Object(n.jsx)(ut,{placeholder:"Beautiful City",id:"trip-name",value:this.state.newTripName,onChange:function(e){return t.handleTripNamelInput(e)},required:!0}),0!==this.state.tripNameLength&&Object(n.jsxs)("p",{className:"character-count","aria-live":"polite",children:["Characters left: ",50-this.state.tripNameLength]}),this.state.tripNameError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.state.tripNameError})]}),Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"trip-tags",children:"Tags (Comma separated keywords)"}),Object(n.jsx)(ut,{placeholder:"city, urban architecture",id:"trip-tags",value:this.state.newTripTags,onChange:function(e){return t.handleTripTagsInput(e)}}),this.state.tripTagsError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.state.tripTagsError})]}),Object(n.jsxs)("fieldset",{className:"form-component-wrapper",children:[Object(n.jsx)("legend",{children:"Visibility Settings"}),Object(n.jsx)(Zt,{onChange:function(e){return t.handleNewTripPrivacy(e)},labelText:"Public",defaultChecked:!0,name:"trip-privacy",value:"public"}),Object(n.jsx)("label",{className:"caption-font",htmlFor:"public",children:"Anyone on Photo Atlas can see"}),Object(n.jsx)(Zt,{onChange:function(e){return t.handleNewTripPrivacy(e)},labelText:"Private",name:"trip-privacy",value:"private"}),Object(n.jsx)("label",{className:"caption-font",htmlFor:"private",children:"Only you can see"})]}),Object(n.jsx)("div",{className:"form-component-wrapper",children:Object(n.jsx)(rt,{onClick:function(e){return t.createNewTrip(e)},value:"".concat(this.state.creatingTrip?"Creating Trip...":"Create Trip")})})]}),this.state.existingTrips.length>0&&Object(n.jsx)("div",{className:"modal-content-padding",children:Object(n.jsx)("button",{onClick:function(){return t.switchForm()},className:"secondary-button back-button",children:"Back to Existing Trips"})})]})}},{key:"newTripCreated",value:function(){return Object(n.jsx)("div",{className:"modal-content-padding center-text",children:Object(n.jsx)("h3",{className:"h5-font center-text",children:"This location was added to your new trip."})})}},{key:"createNewFlickrSourcedLocation",value:function(t){var e=this,a=b.database(),n=this.props.locationId,r=this.props.photos,s=r[0].title,i=this.props.coordinates,c=this.props.subjects,o=Wt(),l={},u={};r.forEach((function(t){var e,a=t.flickrId;a&&(e="flickrPhoto-".concat(a)),u[e]={title:t.title,author:t.author,src:t.src,creditUrl:t.creditUrl?t.creditUrl:null}})),c.forEach((function(t){l[t]=!0})),a.ref("".concat(t)).set({locationName:s,photos:u,coordinates:i,savedCount:1,subjects:l,addedDate:o,curated:!1,userLastEditedDate:null,woeId:this.props.woeId}).then((function(){c.forEach((function(t){var r=t,s={};s[n]=!0,a.ref("subjects/".concat(r)).update(s).catch((function(t){e.setState({errorAddingFilter:"Could not add all filters to database: ".concat(t.message)})}))}))})).catch((function(t){e.setState({errorCreatingLocation:"Could not add location to database: ".concat(t.message)})}))}},{key:"createNewTrip",value:function(t){var e=this;if(t.preventDefault(),this.setState({errorCreatingTrip:"",errorCreatingLocation:"",errorUpdatingUserTrips:"",errorAddingFilters:""}),this.state.newTripName||this.setState({tripNameError:"Please name your trip."}),!this.state.tripNameError&&this.state.newTripName&&!this.state.tripTagsError){this.setState({creatingTrip:!0});var a=this.props.locationId,n=this.props.photos,r=this.state.newTripPrivacy,s=this.state.newTripName,i=n[0].src,c=this.state.userId,o=this.state.newTripTags;(o.endsWith(",")||o.endsWith(" ,"))&&(o=o.slice(0,-1));var l=Wt(),u=function(){var t=new Date,e=t.getHours(),a=t.getMinutes(),n=t.getSeconds(),r=t.getMilliseconds();return"".concat(e,"-").concat(a,"-").concat(n,"-").concat(r)}(),d=zt(7,"trip-".concat(l),"".concat(u)),h={};h[a]=!0;var p=b.database();p.ref("".concat(r,"Trips/")+d).set({tripName:s,featuredImg:i,author:c,locationsCount:1,locations:h,tags:o,createdOn:l,lastEdited:l}).catch((function(t){e.setState({errorCreatingTrip:"Could not create trip: ".concat(t.message)})})).then((function(){p.ref("userTrips/".concat(c,"/").concat(d)).set({tripPrivacy:r,isShared:!1}).catch((function(t){e.setState({errorUpdatingUserTrips:"Could to your list of trips: ".concat(t.message)})}))})).then((function(){if(a.startsWith("flickr-")){var t="appLocations/flickrSourced/".concat(a);p.ref("".concat(t)).get().then((function(a){a.exists()?a.val().savedCount&&p.ref("".concat(t)).transaction((function(t){return t&&t.savedCount++,t})):e.createNewFlickrSourcedLocation(t)}))}})).then((function(){e.state.errorCreatingTrip||e.state.errorCreatingLocation||e.state.errorUpdatingUserTrips||e.state.errorAddingFilters?e.setState({creatingTrip:!1}):e.setState({creatingTrip:!1,newTripCreated:!0,modalTitle:"You have a New Trip",modalDescription:""})})).then((function(){return e.checkExistingTrips(e.state.userId)}))}}},{key:"addOrRemoveFromTrip",value:function(t,e){var a=this;this.setState({updatingTrips:!0});var n=b.database(),r=e?"public":"private",s=this.props.locationId,i=this.state.userId,c=Wt(),o="".concat(r,"Trips/").concat(t,"/"),l="appLocations/flickrSourced/".concat(s);n.ref("".concat(o,"/locations/").concat(s)).get().then((function(t){if(t.exists())n.ref("".concat(o)).transaction((function(t){return t&&(t.locationsCount>0&&t.locationsCount--,t.lastEdited=c),t})).catch((function(t){return console.log(t)})).then((function(){n.ref("".concat(o,"/locations/").concat(s)).transaction((function(t){return t&&(t=null),t}))})).then((function(){return a.checkExistingTrips(i)})),n.ref("".concat(l)).transaction((function(t){return t&&t.savedCount--,t})).catch((function(t){return console.log(t)}));else{if(s.startsWith("flickr-")){var e="appLocations/flickrSourced/".concat(s);n.ref("".concat(e)).get().then((function(t){t.exists()||a.createNewFlickrSourcedLocation(e)}))}n.ref("".concat(o)).transaction((function(t){return t&&(t.locationsCount++,t.lastEdited=c),t})).catch((function(t){return console.log(t)})).then((function(){n.ref("".concat(o,"/locations")).get().then((function(t){if(t.exists()){var e={};e[s]=!0,n.ref("".concat(o,"/locations")).update(e).catch((function(t){return console.log(t)}))}else{var a={locations:{}};a.locations[s]=!0,n.ref("".concat(o)).update(a).catch((function(t){return console.log(t)}))}})).then((function(){return a.checkExistingTrips(i)}))})),n.ref("".concat(l)).transaction((function(t){return t&&t.savedCount++,t})).catch((function(t){return console.log(t)}))}})).then((function(){return a.setState({updatingTrips:!1})}))}},{key:"handleNewTripPrivacy",value:function(t){this.setState({newTripPrivacy:t.target.value})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this,e=this.state,a=e.modalTitle,r=e.modalDescription;return Object(n.jsx)(ot,{modalId:"manage-trips-modal",modalTitle:a,modalDescription:r,isOpen:this.props.isOpen,handleClose:function(){return t.closeModal()},children:this.renderModalContent()})}}]),a}(s.a.Component),Ht=function(t,e){b.database().ref("appLocations/flickrSourced/".concat(t)).get().then((function(t){var e=0;t.exists()&&(e=t.val().savedCount);return e})).catch((function(t){return console.log(t)})).then((function(t){e(t)}))},Xt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={locationId:"",title:"",distance:"loading...",saves:0,destination:{latitude:0,longitude:0},imageList:[],subjects:[],firstPhoto:{},showTripsModal:!1,inTrips:!1,userId:null,woeId:null},t._isMounted=!1,t}return Object(d.a)(a,[{key:"manageTripsModal",value:function(){var t=this;this.setState({showTripsModal:!this.state.showTripsModal});var e=this.props.userId;this.checkIfInTrips(e),Ht(this.state.locationId,(function(e){t.setState({saves:e})}))}},{key:"checkIfInTrips",value:function(t){var e=this;if(t){var a=b.database();this._isMounted&&a.ref("userTrips/".concat(t)).get().then((function(t){var n=[];if(t.exists()){var r=t.val(),s=function(t){var s=r[t].tripPrivacy,i=e.state.locationId,c="".concat(s,"Trips/").concat(t,"/locations/").concat(i);e._isMounted&&a.ref("".concat(c)).get().then((function(a){a.exists()&&n.push(t),n.length>0?e.setState({inTrips:!0}):e.setState({inTrips:!1})}))};for(var i in r)s(i)}return n}))}}},{key:"componentDidUpdate",value:function(t){if(t.userId!==this.props.userId){var e=this.props.userId;this.checkIfInTrips(e)}}},{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0;var e=this.props.userId;this.checkIfInTrips(e);var a=this.props.location.pathname.replace("/location/","");this.setState({locationId:a}),Ht(a,(function(e){t.setState({saves:e})}));var n=this.props.location.search,r=new URLSearchParams(n).get("woe");if(this.setState({woeId:r}),a.startsWith("flickr-")){var s=a.replace("flickr-","");this._isMounted&&Ut(s,(function(e){var a,n,i,c,o,l,u,d,h=e.photo;h&&(a=A(h),n=h.title._content,i=h.description._content,c=h.location.latitude,o=h.location.longitude,(l=h.owner.realname)||(l=h.owner.username),u=h.urls.url[0]._content,d=h.tags);var p={src:a,title:n,alt:i,lon:o,lat:c,author:l,creditUrl:u,tags:d};t.setState({firstPhoto:p},(function(){t.getLocationDetailsFromFlickr(s,r)}))}))}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getLocationDetailsFromFlickr",value:function(t,e){var a=this,n=this.state.firstPhoto,r=n.src,s=n.title,i=n.alt,c=n.lat,o=n.lon,l=n.author,u=n.creditUrl,d=n.tags;d=d?d.tag:[];var h="";if(d.forEach((function(t,e){(t=t._content)&&(h=0===e?h.concat(t):h.concat(", ".concat(t)))})),h){var p=[],j=function(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(h.includes(n)){p.push(e);break}}};j(st.abandonedTags.split(", "),"abandoned"),j(st.architectureTags.split(", "),"architecture"),j(st.astroTags.split(", "),"astro"),j(st.landscapeTags.split(", "),"landscape"),j(st.natureTags.split(", "),"nature"),j(st.streetArtTags.split(", "),"street art"),j(st.sunriseTags.split(", "),"sunrise"),j(st.sunsetTags.split(", "),"sunset"),j(st.transportTags.split(", "),"transport"),j(st.peopleTags.split(", "),"people"),j(st.urbanTags.split(", "),"urban"),j(st.waterTags.split(", "),"water"),p.length>0&&this.setState({subjects:p})}A(n);var m={title:s,src:r,alt:i,author:l,creditUrl:u,flickrId:t};(function(){var t=Object(O.a)(v.a.mark((function t(e){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()({woeId:e}).then((function(t){t&&(m.title=t)})).then(this.setState({title:s,destination:{latitude:parseFloat(c),longitude:parseFloat(o)},imageList:[m]})).then((function(){I({lat:c,lon:o,extras:"geo, description, owner_name, tags",accuracy:16}).then((function(n){if(n){var r=n.photos;if(r){r=r.photo;var s=a.state.imageList;r.forEach((function(n){if(n.woeid===e&&n.id!==t&&n.tags){var r=n.title,i=A(n),c=n.description._content,o=n.ownername,l=n.owner,u={title:r,src:i,alt:c,author:o,creditUrl:"https://www.flickr.com/photos/".concat(l,"/").concat(n.id),flickrId:n.id};s.push(u),a.setState({imageList:s})}}))}}}))}))}},{key:"render",value:function(){var t=this,e=this.state,a=e.title,r=e.saves,s=e.destination,i=e.imageList,c=e.subjects,o=e.inTrips;return a||(a="Untitled Location"),r||(r=0),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"location",children:[Object(n.jsx)("div",{className:"dark-background mobile-header",children:Object(n.jsxs)("div",{className:"container mobile-padding",children:[Object(n.jsx)("button",{onClick:function(){window.history.back()},className:"secondary-button back-button",children:"Back"}),Object(n.jsx)(qt,{added:o,onClick:function(){t.manageTripsModal()}})]})}),Object(n.jsxs)("div",{className:"container mobile-padding",children:[i&&Object(n.jsx)(Mt,{imageList:i}),Object(n.jsx)("h2",{className:"title",children:a}),Object(n.jsxs)("div",{className:"gird-70-30",children:[Object(n.jsxs)("div",{className:"col-70",children:[Object(n.jsxs)("p",{className:"meta-data saved",children:["Saved in: ",r," ",r>1||r<1?"trips":"trip"]}),Object(n.jsxs)("p",{className:"meta-data marker",children:["Coordinates: ",Object(n.jsxs)("a",{href:"https://maps.google.com/?q=".concat(s.latitude,",").concat(s.longitude),children:[s.latitude,", ",s.longitude]})]})]}),Object(n.jsx)("div",{className:"col-30",children:Object(n.jsxs)("ul",{className:"actions",children:[Object(n.jsx)("li",{children:Object(n.jsx)(Rt,{latitude:s.latitude,longitude:s.longitude})}),Object(n.jsx)("li",{children:Object(n.jsx)(Bt,{"data-micromodal-trigger":"modal-1",onClick:function(){t.manageTripsModal()},added:o})})]})})]}),c.length>0&&Object(n.jsx)(Ft,{subjects:c})]})]}),Object(n.jsx)(Gt,{isOpen:this.state.showTripsModal,handleClose:function(){return t.manageTripsModal()},locationId:this.state.locationId,photos:this.state.imageList,coordinates:this.state.destination,subjects:this.state.subjects,userId:this.state.userId,woeId:this.state.woeId})]})}}]),a}(s.a.Component),Yt=function(t){t.added;var e=Object(x.a)(t,["added"]);return Object(n.jsx)("button",Object(l.a)(Object(l.a)({className:"action-button edit"},e),{},{children:"Edit Trip"}))},Qt=function(t){t.added;var e=Object(x.a)(t,["added"]);return Object(n.jsx)("button",Object(l.a)(Object(l.a)({className:"action-button-small edit"},e),{},{children:"Edit Trip"}))},Vt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={errorUpdatingTrip:"",errorUpdatingUserTrips:"",tripNameError:"",tripNameLength:0,tripName:"",tripTags:"",tripTagsError:"",tripPrivacy:t.props.originalTripPrivacy,updatingTrip:!1,tripUpdate:!1,confirmDelete:!1,tripDeleted:!1},t._isMounted=!1,t}return Object(d.a)(a,[{key:"updateTrip",value:function(t){var e=this;if(t.preventDefault(),!this.state.errorUpdatingTrip&&!this.state.errorUpdatingUserTrips&&!this.state.tripNameError&&!this.state.tripTagsError){this.setState({updatingTrip:!0});var a=b.database(),n=this.props.userId,r=this.props.tripId,s=this.props.originalTripPrivacy,i="".concat(s,"Trips/").concat(r),c="userTrips/".concat(n,"/").concat(r),o=this.state.tripPrivacy,l={};this.state.tripName&&this.state.tripName!==this.props.originalTripName&&(l.tripName=this.state.tripName),this.state.tripTags&&this.state.tripTags!==this.props.originalTripTags&&(l.tags=this.state.tripTags),(l||o)&&a.ref("".concat(i)).update(l).catch((function(t){e.setState({errorUpdatingTrip:t})})).then((function(){if(e.state.tripPrivacy){var t,n={tripPrivacy:o};a.ref("".concat(c)).update(n).catch((function(t){e.setState({errorUpdatingUserTrips:t})})),a.ref("".concat(i)).get().then((function(e){t=e.val()})).catch((function(t){e.setState({errorUpdatingUserTrips:"When getting original privacy setting ".concat(t)})})).then((function(){a.ref("".concat(i)).remove().catch((function(t){e.setState({errorUpdatingUserTrips:"When deleting original privacy setting ".concat(t)})}))})).then((function(){var n="".concat(o,"Trips/").concat(r);a.ref("".concat(n)).set(t).catch((function(t){e.setState({errorUpdatingUserTrips:"When setting new privacy setting ".concat(t)})}))})).then((function(){return e.setState({updatingTrip:!1,tripUpdate:!0})}))}else e.setState({updatingTrip:!1,tripUpdate:!0})}))}}},{key:"tripDeleted",value:function(){return Object(n.jsx)("div",{className:"modal-content-padding center-text",children:Object(n.jsx)("h3",{className:"h5-font center-text",children:"This trip has been deleted."})})}},{key:"tripUpdated",value:function(){return Object(n.jsx)("div",{className:"modal-content-padding center-text",children:Object(n.jsx)("h3",{className:"h5-font center-text",children:"Trip information updated."})})}},{key:"renderDatabaseErrors",value:function(){if(this.state.errorUpdatingUserTrips||this.state.errorUpdatingTrip)return Object(n.jsx)("div",{className:"error-font","aria-live":"polite",children:Object(n.jsxs)("ul",{children:[this.state.errorUpdatingTrip&&Object(n.jsxs)("li",{children:["Issue updating trip: ",this.state.errorUpdatingTrip]}),this.state.errorUpdatingUserTrips&&Object(n.jsxs)("li",{children:[" Issue updating user trips: ",this.state.errorUpdatingUserTrips]})]})})}},{key:"deleteTrip",value:function(){var t=this,e=b.database(),a=this.props.userId,n=this.props.tripId,r=this.props.originalTripPrivacy,s="".concat(r,"Trips/").concat(n),i="userTrips/".concat(a,"/").concat(n);e.ref("".concat(s)).remove().catch((function(e){t.setState({errorUpdatingTrips:"When deleting trip ".concat(e)})})).then((function(){e.ref("".concat(i)).remove().catch((function(e){t.setState({errorUpdatingUserTrips:"When deleting trip from user trips list: ".concat(e)})}))})).then((function(){t.setState({tripDeleted:!0})}))}},{key:"toggleDeleteFrom",value:function(){this.setState({confirmDelete:!this.state.confirmDelete})}},{key:"componentDidUpdate",value:function(t){this.props.originalTripPrivacy!==t.originalTripPrivacy&&this.setState({tripPrivacy:this.props.originalTripPrivacy})}},{key:"renderUpdateForm",value:function(){var t=this,e=this.props.searchQuery,a=new URLSearchParams(e).get("privacy"),r=this.state.tripPrivacy?this.state.tripPrivacy:a,s="private"===r,i="public"===r;return Object(n.jsxs)(n.Fragment,{children:[this.renderDatabaseErrors(),Object(n.jsxs)("form",{className:"modal-content-padding",children:[Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"trip-name",children:"Trip Name (Max 50 Characters)"}),Object(n.jsx)(ut,{id:"trip-name",placeholder:this.props.originalTripName,value:this.state.tripName,onChange:function(e){return t.handleTripNamelInput(e)},required:!0}),0!==this.state.tripNameLength&&Object(n.jsxs)("p",{className:"character-count","aria-live":"polite",children:["Characters left: ",50-this.state.tripNameLength]}),this.state.tripNameError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.state.tripNameError})]}),Object(n.jsxs)("div",{className:"form-component-wrapper",children:[Object(n.jsx)("label",{htmlFor:"trip-tags",children:"Tags (Comma separated keywords)"}),Object(n.jsx)(ut,{id:"trip-tags",placeholder:this.props.originalTripTags,value:this.state.tripTags,onChange:function(e){return t.handleTripTagsInput(e)}}),this.state.tripTagsError&&Object(n.jsx)("p",{className:"error-font","aria-live":"polite",children:this.state.tripTagsError})]}),Object(n.jsxs)("fieldset",{className:"form-component-wrapper",children:[Object(n.jsx)("legend",{children:"Visibility Settings"}),Object(n.jsx)(Zt,{defaultChecked:i,onChange:function(e){return t.handleTripPrivacy(e)},labelText:"Public",name:"trip-privacy",value:"public"}),Object(n.jsx)("label",{className:"caption-font",htmlFor:"public",children:"Anyone on Photo Atlas can see"}),Object(n.jsx)(Zt,{defaultChecked:s,onChange:function(e){return t.handleTripPrivacy(e)},labelText:"Private",name:"trip-privacy",value:"private"}),Object(n.jsx)("label",{className:"caption-font",htmlFor:"private",children:"Only you can see"})]}),Object(n.jsx)("div",{className:"form-component-wrapper",children:Object(n.jsx)(rt,{onClick:function(e){return t.updateTrip(e)},value:"".concat(this.state.updatingTrip?"Updating Trip...":"Update Trip")})})]}),Object(n.jsxs)("div",{className:"modal-content-padding",children:[Object(n.jsx)("button",{onClick:function(){return t.toggleDeleteFrom()},className:"secondary-button delete-button",children:"Delete Trip"}),this.state.confirmDelete&&Object(n.jsx)("div",{children:Object(n.jsxs)("ul",{className:"button-group",children:[Object(n.jsx)("li",{children:Object(n.jsx)("button",{onClick:function(){return t.deleteTrip()},className:"default-button",children:"Delete"})}),Object(n.jsx)("li",{children:Object(n.jsx)("button",{onClick:function(){return t.toggleDeleteFrom()},className:"button-link",children:"Cancel"})})]})})]})]})}},{key:"handleTripNamelInput",value:function(t){t.preventDefault();var e=t.target.value.length;this.setState({tripName:t.target.value,tripNameLength:e,tripNameError:""}),e>50&&this.setState({tripNameError:"Your trip name is too long."})}},{key:"handleTripTagsInput",value:function(t){var e=this;t.preventDefault(),this.setState({tripTags:t.target.value,tripTagsError:""},(function(){e.state.tripTags&&!/^[a-zA-Z ,0-9]+$/.test(e.state.tripTags)&&e.setState({tripTagsError:"Tags may only contain letters, numbers, and commas"})}))}},{key:"handleTripPrivacy",value:function(t){this.setState({tripPrivacy:t.target.value})}},{key:"renderModalContent",value:function(){return this.state.tripDeleted?this.tripDeleted():!this.state.tripUpdate||this.state.errorUpdatingTrip||this.state.errorUpdatingUserTrips||this.state.tripNameError||this.state.tripTagsError?this.renderUpdateForm():this.tripUpdated()}},{key:"closeModal",value:function(){var t=this,e={};if(this.state.tripDeleted)e={updated:!0,deleted:!0},this.props.handleClose(e);else{if(this.state.tripUpdate){var a=this.props.originalTripPrivacy,n=this.state.tripPrivacy;e=n&&n!==a?{updated:!0,newPrivacy:n}:{updated:!0}}else e={updated:!1};this.setState({tripUpdate:!1},(function(){return t.props.handleClose(e)}))}}},{key:"render",value:function(){var t=this;return Object(n.jsx)(ot,{modalId:"edit-trip-modal",modalTitle:"Update Trip",isOpen:this.props.isOpen,handleClose:function(){return t.closeModal()},children:this.renderModalContent()})}}]),a}(s.a.Component),Jt=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={loaded:!1,tripList:[],tripName:"",tripTags:"",locationsCount:0,mapLat:null,mapLon:null,mapZoom:10,showModal:!1,tripPrivacy:null},t._isMounted=!1,t.tripId=t.getTripId(),t}return Object(d.a)(a,[{key:"getPrivacy",value:function(){var t=this.props.location.search;return new URLSearchParams(t).get("privacy")}},{key:"getTripId",value:function(){return this.props.location.pathname.replace("/trip/","")}},{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0;var e=this.getPrivacy();this.setState({tripPrivacy:e},(function(){t._isMounted&&t.getTripDetails(t.state.tripPrivacy,t.tripId)}))}},{key:"getTripDetails",value:function(t,e){var a,n,r,s,i=this,c=b.database(),o=[];r="public"===t?"publicTrips/".concat(e):"privateTrips/".concat(e),c.ref("".concat(r)).get().then((function(t){var e=t.val();a=e.tripName,s=e.tags,n=e.locationsCount,i.setState({tripName:a,locationsCount:n,tripTags:s});var r=e.locations,l=function(t){var e=void 0,a=void 0,n=void 0,r=void 0,s=void 0,l=void 0,u=void 0,d=void 0,h=void 0;t.startsWith("flickr-")&&(a="flickr",d="appLocations/flickrSourced/".concat(t),h=t.replace("flickr-","")),c.ref("".concat(d)).get().then((function(t){var i=t.val();if(i){var c=i.photos,o=c[Object.keys(c)[0]],d=i.coordinates;n=i.woeId,r=o.src,s=i.locationName,l=d.latitude,u=d.longitude}e={src:a,locationId:h,woeId:n,thumbnail:r,title:s,destination:{latitude:parseFloat(l),longitude:parseFloat(u)}}})).then((function(){return o.push(e)})).catch((function(t){return console.log("issue getting location info",t)})).then((function(){var t=o[0].destination,e=t.longitude,a=t.latitude,n={tripList:o,loaded:!0,mapLat:a,mapLon:e};i.setState(n)}))};for(var u in r)l(u)})).catch((function(t){return console.log(t)}))}},{key:"openModal",value:function(){var t=this,e=this.getPrivacy();this.setState({tripPrivacy:e},(function(){return t.setState({showModal:!0})}))}},{key:"closeModal",value:function(t){var e=this,a=t.updated,n=t.deleted;if(a)if(n)this.setState({showModal:!this.state.showModal},(function(){e.props.history.push("/trips")}));else{var r=t.newPrivacy;r&&this.state.tripPrivacy!==r?(this.props.history.push({search:"?privacy=".concat(r)}),this.setState({tripPrivacy:r}),this._isMounted&&this.getTripDetails(r,this.tripId)):this._isMounted&&this.getTripDetails(this.state.tripPrivacy,this.tripId)}this.setState({showModal:!this.state.showModal})}},{key:"render",value:function(){var t=this,e=this.state,a=e.loaded,r=e.tripList,s=e.mapLat,i=e.mapLon,c=e.mapZoom,o=e.locationsCount,l=e.tripName,u=e.tripTags,d=e.tripPrivacy;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"trip",children:[Object(n.jsxs)(tt,{mapLoctaions:r,mapLat:s,mapLon:i,mapZoom:c,children:[Object(n.jsx)("div",{className:"dark-background mobile-header",children:Object(n.jsxs)("div",{className:"container mobile-padding",children:[Object(n.jsx)("button",{onClick:function(){window.history.back()},className:"secondary-button back-button",children:"Back"}),Object(n.jsx)(Qt,{onClick:function(){return t.openModal()}})]})}),Object(n.jsxs)("div",{className:"gird-70-30",children:[Object(n.jsx)("div",{className:"col-70",children:Object(n.jsxs)("div",{className:"container mobile-padding",children:[Object(n.jsx)("h2",{className:"h6-font",children:l}),Object(n.jsx)("p",{className:"meta-data ".concat("public"===d?"public":"private"),children:d}),Object(n.jsxs)("p",{className:"meta-data marker",children:[o," ",1===o?"Location":"Locations"]}),Object(n.jsxs)("p",{className:"meta-data tags",children:["Tags: ",u]})]})}),Object(n.jsx)("div",{className:"col-30",children:Object(n.jsx)("ul",{className:"actions",children:Object(n.jsx)("li",{children:Object(n.jsx)(Yt,{onClick:function(){return t.openModal()}})})})})]}),Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(at,{loaded:a,list:r})})]}),Object(n.jsx)(Vt,{isOpen:this.state.showModal,handleClose:function(e){return t.closeModal(e)},originalTripName:l,originalTripTags:u,originalTripPrivacy:d,userId:this.props.userId,tripId:this.tripId,searchQuery:this.props.location.search})]})})}}]),a}(s.a.Component),Kt=(a(88),function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={signedIn:!1,userVerified:!1,userId:null},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=this;b.auth().onAuthStateChanged((function(e){e?t.setState({signedIn:!0,userVerified:e.emailVerified,userId:e.uid}):t.setState({signedIn:!1})}))}},{key:"render",value:function(){var t=this,e=this.state,a=e.signedIn,r=e.userVerified;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f,{}),Object(n.jsx)("main",{children:Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/",component:U}),Object(n.jsx)(j.a,{path:"/explore",component:ct}),Object(n.jsx)(j.a,{path:"/location",render:function(e){return Object(n.jsx)(Xt,Object(l.a)(Object(l.a)({},e),{},{userId:t.state.userId}))}}),Object(n.jsx)(j.a,{path:"/trips",render:function(e){return Object(n.jsx)(wt,Object(l.a)(Object(l.a)({},e),{},{userId:t.state.userId,isAuthenticated:a,isVerified:r}))}}),Object(n.jsx)(j.a,{path:"/trip",render:function(e){return Object(n.jsx)(Jt,Object(l.a)(Object(l.a)({},e),{},{userId:t.state.userId}))}}),Object(n.jsx)(St,{path:"/account",component:ht,isAuthenticated:a,isVerified:r,logInLocation:"account"})]})}),Object(n.jsx)(Ct,{})]})}}]),a}(s.a.Component));c.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(o.a,{children:Object(n.jsx)(Kt,{})})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.71ce4732.chunk.js.map