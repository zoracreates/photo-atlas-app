{"version":3,"sources":["utils/firebase/firebaseConfig.js","components/navigation/Navbar.js","images/icons/nav-logo.png","components/forms/SearchBar.js","components/layout/TwoToThreeCols.js","components/cards/TtitleCard.js","utils/flickr/getFlickrPhotos.js","utils/flickr/createFlickrImageUrl.js","utils/flickr/getFlickrPlace.js","utils/getCurrentLocation.js","utils/getGeoSuggestions.js","screens/explore/Home.js","components/map/MapPopUp.js","components/map/ChangeMapView.js","components/map/Map.js","components/layout/MapWithCards.js","components/layout/TwoCols.js","components/content/ResultsList.js","components/forms/CheckBox.js","components/forms/SubmitButton.js","utils/filterTags.js","components/forms/SubjectFilters.js","screens/explore/SearchResults.js","components/modals/Modal.js","components/modals/ResetPasswordModal.js","components/forms/TextInput.js","components/modals/ChangeDisplayName.js","screens/Account.js","components/layout/OneToTwoCols.js","components/cards/TripCard.js","utils/getPublicTrips.js","screens/trips/PublicTrips.js","components/forms/EmailInput.js","components/forms/PasswordInput.js","screens/authentication/SignIn.js","screens/authentication/SignUp.js","screens/authentication/Authenticate.js","screens/authentication/VerifyEmail.js","components/navigation/PrivateTab.js","utils/getUserTrips.js","screens/trips/MyTrips.js","screens/trips/Trips.js","components/navigation/PrivateRoute.js","components/content/Footer.js","utils/resizeimage.js","components/slider/ContainedImage.js","components/slider/PhotoSlider.js","components/content/SubjectIndicators.js","utils/flickr/getFlickrPhotoInfo.js","components/buttons/DirectionsButtons.js","components/buttons/AddToTripsButtons.js","components/forms/RadioButton.js","utils/generateDateAndTime.js","utils/generateId.js","components/modals/ManageTripsModal.js","utils/getSavesCount.js","screens/location/Location.js","components/buttons/EditTripButtons.js","components/modals/EditTripModal.js","screens/trips/TripContent.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Navbar","location","useLocation","pathname","tripsPath","RegExp","accountPath","tripPagePath","locationPagePath","tripsActive","test","accountActive","tripPageActive","locationPageActive","exploreActive","className","to","src","alt","SearchBar","props","name","onClick","placeholder","backSearch","id","labelText","action","method","searchSuggestions","autoComplete","handleSuggestion","rest","searchStyle","htmlFor","window","history","back","type","map","suggestion","tabIndex","data","y","x","label","TwoToThreeCols","children","TitleCard","thumbnail","title","locationId","woeId","titleLength","length","extraChars","slicedTitle","slice","lastSpace","lastIndexOf","createUrl","url","item","options","hasOwnProperty","a","axios","get","response","console","log","getFlickrPhotos","createFlickrImageUrl","photoData","farm","server","secret","placeId","place","woe_name","getFlickrPlace","getCurrentLocation","handleSuccess","handleError","navigator","geolocation","getCurrentPosition","position","err","input","provider","AlgoliaProvider","search","query","results","getGeoSuggestions","Home","state","currentLocation","errorMessage","noLocations","locationResults","searchBarSuggestions","_isMounted","getNearbyLocations","currentLat","latitude","currentLon","longitude","existingLocations","list","then","photos","photo","forEach","woeid","tags","includes","push","placeName","setState","e","preventDefault","this","target","value","aria-live","lat","lon","coords","message","onChange","handleInput","handleSubmit","suggestionClick","renderNearby","React","Component","MapPopup","Popup","ChangeMapView","center","zoom","useMap","setView","propTypes","PropTypes","arrayOf","number","DefaultIcon","L","icon","iconUrl","shadowUrl","iconShadow","Marker","prototype","Map","locations","MapContainer","TileLayer","attribution","destination","MapWithCards","openedMap","handleToggle","mapLoctaions","mapLat","mapLon","mapZoom","toggleBarClass","bind","TwoCols","ResultsList","loaded","needLocation","count","CheckBox","SubmitButton","filterTags","abandonedTags","architectureTags","astroTags","landscapeTags","sunriseTags","sunsetTags","transportTags","peopleTags","urbanTags","waterTags","natureTags","streetArtTags","SubjectFilters","open","filters","abandoned","architecture","astro","landscape","sunrise","sunset","transport","people","urban","water","nature","streetArt","formChanged","previousFilters","prevProps","resetFilters","filterString","activeFilters","filter","index","concat","prevState","checked","toggleDropdown","closeDropdown","handleChange","sendData","SearchResults","searchResults","getSearchResults","searchLat","searchLon","parseFloat","address","decodeURIComponent","searchParams","URLSearchParams","has","handleFilters","findNearby","Modal","modalId","modalTitle","modalDescription","isOpen","handleClose","modalTitleId","closeModal","role","aria-modal","aria-labelledby","ResetPasswordModal","error","successReset","confirmReset","auth","emailAddress","email","logInLocation","form","actionCodeSettings","sendPasswordResetEmail","catch","resetPassword","TextInput","ChangeDisplayNameModal","newName","currentName","loading","user","currentUser","displayName","database","userId","uid","ref","update","triggerUpdate","changeDisplayName","Account","changeName","updateUser","component","snapshot","exists","val","openDisplayNameModal","openPasswordModal","signOut","closePasswordModal","ChangeDisplayName","closeDisplayNameModal","OneToTwoCols","TripCard","tripId","isPublic","isShared","locationsCount","getPublicTrips","callback","existingTrips","trips","existingTripUpdate","PublicTrips","tripsList","trip","renderPublicTrips","EmailInput","PasswordInput","checkName","changeType","SignIn","emailError","forgotPassword","hideTitle","tabContent","introtext","onSubmit","handleEmailInput","required","password","handlePassInput","passError","togglePasswordReset","SignUp","firstname","handleNameInput","nameError","lastname","handleLastnameInput","lastnameError","confirmPassword","handleConfirmPassInput","confirmPassError","Authenticate","newUser","fetchSignInMethodsForEmail","signInMethods","indexOf","EmailAuthProvider","EMAIL_PASSWORD_SIGN_IN_METHOD","signInWithEmailAndPassword","userCredential","afterSignIn","errorCode","code","testString","createUserWithEmailAndPassword","userInfo","set","afterCreateAccount","changeUserOnParent","text","handleCreateAccount","handleSignIn","renderContent","changeUserType","VerifyEmail","locationUrl","sendEmailVerification","PrivateTab","isAuthenticated","isVerified","componentContent","getUserTrips","privacy","tripRef","inTrip","tripData","MyTrips","renderUserTrips","Trips","switchTabs","PrivateRoute","render","Footer","resizeImage","img","maxHeight","maxWidth","srcWidth","width","srcHeight","height","newWidth","newHeight","ratio","Math","min","ContainedImage","onLoad","windowWidth","innerWidth","maxImageWidth","PhotoSlider","imageList","imagesCount","buttons","showDownloadButton","showAutoplayButton","image","author","creditUrl","href","SubjectIndicators","subjects","photoId","handleResponse","responseData","fetch","ok","Error","statusText","json","getFlickrPhotoInfo","DirectionsLarge","AddToTripsLarge","added","AddToTripsSmall","RadioButton","idName","generateDate","d","Date","day","getDate","month","getMonth","year","getFullYear","generateId","prefix","sufix","result","characters","charactersLength","i","charAt","floor","random","ManageTripsModal","newTripPrivacy","newTripName","newTripTags","creatingTrip","tripNameLength","tripNameError","tripTagsError","newTripCreated","needNewTrip","errorCreatingTrip","errorCreatingLocation","errorUpdatingUserTrips","errorAddingFilters","updatingTrips","newUserValue","checkExistingTrips","checkAuth","selectExistingTrip","getNewTripInfo","renderExistingTrips","switchForm","addOrRemoveFromTrip","valueLength","renderDatabaseErrors","handleTripNamelInput","handleTripTagsInput","handleNewTripPrivacy","defaultChecked","createNewTrip","locationRef","locationPhotosArray","locationName","locationCoordinates","coordinates","locationSubjectsArray","date","locationSubjects","locationPhotos","flickrId","subject","savedCount","addedDate","curated","userLastEditedDate","subjectRef","errorAddingFilter","tripPrivacy","tripName","tripFeaturedImgSrc","tripAuthor","tripTags","endsWith","time","hour","getHours","minutes","getMinutes","seconds","getSeconds","milliseconds","getMilliseconds","generateTimeNumber","generateID","featuredImg","createdOn","lastEdited","startsWith","transaction","createNewFlickrSourcedLocation","renderModalContent","getSavesCount","Location","distance","saves","firstPhoto","showTripsModal","inTrips","checkIfInTrips","locationTrips","replace","pathQuery","_content","description","owner","realname","username","urls","getLocationDetailsFromFlickr","tagsList","tag","tagsString","setSubject","tagsArray","split","newTitle","newSrc","newAlt","newAuthor","ownername","ownerId","newLocation","manageTripsModal","data-micromodal-trigger","EditTripLarge","EditTripSmall","EditTripModal","errorUpdatingTrip","originalTripPrivacy","updatingTrip","tripUpdate","confirmDelete","tripDeleted","originalPrivacy","userTripRef","newPrivacy","originalTripName","originalTripTags","userTripsUpdate","remove","errorUpdatingTrips","searchQuery","searchPrivacy","defaultPrivate","defaultPublic","handleTripPrivacy","updateTrip","toggleDeleteFrom","deleteTrip","renderUpdateForm","tripUpdated","updated","deleted","TripContent","tripList","showModal","getTripId","getPrivacy","getTripDetails","locationData","Object","keys","openModal","App","signedIn","userVerified","onAuthStateChanged","emailVerified","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.71ce4732.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nconst config = {\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\n};\n\nfirebase.initializeApp(config);\n\nexport default firebase;","import { Link, useLocation } from 'react-router-dom';\n\nimport logo from '../../images/icons/nav-logo.png'\n\nfunction Navbar() {\n\n    // Check Router's location to set active status\n    let location = useLocation().pathname;\n\n    let tripsPath = new RegExp('/trips/?');\n    let accountPath = new RegExp('/account/?');\n    let tripPagePath = new RegExp('/trip/?');\n    let locationPagePath = new RegExp('/location/?');\n\n    let tripsActive = tripsPath.test(location);\n    let accountActive = accountPath.test(location);\n    let tripPageActive = tripPagePath.test(location)\n    let locationPageActive = locationPagePath.test(location)\n\n    let exploreActive = (!tripsActive && !accountActive && !tripPageActive && !locationPageActive );\n    \n\n    return (\n        <header>\n            <div className={`container`}>\n                <div className={`logo`}>\n                    <Link to=\"/\">\n                        <h1>Photo Atlas</h1>\n                        <img src={logo} alt={`PhotoAtlas logo`} />\n                    </Link>\n                </div>\n                <nav>\n                    <ul>\n                        <li>\n                            <Link to=\"/\" className={`explore ${exploreActive ? 'active' : 'normal'}`}>\n                                <span>Explore</span>\n                            </Link>\n                        </li>\n\n                        <li>\n                            <Link to=\"/trips\" className={`trips ${tripsActive ? 'active' : 'normal'}`}>\n                                <span>Trips</span>\n                            </Link>\n                        </li>\n\n                        <li>\n                            <Link to=\"/account\" className={`profile ${accountActive ? 'active' : 'normal'}`}>\n                                <span>Account</span>\n                            </Link>\n                        </li>\n                    </ul>\n                </nav>\n            </div>\n        </header>\n    )\n}\n\nexport default Navbar;","export default \"data:image/png;base64,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\"","import PropTypes from 'prop-types';\n\nfunction SearchBar(props) {\n\n    let {\n        className,\n        name,\n        onClick,\n        placeholder,\n        backSearch,\n        id,\n        labelText,\n        action,\n        method,\n        searchSuggestions,\n        autoComplete,\n        handleSuggestion,\n        ...rest } = props;\n\n\n    function sendData(data) {\n        if (handleSuggestion) {\n            handleSuggestion(data)\n        } else {\n            return undefined\n        }\n    }\n\n    let searchStyle = backSearch ? 'back-search' : 'standard-search';\n\n    return (\n        <>\n            {labelText && <label className={`search-label ${searchStyle}-label`} htmlFor={id ? id : 'gsearch'}>{labelText}</label>}\n            <div className={`search-bar-container ${searchStyle} ${className ? className : ''}`}>\n                <button onClick={() => { window.history.back() }} className={`search-back-buttton`}>Back</button>\n\n                <form action={action} method={method}>\n\n                    <input\n\n                        type=\"search\"\n\n                        className={`text-bar`}\n\n                        name={name ? name : 'q'}\n\n                        id={id ? id : 'gsearch'}\n\n                        placeholder={placeholder ? placeholder : 'Search Term'}\n\n                        autoComplete={autoComplete ? autoComplete : 'off'}\n\n                        {...rest}\n\n                    />\n\n\n\n                    {searchSuggestions &&\n\n                        <ul className={`search-suggestions`}>\n\n                            {searchSuggestions[0] && searchSuggestions.map((suggestion, id) => {\n                                return (\n                                    <li key={id}>\n                                        <button\n                                            tabIndex=\"0\"\n\n                                            onClick={() => sendData(\n                                                //geocoding search means x = lat and y = lon https://smeijer.github.io/leaflet-geosearch/usage\n                                                {\n                                                    'lat': suggestion.y,\n                                                    'lon': suggestion.x,\n                                                    'label': suggestion.label\n                                                }\n                                            )}>{suggestion.label}</button></li>\n                                )\n\n                            }\n\n                            )\n                            }\n\n                        </ul>\n                    }\n                    <button className={`search-button`} onClick={onClick}>Search</button>\n                </form>\n            </div>\n        </>\n    )\n}\n\nSearchBar.propTypes = {\n    className: PropTypes.string,\n    labelText: PropTypes.string,\n    backSearch: PropTypes.bool,\n    name: PropTypes.string,\n    onClick: PropTypes.func,\n    placeholder: PropTypes.string,\n    autoComplete: PropTypes.string,\n    handleSuggestion: PropTypes.func\n}\n\n\nexport default SearchBar;","function TwoToThreeCols(props) {\n\n    return (\n        <div className={`grid-2_3`}>\n            {props.children}\n        </div>\n    )\n\n}\n\nexport default TwoToThreeCols;","import PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom'\n\nfunction TitleCard(props) {\n    let {\n        thumbnail,\n        title,\n        src,\n        locationId,\n        woeId } = props;\n\n    if (!title) {\n        title = \"Unamed Location\"\n    }\n\n    let titleLength = title.length;\n\n    //keep the lenght of the title at 45 characters\n    if (titleLength > 150) {\n        let extraChars = 150 - titleLength;\n        let slicedTitle = title.slice(0, extraChars);\n        let lastSpace = slicedTitle.lastIndexOf(\" \");\n        slicedTitle = slicedTitle.slice(0, lastSpace);\n        title = `${slicedTitle}...`\n    }\n\n    return (\n        <Link className={`title-card`} to={ `/location/${src}-${locationId}?woe=${woeId}`}>\n            <div className={`title-card-image`}>\n                <img src={thumbnail} alt=\"\" />\n            </div>\n\n            <p className={`title`}>{title}</p> \n        </Link>\n    )\n}\n\nTitleCard.propTypes = {\n    thumbnail: PropTypes.string,\n    title: PropTypes.string,\n    src: PropTypes.string,\n    locationId: PropTypes.string,\n    woeId: PropTypes.string\n}\n\n\nexport default TitleCard;","import axios from 'axios';\n\nfunction createUrl(options = {}) {\n    let url, item;\n    url = `https://api.flickr.com/services/rest/?api_key=${process.env.REACT_APP_FLICKR_API_KEY}&method=flickr.photos.search&format=json&nojsoncallback=true}`\n\n    for (item in options) {\n        if (options.hasOwnProperty(item)) {\n            url += \"&\" + item + \"=\" + options[item];\n        }\n    }\n\n    return url;\n}\n\nasync function getFlickrPhotos(options = {}) {\n    \n    let url = createUrl(options)\n    let response;\n\n    try {\n       response = await axios.get(url)\n       return response.data\n       \n    } catch(err) {\n        console.log(err); \n    }\n\n};\n\n\nexport default getFlickrPhotos;","\n\nfunction createFlickrImageUrl(photoData) {\n\n    let {farm,server,id,secret} = photoData;\n\n    return `https://farm${farm}.staticflickr.com/${server}/${id}_${secret}.jpg`\n}\n\n//reference https://idratherbewriting.com/learnapidoc/docapis_flickr_example.html\n\nexport default createFlickrImageUrl;","import axios from 'axios';\n\nasync function getFlickrPlace(options = {}) {\n    \n    let url, response;\n\n    if (options.placeId) {\n        url = `https://api.flickr.com/services/rest/?api_key=${process.env.REACT_APP_FLICKR_API_KEY}&method=flickr.places.getInfo&format=json&nojsoncallback=1}&place_id=${options.placeId}`\n    }\n    else if (options.woeId) {\n        url = `https://api.flickr.com/services/rest/?api_key=${process.env.REACT_APP_FLICKR_API_KEY}&method=flickr.places.getInfo&format=json&nojsoncallback=1}&woe_id=${options.woeId}`\n    }\n    else {\n        return\n    }\n\n        try {\n            response = await axios.get(url)\n            if (response.data) {\n                if(response.data.place.woe_name) {\n                    return response.data.place.woe_name\n                 }\n            }\n         } catch(err) {\n             console.log(err); \n         }\n     \n};\n\nexport default getFlickrPlace;\n","function getCurrentLocation  (handleSuccess, handleError) {\n    window.navigator.geolocation.getCurrentPosition(\n        position => handleSuccess(position),\n        err => handleError(err)\n    );\n}\n\nexport default getCurrentLocation;","import { AlgoliaProvider } from 'leaflet-geosearch';\n\nasync function getGeoSuggestions(input) {\n    const provider = new AlgoliaProvider();\n\n    try {\n        const results = await provider.search({query: input});\n        if (results) {\n            return results\n        }\n        else {\n            return []\n        }\n    }\n    catch (err) {\n        console.log(err);\n    }\n}\n\nexport default getGeoSuggestions;\n\n//https://smeijer.github.io/leaflet-geosearch/providers/algolia\n//https://smeijer.github.io/leaflet-geosearch/usage","import React from 'react';\nimport SearchBar from '../../components/forms/SearchBar';\nimport TwoToThreeCols from '../../components/layout/TwoToThreeCols'\nimport TitleCard from '../../components/cards/TtitleCard'\nimport getFlickrPhotos from '../../utils/flickr/getFlickrPhotos';\nimport createFlickrImageUrl from '../../utils/flickr/createFlickrImageUrl';\nimport getFlickrPlace from '../../utils/flickr/getFlickrPlace';\nimport getCurrentLocation from '../../utils/getCurrentLocation';\nimport getGeoSuggestions from '../../utils/getGeoSuggestions'\n\nclass Home extends React.Component {\n\n    state = {\n        query: '',\n        currentLocation: null,\n        errorMessage: '',\n        noLocations: false,\n        locationResults: [],\n        searchBarSuggestions: ''\n    };\n\n    _isMounted = false;\n\n    handleSubmit(e) {\n        e.preventDefault();\n\n        // use the first suggestion to search\n        if(this.state.searchBarSuggestions) {\n            let suggestion = this.state.searchBarSuggestions[0]\n\n            this.setState({query:suggestion.label})\n\n            //geocoding search means x = lat and y = lon https://smeijer.github.io/leaflet-geosearch/usage\n            let search = `address=${suggestion.label}&lat=${suggestion.y}&lon=${suggestion.x}`\n            this.props.history.push(`/explore/?q&${search}`);\n        }\n        else {\n            return undefined\n        }\n    }\n\n    \n    handleInput(e) {\n        this.setState(\n           \n            { query: e.target.value }, \n            \n            () => {\n\n                if(!this.state.query) {\n                    this.setState({searchBarSuggestions: ''})\n                }\n                else {\n                    getGeoSuggestions(this.state.query).then(results =>this.setState({searchBarSuggestions: results}))\n                }\n           \n        })\n       \n    }\n\n    renderNearby(list) {\n\n        if (this.state.errorMessage && !this.state.currentLocation) {\n            console.log(`Error: ${this.state.errorMessage}`)\n            return <p aria-live=\"polite\" >Share your location to explore what's nearby.</p>\n        }\n\n        if (!this.state.errorMessage && this.state.noLocations) {\n            return <p aria-live=\"polite\">Looks like there aren't any photo spots nearby yet. Let's explore a different location</p>\n        }\n\n        if (!this.state.errorMessage && this.state.currentLocation) {\n            return (\n                <>\n                <p aria-live=\"polite\" className=\"sr-only\">Showing nearby locations</p>\n                <TwoToThreeCols >\n                    {list.map((location, id) => {\n                        const { thumbnail, title, src, locationId, woeId } = location;\n                        return (\n                            //make these into links where the search param should be the photo id\n                            <TitleCard \n                                key={id} \n                                thumbnail={thumbnail} \n                                title={title} \n                                src={src}\n                                locationId={locationId}\n                                woeId={woeId}\n                            />\n                        )\n\n                    })}\n                </TwoToThreeCols>\n                </>\n            )\n\n        }\n\n        return <p>Getting nearby photo spots...</p>\n    }\n\n\n    getNearbyLocations = () => {\n\n        if (this.state.currentLocation) {\n\n            let currentLat = this.state.currentLocation.latitude;\n\n            let currentLon = this.state.currentLocation.longitude;\n            let options = {\n                \"lat\": currentLat,\n                \"lon\": currentLon,\n                \"accuracy\": 6,\n                \"extras\": \"geo, tags\"\n            }\n\n            //create a list of locations\n            let existingLocations = [];\n\n            let list = [];\n\n            getFlickrPhotos(options).then(data => {\n\n                if (!data) {\n                    return undefined\n                }\n\n                let photos = data.photos.photo;\n\n                if (!photos[0]) {\n                    this.setState({ noLocations: true })\n                }\n\n                else {\n\n                    photos.forEach(\n\n                        photo => {\n\n                            let url = createFlickrImageUrl(photo);\n\n                            let title = photo.title;\n\n                            let woeId = photo.woeid;\n\n                            let locationId = photo.id; \n\n                            let tags = photo.tags;\n                            \n                            //prevent duplicate locations and locations with no tags\n                            if (woeId && !existingLocations.includes(woeId) && tags) {\n\n                                existingLocations.push(woeId);\n\n                                let location = {\n                                    \"src\": \"flickr\",\n                                    \"locationId\" : locationId, \n                                    \"thumbnail\": url,\n                                    \"title\": title,\n                                    \"woeId\" : woeId\n                                }\n\n                                let place = async (options) => {\n                                    let placeName = await getFlickrPlace(options);\n                                    return placeName\n                                }\n\n                                place({ \"woeId\": woeId }).then(placeName => {\n\n                                    if (placeName) {\n                                        location.title = placeName\n                                    }\n\n                                }).then(\n\n                                    list.push(location)\n\n                                )\n                            }\n                        }\n                    )\n\n                    this.setState({\n                        locationResults: list,\n                        noLocations: false\n                    })\n\n\n                }\n            }\n\n            )\n        }\n\n    }\n\n    suggestionClick(suggestion, e) {\n        \n        this.setState({query:suggestion.label})\n        let search = `address=${suggestion.label}&lat=${suggestion.lat}&lon=${suggestion.lon}`\n        this.props.history.push(`/explore/?q&${search}`);\n    }\n\n    componentDidMount() {\n\n        this._isMounted = true;\n\n         getCurrentLocation(\n            position => this._isMounted && this.setState({ currentLocation: position.coords }, () => { this.getNearbyLocations() }),\n            err => this._isMounted && this.setState({ errorMessage: err.message })\n        )\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n\n    render() {\n        let { query, locationResults, searchBarSuggestions } = this.state;\n\n        return (\n            <div className={`home`}>\n                <div className={`background-image`}>\n                    <div className={`container mobile-padding`}>\n                        <p className={`home-heading`}>Photo Atlas</p>\n                        <h2 className={`h5-font`}>Find new places to capture your best work.</h2>\n                        <SearchBar\n\n                            method={`get`}\n\n                            value={query}\n\n                            onChange={(e) => { this.handleInput(e) }}\n\n                            labelText=\"Where do you want to go?\"\n\n                            placeholder=\"Search a place\"\n\n                            onClick={(e) => this.handleSubmit(e)}\n\n                            searchSuggestions={searchBarSuggestions}\n\n                            handleSuggestion={(suggestion, e)=> {this.suggestionClick(suggestion)}}\n                        />\n\n\n                    </div>\n                </div>\n                <div className={`container mobile-padding`}>\n                    <h2 className={`h5-font`}>Explore Nearby</h2>\n                    {this.renderNearby(locationResults)}\n                </div>\n\n            </div>\n        )\n\n    }\n\n}\n\nexport default Home;","import PropTypes from 'prop-types';\nimport { Popup } from 'react-leaflet';\nimport { Link } from 'react-router-dom'\n\nfunction MapPopup(props) {\n\n    let {\n        thumbnail,\n        title,\n        src,\n        locationId,\n        woeId } = props;\n\n    if (!title) {\n        title = \"Unamed Location\"\n    }\n\n    let titleLength = title.length;\n\n    //keep the lenght of the title at 45 characters\n    if (titleLength > 150) {\n        let extraChars = 150 - titleLength;\n        let slicedTitle = title.slice(0, extraChars);\n        let lastSpace = slicedTitle.lastIndexOf(\" \");\n        slicedTitle = slicedTitle.slice(0, lastSpace);\n        title = `${slicedTitle}...`\n    }\n\n    return (\n        <Popup>\n            <div className={\"map-popup\"}>\n\n                <div className={\"location-popup-image\"}>\n                    <img src={thumbnail} alt=\"\" />\n                </div>\n                <Link to={ `/location/${src}-${locationId}?woe=${woeId}`} className={`title`}>{title}</Link>\n\n            </div>\n        </Popup>\n    )\n}\n\nMapPopup.propTypes = {\n    thumbnail: PropTypes.string,\n    title: PropTypes.string,\n    src: PropTypes.string,\n    locationId: PropTypes.string,\n    woeId: PropTypes.string\n}\n\n\nexport default MapPopup;","import PropTypes from 'prop-types';\nimport { useMap } from 'react-leaflet';\nfunction ChangeMapView(props) {\n    let { center, zoom } = props;\n    const map = useMap();\n    map.setView(center, zoom);\n    return null\n}\n\nChangeMapView.propTypes = {\n    center: PropTypes.arrayOf(PropTypes.number),\n    zoom:PropTypes.number\n}\n\nexport default ChangeMapView;\n/* \nExcept for its children, MapContainer props are immutable, and changes must be passed as events in children\nhttps://react-leaflet.js.org/docs/api-map/\nhttps://stackoverflow.com/questions/64665827/react-leaflet-center-attribute-does-not-change-when-the-center-state-changes*/","import React from 'react';\nimport { MapContainer, TileLayer, Marker } from 'react-leaflet';\nimport PropTypes from 'prop-types';\nimport MapPopup from '../map/MapPopUp'\n\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\nimport ChangeMapView from './ChangeMapView';\n\n/* fix marker icon not rendering */\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nlet DefaultIcon = L.icon({\n    iconUrl: icon,\n    shadowUrl: iconShadow\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\n\nfunction Map(props) {\n\n    let { locations, lat, lon, zoom } = props;\n\n    if (!locations) {\n        locations = []\n    }\n\n    if (!lat || !lon) {\n        lat = 34.36;\n        lon = -20.58;\n    }\n\n    let center = [lat, lon]\n\n    return (\n\n        <MapContainer center={center} zoom={10} >\n            <ChangeMapView center={center} zoom={zoom} />\n            <TileLayer\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            />\n\n\n            {locations.map((location, id) => {\n                const { thumbnail, title, destination, locationId, src, woeId } = location;\n\n                let lat = destination.latitude;\n                let lon = destination.longitude;\n\n                return (\n                    <Marker key={id} position={[lat, lon]}>\n                        <MapPopup \n                            thumbnail={thumbnail}\n                            title={title}\n                            locationId={locationId}\n                            src={src}\n                            woeId={woeId}\n                             />\n                    </Marker>\n                )\n            })\n\n            }\n\n        </MapContainer>\n\n    )\n}\n\nMap.propTypes ={\n    locations: PropTypes.arrayOf(PropTypes.object),\n    lat: PropTypes.number,\n    lon: PropTypes.number,\n    zoom:PropTypes.number\n}\n\nexport default Map;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Map from '../map/Map';\n\nclass MapWithCards extends React.Component {\n\n    state = {\n        openedMap: true\n    }\n\n    handleToggle = () => {\n        this.setState({ openedMap: !this.state.openedMap });\n    }\n\n    render() {\n        let { children, mapLoctaions, mapLat, mapLon, mapZoom } = this.props;\n\n        let { openedMap } = this.state;\n\n        let handleToggle = this.handleToggle;\n\n        let toggleBarClass = openedMap ? 'open' : 'close';\n\n        return (\n            <div className={`grid-map`}>\n\n                <div className={`cards-container ${toggleBarClass}`}>\n                    {children}\n                </div>\n\n                <div className={`map-container ${toggleBarClass}`}>\n\n                    <div className={`toggle-bar`} onClick={handleToggle.bind(this)}>\n                        <p>\n                            {openedMap ? 'Hide Map' : 'Show Map'}\n                        </p>\n\n                    </div>\n\n                    <div className={'map'}>\n                        <Map locations={mapLoctaions} lat={mapLat} lon={mapLon} zoom={mapZoom}/>\n                    </div>\n                </div>\n\n            </div>\n\n        )\n\n    }\n\n}\n\n\nMapWithCards.propTypes ={\n    mapLocations: PropTypes.arrayOf(PropTypes.object),\n    mapLat: PropTypes.number,\n    mapLon: PropTypes.number,\n    mapZoom:PropTypes.number\n}\n\n\n\nexport default MapWithCards;","function TwoCols(props) {\n\n    return (\n        <div className={`grid-2`}>\n            {props.children}\n        </div>\n    )\n\n}\n\nexport default TwoCols;","\nimport PropTypes from 'prop-types';\n\n\nimport TitleCard from '../cards/TtitleCard'\nimport TwoCols from '../../components/layout/TwoCols';\n\nfunction ResultsList(props) {\n\n    let { loaded, list, needLocation } = props;\n\n    let count = list.length;\n\n    if (!loaded) {\n        return <p>Getting Locations...</p>\n    }\n\n    if (loaded && count > 0) {\n        return (\n            <>\n            <div aria-live=\"polite\" className=\"sr-only\">\n                <p>Showing search results</p>\n            </div>\n            <TwoCols>\n            {list.map((location, id) => {\n                const { thumbnail, title, src, locationId, woeId } = location;\n\n                return (\n                    \n                    <TitleCard\n                        key={id}\n                        thumbnail={thumbnail}\n                        title={title}\n                        src={src}\n                        locationId={locationId}\n                        woeId={woeId}\n                        />\n                    \n                )\n\n            })}\n            </TwoCols>\n            </>\n        )\n\n    }\n\n    if (loaded && needLocation && count === 0) {\n        return (\n            <p aria-live=\"polite\">\n                Share your location to explore what's nearby.\n            </p>\n        )\n    }\n\n    if (loaded && count === 0 && !needLocation) {\n        return (\n            <p aria-live=\"polite\">\n                Sorry, no photo spots here yet.\n            </p>\n        )\n    }\n\n}\n\nResultsList.propTypes = {\n    loaded: PropTypes.bool.isRequired,\n    list: PropTypes.arrayOf(PropTypes.object).isRequired,\n    needLocation: PropTypes.bool\n}\n\nexport default ResultsList;","import PropTypes from 'prop-types';\n\nfunction CheckBox(props) {\n\n    let {\n        className,\n        id,\n        name,\n        labelText,\n        ...rest } = props;\n\n    return (\n        <>\n            <label className={`check-container ${className ? className : ''}` } htmlFor={name}>{labelText ? labelText : 'label'}\n                \n                <input\n                    \n                    type=\"checkbox\"\n\n                    className={`${className}`}\n                    \n                    id={id ? id : name}\n\n                    name={name}\n\n                    {...rest}\n\n                />\n\n                <span className={`checkmark`}></span>\n\n            </label>\n\n        </>\n    )\n}\n\nCheckBox.propTypes = {\n    className: PropTypes.string,\n    id: PropTypes.string,\n    name: PropTypes.string.isRequired,\n    labelText: PropTypes.string.isRequired,\n}\n\n\nexport default CheckBox;","import PropTypes from 'prop-types';\n\nfunction SubmitButton(props) {\n    \n    let { className, value, ...rest } = props;\n\n    return (\n        <input \n            type=\"submit\" \n\n            className={`${className ? className : 'default-button'}`} \n\n            value={value ? value : 'Submit'} \n\n            {...rest}\n\n        />\n    )\n}\n\nSubmitButton.propTypes = {\n    className: PropTypes.string,\n    value: PropTypes.string\n}\n\nexport default SubmitButton;","\n\n const filterTags = {\n    abandonedTags: 'abandoned, ruins, ghost',\n    architectureTags: 'architecture',\n    astroTags: 'astrophotography, stars, moon',\n    landscapeTags: 'landscape, mountains, outdoors',\n    sunriseTags: 'sunrise',\n    sunsetTags: 'sunset',\n    transportTags: 'transport, train, bus, boat, airplane, airport, transit',\n    peopleTags: 'people, portrait',\n    urbanTags: 'urban, cityscape, skyline, city',\n    waterTags: 'water, lake, river, ocean, waterfall, pond, reservoir, esplanade, sea',\n    natureTags: 'trees, flower, nature, foliage, leaves, grass, animals, forest, garden, park',\n    streetArtTags: 'graffiti, mural, sreet art'\n}\n\nexport default  filterTags;","import React from 'react';\nimport CheckBox from './CheckBox';\nimport SubmitButton from './SubmitButton';\nimport filterTags from '../../utils/filterTags'\n\n\nclass SubjectFilters extends React.Component {\n\n    state = {\n        open: false,\n        filters: {\n            abandoned: false,\n            architecture: false,\n            astro: false,\n            landscape: false,\n            sunrise: false,\n            sunset: false,\n            transport: false,\n            people: false,\n            urban: false,\n            water: false,\n            nature: false,\n            streetArt: false\n        },\n        formChanged: false,\n        previousFilters: []\n    }\n\n\n    componentDidUpdate(prevProps) {\n\n        if (this.props.resetFilters !== prevProps.resetFilters) {\n\n            if (this.props.resetFilters) {\n                this.setState(\n                    {\n                        filters:\n                        {\n                            abandoned: false,\n                            architecture: false,\n                            astro: false,\n                            landscape: false,\n                            sunrise: false,\n                            sunset: false,\n                            transport: false,\n                            people: false,\n                            urban: false,\n                            water: false,\n                            nature: false,\n                            streetArt: false\n                        }\n                    })\n            }\n\n        }\n\n\n    }\n\n\n    toggleDropdown() {\n        this.setState({ open: !this.state.open })\n    }\n\n    closeDropdown() {\n\n        if (this.state.formChanged && this.state.previousFilters) {\n            this.setState({ filters: this.state.previousFilters })\n        }\n        this.setState({ open: false, formChanged: false })\n\n    }\n\n    sendData(e) {\n        e.preventDefault();\n\n        let {\n            abandoned,\n            architecture,\n            astro,\n            landscape,\n            sunrise,\n            sunset,\n            transport,\n            people,\n            urban,\n            water,\n            nature,\n            streetArt\n        } = this.state.filters;\n\n\n        let abandonedTags = abandoned ? filterTags.abandonedTags : false;\n        let architectureTags = architecture ? filterTags.architectureTags : false;\n        let astroTags = astro ? filterTags.astroTags : false;\n        let landscapeTags = landscape ? filterTags.landscapeTags : false;\n        let sunriseTags = sunrise ? filterTags.sunriseTags : false;\n        let sunsetTags = sunset ? filterTags.sunsetTags : false;\n        let transportTags = transport ? filterTags.transportTags : false;\n        let peopleTags = people ? filterTags.peopleTags : false;\n        let urbanTags = urban ? filterTags.urbanTags : false;\n        let waterTags = water ? filterTags.urbanTags : false;\n        let natureTags = nature ? filterTags.natureTags : false;\n        let streetArtTags = streetArt ? filterTags.streetArtTags : false;\n\n        let filterString = '';\n        let allFilterTags = [\n            abandonedTags,\n            architectureTags,\n            astroTags,\n            landscapeTags,\n            sunriseTags,\n            sunsetTags,\n            transportTags,\n            peopleTags,\n            urbanTags,\n            waterTags,\n            natureTags,\n            streetArtTags\n        ];\n\n        let activeFilters = [];\n\n        allFilterTags.forEach(\n            filter => {\n                if (filter) {\n                    activeFilters.push(filter)\n                }\n            }\n        )\n\n\n        activeFilters.forEach(\n            (filter, index) => {\n                if (index === 0) {\n                    filterString = filterString.concat(filter)\n                } else {\n                    filterString = filterString.concat(`, ${filter}`)\n                }\n            }\n        )\n\n        this.setState({ open: !this.state.open, formChanged: false, previousFilters: this.state.filters })\n\n\n\n\n        return this.props.handleSubmit(filterString)\n    }\n\n\n    handleChange(e) {\n\n        let filter = e.target.name;\n\n        switch (filter) {\n            case 'abandoned':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        abandoned: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'architecture':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        architecture: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'astro':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        astro: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'landscape':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        landscape: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'sunrise':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        sunrise: e.target.checked      // update the value of specific key\n                    }\n                }))\n                break;\n            case 'sunset':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        sunset: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'transport':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        transport: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'people':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        people: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'urban':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        urban: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'water':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        water: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'nature':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        nature: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            case 'street-art':\n                this.setState(prevState => ({\n                    filters: {                   // object that we want to update\n                        ...prevState.filters,    // keep all other key-value pairs\n                        streetArt: e.target.checked      // update the value of specific key\n                    }\n                }));\n                break;\n            default:\n                console.log('filter does not exist')\n        }\n    }\n\n    render() {\n        let {\n            open\n        } = this.state;\n\n        let {\n            abandoned,\n            architecture,\n            astro,\n            landscape,\n            sunrise,\n            sunset,\n            transport,\n            people,\n            urban,\n            water,\n            nature,\n            streetArt\n        } = this.state.filters;\n\n        return (\n            <span className={`search-filter-container ${open ? 'open' : 'closed'}`} >\n                <button className={`search-filter`} onClick={(e) => { this.toggleDropdown() }}>\n                    Filter by Subject\n                </button>\n                <div className={`search-filter-dropdown`}>\n                    <button className={`close-button`} onClick={() => this.closeDropdown()}>Close</button>\n                    <form onChange={() => { this.setState({ formChanged: true }) }}>\n                        <CheckBox name=\"abandoned\" checked={abandoned} labelText=\"Abandoned\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"architecture\" checked={architecture} labelText=\"Architecture\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"astro\" checked={astro} labelText=\"Astrophotography\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"landscape\" checked={landscape} labelText=\"Landscape\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"nature\" checked={nature} labelText=\"Nature\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"street-art\" checked={streetArt} labelText=\"Street Art\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"sunrise\" checked={sunrise} labelText=\"Sunrise\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"sunset\" checked={sunset} labelText=\"Sunset\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"transport\" checked={transport} labelText=\"Transport\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"people\" checked={people} labelText=\"People\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"urban\" checked={urban} labelText=\"Urban\" onChange={(e) => { this.handleChange(e) }} />\n                        <CheckBox name=\"water\" checked={water} labelText=\"Water\" onChange={(e) => { this.handleChange(e) }} />\n                        \n                        \n\n                        <SubmitButton onClick={(e) => { this.sendData(e) }} value=\"Apply Filters\" />\n                    </form>\n                </div>\n            </span>\n        )\n    }\n}\n\nexport default SubjectFilters;","import React from 'react';\n\nimport SearchBar from '../../components/forms/SearchBar';\nimport MapWithCards from '../../components/layout/MapWithCards';\n\nimport getFlickrPhotos from '../../utils/flickr/getFlickrPhotos';\nimport createFlickrImageUrl from '../../utils/flickr/createFlickrImageUrl';\nimport getFlickrPlace from '../../utils/flickr/getFlickrPlace';\nimport getCurrentLocation from '../../utils/getCurrentLocation';\nimport ResultsList from '../../components/content/ResultsList';\nimport getGeoSuggestions from '../../utils/getGeoSuggestions'\nimport SubjectFilters from '../../components/forms/SubjectFilters';\n\nclass SearchResults extends React.Component {\n    state = {\n        query: '',\n        loaded: false,\n        searchResults: [],\n        mapLat: null,\n        mapLon: null,\n        mapZoom: 10\n    }\n\n    _isMounted = false;\n\n    getSearchResults = (lat, lon, tags) => {\n\n        let searchLat = lat;\n\n        let searchLon = lon;\n\n        let options = {\n            \"lat\": searchLat,\n            \"lon\": searchLon,\n            \"extras\": \"geo, tags\",\n            \"accuracy\": 6\n        }\n\n        if (tags) {\n            options.tags = tags\n        }\n\n        //create a list of locations\n        let existingLocations = [];\n\n        let list = [];\n\n\n        //get from firebase\n        //in firebase I need to store the photo.id and the photo.woeid\n\n\n        //get from Flickr\n\n        getFlickrPhotos(options).then(data => {\n\n            let photos;\n\n            if (data) {\n                photos = data.photos\n            }\n\n\n            if (!photos) {\n                return this.setState({ loaded: true })\n            }\n\n            else {\n\n                photos = photos.photo\n\n\n                photos.forEach(\n\n                    photo => {\n\n                        let url = createFlickrImageUrl(photo);\n\n                        let title = photo.title;\n\n                        let lat = photo.latitude;\n\n                        let lon = photo.longitude;\n\n                        let woeId = photo.woeid;\n\n                        let locationId = photo.id;\n\n                        let tags = photo.tags;\n\n\n                        // prevent duplicate locations, and locations with no tags\n                        if (woeId && !existingLocations.includes(woeId) && tags ) {\n\n                            \n                            //add photo locations to existing list\n                            existingLocations.push(woeId);\n\n                            let location = {\n                                \"src\": \"flickr\", //added,\n                                \"locationId\": locationId,\n                                \"woeId\" : woeId,\n                                \"thumbnail\": url,\n                                \"title\": title,\n                                \"destination\": {\n                                    \"latitude\": parseFloat(lat),\n                                    \"longitude\": parseFloat(lon)\n                                }\n                            }\n\n    \n                            let place = async (options) => {\n                                let placeName = await getFlickrPlace(options);\n                                return placeName\n                            }\n\n                            place({ \"woeId\": woeId }).then(placeName => {\n\n                                if (placeName) {\n                                    location.title = placeName\n                                }\n\n                            }).then(\n\n                                list.push(location)\n\n                            )\n                        }\n                    }\n                )\n\n                this.setState({\n                    searchResults: list,\n                    loaded: true,\n                    mapLat: parseFloat(searchLat),\n                    mapLon: parseFloat(searchLon),\n                    mapZoom: 10,\n                    resetFilters: false\n                })\n\n            }\n\n        }\n\n        )\n\n    }\n\n    handleInput(e) {\n        this.setState(\n\n            { query: e.target.value },\n\n            () => {\n\n                if (!this.state.query) {\n                    this.setState({ searchBarSuggestions: '' })\n                }\n                else {\n                    getGeoSuggestions(this.state.query).then(results => this.setState({ searchBarSuggestions: results }))\n                }\n\n            })\n\n    }\n\n    handleSubmit(e) {\n\n        e.preventDefault();\n\n        this.setState({ searchResults: [], loaded: false, needLocation: false, resetFilters: true });\n\n        if (!this.state.searchBarSuggestions && !this.state.query) {\n            this.setState({ loaded: true, mapZoom: 1.5, resetFilters: false })\n        } else {\n\n            this.setState({ resetFilters: true });\n\n            let suggestion;\n\n            if (this.state.searchBarSuggestions) {\n                suggestion = this.state.searchBarSuggestions[0];\n            } else {\n                suggestion = {\n                    \"label\": this.state.query,\n                    \"y\": this.state.mapLat,\n                    \"x\": this.state.mapLon\n                }\n            }\n\n\n            this.setState({ query: suggestion.label, searchBarSuggestions: '' });\n\n            let address = suggestion.label;\n\n            let lat = suggestion.y;\n\n            let lon = suggestion.x;\n\n            let search = `address=${address}&lat=${lat}&lon=${lon}`\n\n            this.props.history.push(`/explore/?q=&${search}`)\n\n            getCurrentLocation(\n                (position) => this.setState({ currentLocation: position.coords },\n                    () => this.getSearchResults(lat, lon))\n            )\n        }\n\n\n\n    }\n\n    findNearby() {\n        this.setState({ searchResults: [], loaded: false, query: 'Current Location' });\n        this.props.history.push(`/explore/`)\n\n        getCurrentLocation(\n            (position) =>\n\n                this.setState({ currentLocation: position.coords },\n                    () => {\n                        let lat = this.state.currentLocation.latitude;\n                        let lon = this.state.currentLocation.longitude;\n\n                        this.getSearchResults(lat, lon)\n                    }),\n\n            () => this.setState({ loaded: true, needLocation: true, mapZoom: 1.5 })\n        )\n    }\n\n    suggestionClick(suggestion) {\n\n        this.setState({\n            searchResults: [],\n            loaded: false,\n            needLocation: false,\n            query: suggestion.label,\n            searchBarSuggestions: '',\n            resetFilters: true\n        });\n\n\n        let search = `address=${suggestion.label}&lat=${suggestion.lat}&lon=${suggestion.lon}`\n\n        this.props.history.push(`/explore/?q=&${search}`)\n\n        if (!suggestion.lat || !suggestion.lon) {\n            this.setState({ loaded: true, mapZoom: 1.5, resetFilters: false })\n        } else {\n            let lat = suggestion.lat;\n            let lon = suggestion.lon;\n            getCurrentLocation(\n                (position) => this.setState(\n                    { currentLocation: position.coords },\n                    () => this.getSearchResults(lat, lon))\n            )\n        }\n\n    }\n\n    handleFilters(data) {\n\n        this.setState({ searchResults: [], loaded: false, needLocation: false });\n\n        if (!this.state.searchBarSuggestions && !this.state.query) {\n            this.setState({ loaded: true, mapZoom: 1.5 })\n        } else {\n\n            let suggestion = {\n                \"label\": this.state.query,\n                \"y\": this.state.mapLat,\n                \"x\": this.state.mapLon\n            }\n\n\n            let address = suggestion.label;\n\n            let lat = suggestion.y;\n\n            let lon = suggestion.x;\n\n            let search = `address=${address}&lat=${lat}&lon=${lon}`\n\n            this.props.history.push(`/explore/?q=&${search}`)\n\n            getCurrentLocation(\n                (position) => this.setState({ currentLocation: position.coords },\n                    () => this.getSearchResults(lat, lon, data))\n            )\n        }\n    }\n\n    componentDidMount() {\n        let query = decodeURIComponent(this.props.location.search);\n\n        let searchParams = new URLSearchParams(query);\n\n        this._isMounted = true\n\n        if (!searchParams.has(\"lon\") || !searchParams.has(\"lat\")) {\n\n            this._isMounted && this.setState({ loaded: true, mapZoom: 1.5 })\n\n        } else {\n            let address = searchParams.get(\"address\");\n\n            let lat = searchParams.get(\"lat\");\n\n            let lon = searchParams.get(\"lon\");\n\n            this._isMounted && this.setState({ query: address });\n\n            getCurrentLocation(\n                (position) => this._isMounted && this.setState({ currentLocation: position.coords },\n\n                    this.getSearchResults(lat, lon)),\n\n                () => this.getSearchResults(lat, lon)\n            )\n        }\n    }\n\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n\n    render() {\n\n        let { query, searchResults, loaded, mapLat, mapLon, mapZoom, needLocation, searchBarSuggestions } = this.state;\n\n        return (\n            <div className={`search`}>\n\n                <div className={`dark-background`}>\n                    <div className={`container mobile-padding header-container`}>\n                        <SearchBar\n                            labelText=\"Location\"\n                            backSearch\n                            placeholder=\"Search a place\"\n                            value={query}\n                            onChange={(e) => { this.handleInput(e) }}\n                            onClick={(e) => this.handleSubmit(e)}\n                            searchSuggestions={searchBarSuggestions}\n                            handleSuggestion={(suggestion) => { this.suggestionClick(suggestion) }}\n                        />\n                        <SubjectFilters handleSubmit={(data) => this.handleFilters(data)} resetFilters={this.state.resetFilters} />\n                        <button className={`search-filter`} onClick={() => { this.findNearby() }}>Spots Near Me</button>\n                    </div>\n                </div>\n\n                <div className={`container`}>\n\n                    <MapWithCards\n                        mapLoctaions={searchResults}\n                        mapLat={mapLat}\n                        mapLon={mapLon}\n                        mapZoom={mapZoom}\n\n                    >\n                        <ResultsList loaded={loaded} list={searchResults} needLocation={needLocation} />\n\n                    </MapWithCards>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SearchResults;","import PropTypes from 'prop-types'\n\nfunction Modal({ modalId, modalTitle, modalDescription, isOpen, handleClose, children } ) {\n\n    let modalTitleId = `${modalId}-title`\n\n    function closeModal() {\n        handleClose(); //this should set props.isOpen to false on the parent\n    }\n\n    return (\n        <>\n            <div\n                className={`${isOpen ? 'open' : 'closed'} modal-overlay`}\n\n                onClick={() => closeModal()}\n\n                tabIndex=\"-1\">\n            </div>\n            <div id={modalId} className={`${isOpen ? 'open' : 'closed'} modal-wrapper ${modalId}`}>\n\n                <div className=\"modal-body\" role=\"dialog\" aria-modal=\"true\" aria-labelledby={`${modalTitleId}`}>\n\n                    <button className={`close-button`} onClick={() => closeModal()}>Close</button>\n\n                    <div aria-live=\"polite\" className=\"modal-header\">\n                        <h2 id={`${modalTitleId}`}>\n                            {modalTitle}\n                        </h2>\n                        <h3>{modalDescription}</h3>\n                    </div>\n\n                    <div className=\"modal-main\">\n                        {children}\n                    </div>\n                </div>\n\n            </div>\n        </>\n    )\n}\n\nModal.propTypes = {\n    modalId: PropTypes.string, \n    modalTitle: PropTypes.string, \n    modalDescription: PropTypes.string,\n    isOpen: PropTypes.bool,\n    handleClose: PropTypes.func.isRequired,\n    initiallyOpen: PropTypes.bool\n}\n\nexport default Modal;","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport firebase from '../../utils/firebase/firebaseConfig'\n\nimport Modal from './Modal'\n\n\nclass ResetPasswordModal extends React.Component {\n    state = {\n        error: '',\n        successReset: false\n    }\n\n    _isMounted = false;\n\n    closeModal() {\n        this.setState({\n            confirmReset: false\n        }, () => this.props.handleClose());\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n    resetPassword(e) {\n        e.preventDefault();\n\n        let auth = firebase.auth();\n\n        let emailAddress = this.props.email;\n\n        let logInLocation = this.props.logInLocation;\n\n        let form = this;\n\n        form.setState({ error: '' })\n\n        let actionCodeSettings = { url: `https://photoatlas.app/${logInLocation}` }\n\n\n       this._isMounted && auth.sendPasswordResetEmail(emailAddress, actionCodeSettings)\n       .then(() => {\n                form.setState({ successReset: true })\n            }\n            ).catch(function (error) {\n                form.setState({\n                    error: error.message,\n                    successReset: false\n                })\n            });\n    }\n\n    render() {\n\n        return (\n            <Modal\n                modalId='reset-password-modal'\n                modalTitle={\"Reset Password\"}\n                isOpen={this.props.isOpen}\n                handleClose={() => this.closeModal()}\n            >\n\n                <div className=\"modal-content-padding center-text\">\n\n                    {!this.state.error && !this.state.successReset && \n                    <h3 className=\"h5-font\">Are you sure you want to reset your password?</h3>}\n                    {this.state.error &&\n                        <p className=\"error-font\" aria-live=\"polite\">\n                            {this.state.error}\n                        </p>\n                    }\n                    {this.state.successReset &&\n                        <p className=\"success-font\" aria-live=\"polite\">\n                            Check your email to reset your password.\n                        </p>}\n                        <ul className=\"button-group\">\n                            <li><button onClick={(e) => this.resetPassword(e)} className=\"default-button\">Reset Password</button></li>\n                            <li><button onClick={() => this.closeModal()} className=\"button-link\">Cancel</button></li>\n                        </ul>\n                </div>\n\n            </Modal>\n        )\n    }\n}\n\nResetPasswordModal.propTypes = {\n    email: PropTypes.string,\n    handleClose: PropTypes.func.isRequired,\n    logInLocation: PropTypes.string.isRequired,\n    isOpen: PropTypes.bool.isRequired\n}\n\nexport default ResetPasswordModal;","import PropTypes from 'prop-types';\n\nfunction TextInput(props) {\n\n    let { className, ...rest } = props;\n\n    return <input type=\"text\" className={`text-bar ${className ? className : ''}`} {...rest} />\n    \n}\n\nTextInput.propTypes = {\n    className: PropTypes.string\n}\n\nexport default TextInput;","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport firebase from '../../utils/firebase/firebaseConfig'\nimport TextInput from '../forms/TextInput'\nimport Modal from './Modal'\n\n\nclass ChangeDisplayNameModal extends React.Component {\n    state = {\n        error: '',\n        newName: '',\n        currentName: '',\n        loading: false\n    }\n\n    closeModal() {\n        this.setState({\n            confirmReset: false\n        }, () => this.props.handleClose());\n    }\n\n    handleInput(e) {\n        this.setState({ newName: e.target.value })\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n        // this.updateUser();\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n    updateUser() {\n        if (this._isMounted) {\n\n            let user = firebase.auth().currentUser;\n\n            if (user) {\n                this.setState({\n                    currentName: user.displayName\n                })\n            }\n        }\n    }\n\n\n\n    changeDisplayName(e) {\n        e.preventDefault();\n        let form = this;\n\n        form.setState({ error: '', loading: true })\n\n        let user = firebase.auth().currentUser;\n\n        let newName = this.state.newName;\n\n        \n\n        \n\n        //check that name and lastname does not include special characters, except for hypens\n        let testString = /^[a-zA-Z][ a-zA-Z \\-' -]+$/;\n\n\n        if (!testString.test(newName)) {\n            form.setState({ error: \"Display can only contain letters, apostrophes, hypens and spaces.\" })\n        } else {\n                let database = firebase.database();\n\n                let userId = user.uid\n                \n\n                database.ref(`users/${userId}`).update({\n                    displayName: newName\n                }\n                   \n                ).catch((error) => {\n                    console.log(error)\n                })\n           // })\n            .then(function () {\n                // Update successful.\n                form.props.triggerUpdate();\n                form.props.handleClose()\n                form.setState({loading: false})\n            }).catch(function (error) {\n                // An error happened.\n                form.setState({error: error.message, loading: false})\n            });\n\n        }\n\n    }\n\n    render() {\n\n        return (\n            <Modal\n                modalId='reset-password-modal'\n                modalTitle={\"Change Display Name\"}\n                isOpen={this.props.isOpen}\n                handleClose={() => this.closeModal()}\n            >\n\n                <div className=\"modal-content-padding\">\n\n\n                    {this.state.error &&\n                        <p className=\"error-font\" aria-live=\"polite\">\n                            {this.state.error}\n                        </p>\n                    }\n                    <label htmlFor=\"new-name\">New Name</label>\n                    <TextInput id=\"new-name\" value={this.state.newName ? this.state.newName : this.state.currentName} onChange={(e) => this.handleInput(e)} />\n\n\n                    <div aria-live=\"polite\">\n                        <button onClick={(e) => this.changeDisplayName(e)} className=\"default-button\">\n                            {this.state.loading ? 'Changing Name' : 'Change Display Name'}\n                        </button>\n                    </div>\n                </div>\n\n            </Modal>\n        )\n    }\n}\n\nChangeDisplayNameModal.propTypes = {\n    handleClose: PropTypes.func.isRequired,\n    triggerUpdate: PropTypes.func.isRequired,\n    isOpen: PropTypes.bool.isRequired\n}\n\nexport default ChangeDisplayNameModal;","\nimport React from 'react'\nimport firebase from '../utils/firebase/firebaseConfig'\nimport ResetPasswordModal from '../components/modals/ResetPasswordModal'\nimport ChangeDisplayNameModal from '../components/modals/ChangeDisplayName'\n\n\nclass Account extends React.Component {\n\n    state = {\n        displayName: '',\n        email: '',\n        successReset: false,\n        resetPassword: false,\n        changeName: false\n    }\n\n\n    _isMounted = false;\n\n\n\n    componentDidMount() {\n        this._isMounted = true;\n        this.updateUser();\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    openPasswordModal() {\n        this.setState({ resetPassword: true })\n    }\n\n    closePasswordModal() {\n        this.setState({ resetPassword: false })\n    }\n\n    openDisplayNameModal() {\n        this.setState({ changeName: true })\n    }\n\n    closeDisplayNameModal() {\n        this.setState({ changeName: false })\n    }\n\n    updateUser() {\n\n        let component = this;\n\n        if (this._isMounted) {\n\n            let user = firebase.auth().currentUser;\n            let userId = user.uid;\n\n            if (userId) {\n                let database = firebase.database();\n\n\n                database.ref(`users/${userId}`).get().then(function (snapshot) {\n                    if (snapshot.exists()) {\n\n                        let displayName = snapshot.val().displayName;\n                        let email = user.email;\n\n\n\n                        component.setState({\n                            displayName: displayName,\n                            email: email\n                        })\n                    }\n                    else {\n                        console.log(\"No data available\");\n                    }\n                }).catch(function (error) {\n                    console.error(error);\n                });\n\n\n\n            }\n        }\n    }\n\n    render() {\n\n        return (\n            <>\n                <div className={`container trips mobile-padding`}>\n                    <h2>Account Settings</h2>\n                    <ul className=\"settings-list\">\n                        <li aria-live=\"polite\">\n                            Display Name: {this.state.displayName}\n                            <button onClick={() => this.openDisplayNameModal()} className=\"secondary-button\">Change Display Name</button>\n                        </li>\n                        <li>\n                            <p>Email: {this.state.email}</p>\n                        </li>\n                        <li>\n                            Password: **** <button onClick={() => this.openPasswordModal()} className=\"secondary-button\">Reset Password</button>\n                        </li>\n                    </ul>\n\n                    <button className=\"button-link\"\n                        onClick={\n                            () => {\n                                firebase.auth().signOut()\n                            }\n                        }>Sign Out</button>\n                </div>\n                <ResetPasswordModal\n                    email={this.state.email}\n                    handleClose={() => this.closePasswordModal()}\n                    logInLocation=\"account\"\n                    isOpen={this.state.resetPassword}\n                />\n\n                <ChangeDisplayNameModal\n                    handleClose={() => this.closeDisplayNameModal()}\n                    isOpen={this.state.changeName}\n                    triggerUpdate={() => this.updateUser()}\n                />\n\n            </>\n        )\n\n    }\n}\n\nexport default Account;","function OneToTwoCols(props) {\n\n    return (\n        <div className={`grid-1_2`}>\n            {props.children}\n        </div>\n    )\n\n}\n\nexport default OneToTwoCols;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom'\n\n\nfunction TripCard(props) {\n\n    let {\n        thumbnail,\n        title,\n        tripId,\n        isPublic,\n        isShared,\n        locationsCount } = props;\n\n    return (\n        <Link className={`trip-card`} to={ `/trip/${tripId}?privacy=${isPublic ? 'public' : 'private'}`}>\n\n            <div className={`trip-card-image`}>\n                <img src={thumbnail} alt=\"\" />\n            </div>\n            <div className={`trip-card-content`}>\n                <p className={`title`}>{title}</p>\n                <p className={`meta-data ${isPublic ? 'public' : 'private'}`}>\n                    {isPublic ? 'Public' : isShared ? 'Shared' : 'Private'}</p>\n                <p className={`meta-data marker`}>\n                   {locationsCount} {(locationsCount > 1 || locationsCount < 1) ? 'Locations' : 'Location'}</p>\n            </div>\n\n        </Link>\n    )\n\n}\n\nTripCard.propTypes = {\n    thumbnail: PropTypes.string,\n    title: PropTypes.string,\n    isPublic: PropTypes.bool,\n    locationCount: PropTypes.number,\n    tripId: PropTypes.string,\n    isShared: PropTypes.bool\n}\n\n\nexport default TripCard;","import firebase from './firebase/firebaseConfig'\n\nlet getPublicTrips = (callback) => {\n   \n    let database = firebase.database();\n    let existingTrips = [];\n\n    database.ref(`publicTrips`).get().then((snapshot) => {\n\n        let trips = snapshot.val();\n\n\n        for (const tripId in trips) {\n     \n                    //get title\n                    let title = trips[tripId]['tripName']\n\n                    //get locationsCount\n                    let locationsCount = trips[tripId]['locationsCount']\n\n                    //get thumnail\n                    let thumbnail = trips[tripId]['featuredImg']\n\n\n                    let existingTripUpdate = {\n                        tripId: tripId,\n                        thumbnail: thumbnail,\n                        title: title,\n                        locationsCount: locationsCount,\n                        isPublic: true\n                    }\n\n                    existingTrips.push(existingTripUpdate)\n        }\n\n        return existingTrips\n    }).catch(error => console.log(error)).then((existingTrips) => callback(existingTrips))\n}\n\nexport default getPublicTrips;","import React from 'react'\nimport OneToTwoCols from '../../components/layout/OneToTwoCols'\nimport TripCard from '../../components/cards/TripCard'\nimport getPublicTrips from '../../utils/getPublicTrips'\n\n\n\n\nclass PublicTrips extends React.Component {\n    state = {\n        existingTrips: [],\n        loading: true\n    }\n\n    _isMounted = false;\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    renderPublicTrips() {\n        let { existingTrips, loading } = this.state;\n\n        getPublicTrips((tripsList) => {\n            this._isMounted && this.setState({ existingTrips: tripsList, loading: false })\n        })\n\n        if (loading) {\n            return (\n                <div aria-live=\"polite\">\n                    <p>Getting Trips...</p>\n                </div>\n            )\n        } else {\n            if (existingTrips.length > 0) {\n                return (<>\n                    <div aria-live=\"polite\" className=\"sr-only\">\n                        <p>Showing all trips</p>\n                    </div>\n                    <OneToTwoCols>\n                        {existingTrips.map((trip, index) => {\n                            let {\n                                thumbnail,\n                                title,\n                                locationsCount,\n                                isPublic,\n                                tripId } = trip;\n\n                            return (\n                                <TripCard\n                                    key={index}\n                                    thumbnail={thumbnail}\n                                    title={title}\n                                    tripId={tripId}\n                                    isPublic={isPublic}\n                                    locationsCount={locationsCount}\n                                />\n                            )\n                        })}\n                    </OneToTwoCols>\n                </>)\n            } else {\n                return (\n                    <div aria-live=\"polite\">\n                        <p>No trips here yet.</p>\n                    </div>\n                )\n            }\n\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    render() {\n        return (\n            <>\n\n                {this.renderPublicTrips()}\n\n            </>\n        )\n    }\n\n}\n\n\n\nexport default PublicTrips;","import PropTypes from 'prop-types';\n\nfunction EmailInput(props) {\n\n    let { className, ...rest} = props;\n\n    return <input type=\"email\" className={`text-bar ${className ? className : ''}`} {...rest} />\n}\n\nEmailInput.propTypes = {\n    className: PropTypes.string\n}\n\nexport default EmailInput;","import PropTypes from 'prop-types';\nimport React from 'react'\nimport CheckBox from './CheckBox'\n\n\nclass PasswordInput extends React.Component {\n    state = {\n        type: \"password\"\n    }\n\n    changeType() {\n        if (this.state.type === \"password\") {\n            this.setState(\n                { type: \"text\" }\n            )\n        }\n        else {\n            this.setState(\n                { type: \"password\" }\n            )\n\n        }\n    }\n\n    render() {\n\n        let { className, checkName, ...rest } = this.props;\n\n\n        return (\n            <>\n                <input type={this.state.type} \n                    className={`text-bar ${className ? className : ''}`} \n                    {...rest} \n                  /><br/>\n                \n\n            <CheckBox className=\"show-pass\" name={checkName ?  checkName : 'show-pass'} onChange={() => { this.changeType()}} labelText=\"Show password\" />\n\n            </>\n        )\n    }\n\n}\n\nPasswordInput.propTypes = {\n    className: PropTypes.string\n}\n\n\nexport default PasswordInput;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EmailInput from '../../components/forms/EmailInput'\nimport PasswordInput from '../../components/forms/PasswordInput'\nimport SubmitButton from '../../components/forms/SubmitButton'\nimport firebase from '../../utils/firebase/firebaseConfig'\n\n\n\nclass SignIn extends React.Component {\n\n  state = {\n    email: '',\n    emailError: '',\n    successReset: false,\n    forgotPassword: false\n  }\n\n  handleEmailInput(e) {\n    this.setState({ email: e.target.value })\n  }\n\n  togglePasswordReset(e) {\n    e.preventDefault();\n    this.setState({forgotPassword: !this.state.forgotPassword})\n  }\n\n  resetPassword(e) {\n    e.preventDefault();\n\n    let auth = firebase.auth();\n\n    let emailAddress = this.state.email;\n\n    let logInLocation = this.props.logInLocation;\n\n    let form = this;\n\n    form.setState({emailError:''})\n\n    let actionCodeSettings = { url: `http://localhost:3000/${logInLocation}` }\n\n\n    auth.sendPasswordResetEmail(emailAddress, actionCodeSettings).\n    then(() => {\n        form.setState({successReset: true, forgotPassword: false, email: ''})\n    } \n    ).catch(function (error) {\n        form.setState({\n          emailError: error.message, \n          forgotPassword: true, \n          successReset: false\n        })\n    });\n  }\n\n\n  render() {\n    return (\n      <>\n        <div className={`container mobile-padding`}>\n          <div className={this.props.hideTitle ? \"hidden\" : \"visible\"}>\n            {this.props.tabContent ? <h3>Sign In</h3> : <h2>Sign In</h2>}\n\n            {this.props.tabContent ?\n              <h4 className=\"h5-font\">Sign in to {this.props.introtext}.</h4> :\n              <h3 className=\"h5-font\">Sign in to {this.props.introtext}.</h3>}\n          </div>\n\n    \n          <p className={`${this.state.successReset ? \"visible\" : \"hidden\"} success-font`} aria-live=\"polite\">Check your email to reset your password.</p> \n\n          <form className={this.state.forgotPassword? 'hidden' : 'visible'} action={\"/\"} onSubmit={(e) => this.props.handleSubmit(e)}>\n\n            <div className=\"form-component-wrapper\">\n              <label htmlFor=\"email\">Email</label>\n              <EmailInput autoComplete=\"username\"\n                id=\"email\"\n                value={this.props.email}\n                onChange={(e) => this.props.handleEmailInput(e)} required />\n              {this.props.emailError && <p className=\"error-font\" aria-live=\"polite\">{this.props.emailError}</p>}\n            </div>\n\n            <div className=\"form-component-wrapper\">\n              <label htmlFor=\"pass\">Password</label>\n              <PasswordInput autoComplete=\"current-password\"\n                id=\"pass\"\n                value={this.props.password}\n                onChange={(e) => this.props.handlePassInput(e)} required />\n              {this.props.passError && <p className=\"error-font\" aria-live=\"polite\">{this.props.passError}</p>}\n            </div>\n\n            <div className=\"form-component-wrapper\">\n              <SubmitButton value={`${this.props.loading ? 'Signing In...' : 'Sign In'}`} />\n            </div>\n\n          </form>\n\n          <div className={`${this.state.forgotPassword ? 'hidden' : 'visible'} form-component-wrapper`}>\n              <button\n                onClick={(e) => { this.togglePasswordReset(e) }}\n                className=\"secondary-button forgot-pass\">Forgot password?</button>\n            </div>\n\n          <form className={this.state.forgotPassword ? 'visible' : 'hidden'} action={\"/\"}  onSubmit={(e) => this.resetPassword(e)}>\n            <div className=\"form-component-wrapper\">\n              \n              <label htmlFor=\"password-reset-email\">Email</label>\n              \n              <EmailInput id=\"password-reset-email\"\n                value={this.state.email}\n\n                onChange={(e) => this.handleEmailInput(e)} required />\n              \n                {this.state.emailError && <p className=\"error-font\"\n                aria-live=\"polite\">\n                  {this.state.emailError}\n                  </p>}\n            </div>\n            \n            <div className=\"form-component-wrapper\">\n              <SubmitButton value=\"Reset Password\" />\n            </div>\n          </form>\n\n\n          <div className={`${this.state.forgotPassword ? 'visible' : 'hidden'} form-component-wrapper`}>\n            <button className=\"button-link\" onClick={(e) => { this.togglePasswordReset(e) }}>\n              Sign In\n              </button>\n          </div>\n\n\n        </div>\n      </>\n    )\n\n  }\n\n}\n\n\n\nSignIn.propTypes = {\n  introtext: PropTypes.string,\n  handleSubmit: PropTypes.func,\n  email: PropTypes.string,\n  handleEmailInput: PropTypes.func,\n  emailError: PropTypes.string,\n  password: PropTypes.string,\n  handlePassInput: PropTypes.func,\n  passError: PropTypes.string,\n  tabContent: PropTypes.bool,\n  hiddeTitle: PropTypes.bool,\n  logInLocation: PropTypes.string\n}\n\n\nexport default SignIn;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EmailInput from '../../components/forms/EmailInput'\nimport TextInput from '../../components/forms/TextInput'\nimport PasswordInput from '../../components/forms/PasswordInput'\nimport SubmitButton from '../../components/forms/SubmitButton'\n\n\n\nfunction SignUp(props) {\n\n  return (\n    <>\n      <div className={`container mobile-padding`}>\n        <div className={props.hideTitle ? \"hidden\" : \"visible\"}>\n          {props.tabContent ? <h3>Sign Up</h3> : <h2>Sign Up</h2>}\n\n          {props.tabContent ?\n            <h4 className=\"h5-font\">Create an account to {props.introtext}.</h4> :\n            <h3 className=\"h5-font\">Create an account to {props.introtext}.</h3>}\n        </div>\n        <form action={\"/\"} onSubmit={(e) => props.handleSubmit(e)}>\n\n\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"firstname\">Name</label>\n            <TextInput autoComplete=\"name\" id=\"firstname\" value={props.firstname} onChange={(e) => props.handleNameInput(e)} required />\n            {props.nameError && <p className=\"error-font\" aria-live=\"polite\">{props.nameError}</p>}\n          </div>\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"lastname\">Last Name <span>(Optional)</span></label>\n            <TextInput autoComplete=\"lastname\" id=\"lastname\" value={props.lastname} onChange={(e) => props.handleLastnameInput(e)} />\n            {props.lastnameError && <p className=\"error-font\" aria-live=\"polite\">{props.lastnameError}</p>}\n          </div>\n\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"email\">Email</label>\n            <EmailInput autoComplete=\"username\" id=\"email\" value={props.email} onChange={(e) => props.handleEmailInput(e)} required />\n            {props.emailError && <p className=\"error-font\" aria-live=\"polite\">{props.emailError}</p>}\n          </div>\n\n\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"pass\">Password (6 characters minimum)</label>\n            <PasswordInput autoComplete=\"new-password\" id=\"pass\" value={props.password} onChange={(e) => props.handlePassInput(e)} required />\n            {props.passError && <p className=\"error-font\" aria-live=\"polite\">{props.passError}</p>}\n          </div>\n\n\n          <div className=\"form-component-wrapper\">\n            <label htmlFor=\"confirm-pass\">Confirm Password</label>\n            <PasswordInput  autoComplete=\"new-password\" checkName=\"show-confirm-pass\" id=\"confirm-pass\" value={props.confirmPassword} onChange={(e) => props.handleConfirmPassInput(e)} required />\n            {props.confirmPassError && <p className=\"error-font\" aria-live=\"polite\">{props.confirmPassError}</p>}\n          </div>\n\n          <div className=\"form-component-wrapper\">\n            <SubmitButton value={`${props.loading ? 'Creating Account...' : 'Create Account'}`} />\n          </div>\n\n        </form>\n      </div>\n    </>\n  )\n\n}\n\n\n\nSignUp.propTypes = {\n  introtext: PropTypes.string,\n  handleSubmit: PropTypes.func,\n  name: PropTypes.string,\n  handleNameInput: PropTypes.func,\n  nameError: PropTypes.string,\n  lastname: PropTypes.string,\n  handleLastnameInput: PropTypes.func,\n  lastnameError: PropTypes.string,\n  email: PropTypes.string,\n  handleEmailInput: PropTypes.func,\n  emailError: PropTypes.string,\n  password: PropTypes.string,\n  handlePassInput: PropTypes.func,\n  passError: PropTypes.string,\n  confirmPassword: PropTypes.string,\n  handleConfirmPassInput: PropTypes.func,\n  confirmPassError: PropTypes.string,\n  tabContent: PropTypes.bool,\n  hiddeTitle: PropTypes.bool\n}\n\n\nexport default SignUp;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport firebase from '../../utils/firebase/firebaseConfig'\n\nimport SignIn from './SignIn'\nimport SignUp from './SignUp'\n\n\n\nclass Authenticate extends React.Component {\n\n    state = {\n        newUser: false,\n        firstname: '',\n        lastname: '',\n        email: '',\n        password: '',\n        confirmPassword: '',\n        emailError: '',\n        passError: '',\n        confirmPassError: '',\n        nameError: '',\n        lastnameError: '',\n        loading: false\n    }\n\n    handleSignIn(e) {\n\n        e.preventDefault();\n        this.setState({\n            emailError: '',\n            passError: '',\n            loading: true\n        })\n\n\n        let email = this.state.email;\n        let password = this.state.password;\n        let component = this;\n\n\n        firebase.auth().fetchSignInMethodsForEmail(email).then(\n            signInMethods => {\n                if (signInMethods.indexOf(firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD) !== -1) {\n\n                    firebase.auth().signInWithEmailAndPassword(email, password).then(\n                        (userCredential) => {\n                            if (this.props.afterSignIn) {\n                                let user = userCredential.user;\n                                this.props.afterSignIn(user)\n                            }\n                        }\n                    )\n                        .catch((error) => {\n                            let errorCode = error.code;\n                            let errorMessage = error.message;\n                            if (errorCode === \"auth/too-many-requests\") {\n                                component.setState({ passError: \"Too many sign in attempts, reset password or try again later.\" })\n                            }\n                            else if (errorCode === \"auth/wrong-password\") {\n                                component.setState({ passError: \"Invalid password\" })\n                            }\n                            else {\n                                component.setState({ passError: errorMessage })\n                            }\n\n                        });\n                }\n\n                else {\n                    this.setState({ emailError: \"Couldn't find an account with that email.\" })\n                }\n\n            }\n        )\n\n        this.setState({ loading: false })\n\n    }\n\n\n    handleCreateAccount(e) {\n\n        e.preventDefault();\n        this.setState({\n            confirmPassword: '',\n            emailError: '',\n            passError: '',\n            confirmPassError: '',\n            nameError: '',\n            lastnameError: '',\n            loading: true\n        })\n\n\n        let email = this.state.email;\n        let password = this.state.password;\n        let confirmPassword = this.state.confirmPassword;\n        let firstname = this.state.firstname;\n        let lastname = this.state.lastname;\n\n        let component = this;\n\n\n        firebase.auth().fetchSignInMethodsForEmail(email).then(\n            signInMethods => {\n                if (signInMethods.indexOf(firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD) !== -1) {\n                    this.setState({ emailError: \"An account exist with that email.\" })\n                }\n\n                else {\n                    //check that name and lastname does not include special characters, except for hypens\n                    let testString = /^[a-zA-Z][ a-zA-Z \\-' -]+$/;\n\n\n                    if (!testString.test(firstname)) {\n                        component.setState({ nameError: \"Name can only contain letters, apostrophes, hypens and spaces.\" })\n                    }\n\n                    if (lastname) {\n                        if (!testString.test(lastname)) {\n                            component.setState({ lastnameError: \"Last name can only contain letters, apostrophes, hypens and spaces.\" })\n\n                        }\n                    }\n\n                    //check that name and lastname are longer than 1 character\n                    if (firstname.length === 1) {\n                        component.setState({ nameError: \"Name must be longer than one character.\" })\n                    }\n\n                    if (lastname.length === 1) {\n                        component.setState({ lastnameError: \"Last name, if provided, must be longer than one character.\" })\n                    }\n\n                    //check that passworrd is longer than 5 characters\n                    if (password.length < 6) {\n                        component.setState({ passError: \"Passowrd must be at least 6 characters long.\" })\n                    }\n\n                    //check that passwords match\n                    if (password !== confirmPassword) {\n                        component.setState({ confirmPassError: \"Passwords don't match\" })\n                    }\n\n                    //check that there are no errors\n                    if (!this.state.emailError && !this.state.confirmPassError && !this.state.nameError && !this.state.passError) {\n                        //create account\n                        let displayName = firstname;\n\n                        if (firstname && lastname) {\n                            displayName = `${firstname} ${lastname}`\n                        }\n                        //create credentials\n                        firebase.auth().createUserWithEmailAndPassword(email, password).then(userCredential => {\n                            let user = userCredential.user;\n                            let userId = user.uid;\n                            let email = user.email;\n                        \n\n                            //add user displayName and email to databsse\n                            let userInfo = {\n                                email: email,\n                                displayName: displayName\n                            }\n                            let database = firebase.database();\n\n                            database.ref(`users/${userId}`).set(\n                                userInfo\n                            ).catch((error) => {\n                                console.log(error)\n                            })\n\n                            if (this.props.afterCreateAccount) {\n                                let user = userCredential.user;\n                                this.props.afterCreateAccount(user)\n                            }\n\n                        }\n\n                        )\n                            .catch((error) => {\n                                var errorCode = error.code;\n                                var errorMessage = error.message;\n\n                                if (errorCode === \"auth/email-already-in-use\") {\n                                    this.setState({ emailError: \"An account exist with that email.\" })\n                                }\n\n                                if (errorCode === \"auth/invalid-email\") {\n                                    this.setState({ emailError: \"Please use a valid email address\" })\n                                }\n\n                                if (errorCode === \"auth/operation-not-allowed\") {\n                                    this.setState({ emailError: errorMessage })\n                                }\n\n                                if (errorCode === \"auth/weak-password\") {\n                                    component.setState({ passError: \"Passowrd must be at least 6 characters long.\" })\n                                }\n                            });\n                    }\n\n                }\n\n            }\n        )\n        this.setState({ loading: false })\n\n    }\n\n    handleEmailInput(e) {\n        this.setState({ email: e.target.value })\n    }\n\n    handlePassInput(e) {\n        this.setState({ password: e.target.value })\n    }\n\n    handleNameInput(e) {\n        this.setState({ firstname: e.target.value })\n    }\n\n    handleLastnameInput(e) {\n        this.setState({ lastname: e.target.value })\n    }\n\n    handleConfirmPassInput(e) {\n        this.setState({ confirmPassword: e.target.value })\n    }\n\n\n    changeUserType() {\n        this.setState({ newUser: !this.state.newUser }, () => {\n            if (this.props.changeUserOnParent) {\n                this.props.changeUserOnParent(this.state.newUser)\n            }\n        })\n    }\n\n    renderContent(newUser) {\n\n        let logInLocation = this.props.logInLocation;\n\n        let trips = 'trips'\n        let add = 'add'\n        let account = 'account'\n\n\n        let text;\n\n        switch (logInLocation) {\n            case trips:\n                text = \"view your trips\"\n                break;\n            case add:\n                text = \"add a location\"\n                break;\n            case account:\n                text = \"view your account information\"\n                break;\n            default:\n                text = \"continue your PhotoAtlas journey\"\n        }\n\n        if (newUser) {\n            return (\n                <>\n                    <SignUp\n                        hideTitle={this.props.hideTitle ? true : false}\n                        tabContent={this.props.tabContent}\n                        introtext={text}\n                        handleSubmit={(e) => this.handleCreateAccount(e)}\n                        email={this.state.email}\n                        handleEmailInput={(e) => this.handleEmailInput(e)}\n                        emailError={this.state.emailError}\n                        password={this.state.password}\n                        handlePassInput={(e) => this.handlePassInput(e)}\n                        passError={this.state.passError}\n                        loading={this.state.loading}\n\n                        firstname={this.state.firstname}\n                        nameError={this.state.nameError}\n                        handleNameInput={(e) => this.handleNameInput(e)}\n\n                        lastname={this.state.lastname}\n                        lastnameError={this.state.lastnameError}\n                        handleLastnameInput={(e) => this.handleLastnameInput(e)}\n\n                        confirmPassword={this.state.confirmPassword}\n                        confirmPassError={this.state.confirmPassError}\n                        handleConfirmPassInput={(e) => this.handleConfirmPassInput(e)}\n                    />\n                </>\n            )\n        }\n        else {\n            return (\n                <>\n                    <SignIn\n                        hideTitle={this.props.hideTitle ? true : false}\n                        tabContent={this.props.tabContent}\n                        introtext={text}\n                        handleSubmit={(e) => this.handleSignIn(e)}\n                        email={this.state.email}\n                        handleEmailInput={(e) => this.handleEmailInput(e)}\n                        emailError={this.state.emailError}\n                        password={this.state.password}\n                        handlePassInput={(e) => this.handlePassInput(e)}\n                        passError={this.state.passError}\n                        loading={this.state.loading}\n                        logInLocation={logInLocation}\n                    />\n                </>\n            )\n        }\n    }\n\n\n    render() {\n\n        let { newUser } = this.state;\n\n        return (\n            <>\n\n                {this.renderContent(newUser)}\n\n                <div className=\"container mobile-padding\">\n                    <button className=\"button-link\" onClick={() => this.changeUserType()}>\n                        {newUser ? \"Sign In\" : \"Create Account\"}\n                    </button>\n                </div>\n            </>\n\n        )\n\n    }\n\n}\n\nAuthenticate.propTypes = {\n    logInLocation: PropTypes.string,\n    tabContent: PropTypes.bool,\n    hideTitle: PropTypes.bool,\n    afterSignIn: PropTypes.func,\n    afterCreateAccount: PropTypes.func\n}\n\n\nexport default Authenticate;","import React from 'react'\nimport PropTypes from 'prop-types';\nimport firebase from '../../utils/firebase/firebaseConfig'\n\n\nclass VerifyEmail extends React.Component {\n\n    state = {\n        error: null\n    }\n\n    componentDidMount() {\n\n        let user = firebase.auth().currentUser;\n        let component = this;\n        let location = this.props.logInLocation;\n        let locationUrl = \"https://photoatlas.app/\"\n\n        if (location) {\n            locationUrl = `https://photoatlas.app/${this.props.logInLocation}`;\n        }\n\n        let actionCodeSettings = {\n            url: `${locationUrl}`,\n        };\n\n        if (user) {\n\n\n            user.sendEmailVerification(actionCodeSettings)\n                .catch(function (error) {\n                    component.setState({ error: `${error}` })\n                });\n\n        }\n\n    }\n\n    renderContent() {\n        if (!this.state.error) {\n            return (\n                <>\n                    {this.props.tabContent ? \n                        <h3 className=\"h4-font\">Just one more step</h3> :\n                        <h2 className=\"h4-font\">Just one more step</h2>}\n                    <p>\n                        We've sent a verification link to your email.<br />\n                        Please check your inbox to verify your account.\n                    </p>\n\n                    <h3 className=\"h6-font\">\n                        Need a new link?\n                    </h3>\n\n                    <button className=\"button-link\">Re-Send Link</button>\n\n                </>\n\n            )\n        }\n        else {\n            return (\n                <>\n                    <h2 className=\"h4-font\">Sorry, there was a problem</h2>\n                    <p className=\"error-font\">{this.state.error}</p>\n                    <p>\n                        Please contact support at photoatlasapp@gmail.com.\n                </p>\n                </>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <>\n                <div className={`container mobile-padding`}>\n                    {this.renderContent()}\n                    <button className=\"secondary-button back-button\"\n                        onClick={\n                            () => {\n                                firebase.auth().signOut()\n                            }\n                        }>\n                        Back to Sign In\n                    </button>\n                </div>\n            </>\n        )\n    }\n}\n\nVerifyEmail.propTypes = {\n    logInLocation: PropTypes.string,\n    tabContent: PropTypes.bool\n}\n\nexport default VerifyEmail;","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Authenticate from '../../screens/authentication/Authenticate'\nimport VerifyEmail from '../../screens/authentication/VerifyEmail'\n\n\n\n\nfunction PrivateTab (props) {\n        if (props.isAuthenticated) {\n            if (!props.isVerified) {\n                return <VerifyEmail logInLocation={props.logInLocation} tabContent={true}/>\n            } else {\n               return props.componentContent();\n\n            }\n        }\n        else {\n            return (\n                <Authenticate logInLocation={props.logInLocation} tabContent={true}/>\n            )\n        }\n}\n\nPrivateTab.propTypes = {\n    logInLocation: PropTypes.string,\n    componentContent: PropTypes.func.isRequired\n}\n\n\n\nexport default PrivateTab;","import firebase from './firebase/firebaseConfig'\n\nlet getUserTrips = (userId, callback, locationId = null) => {\n\n    let database = firebase.database();\n    let existingTrips = [];\n\n    database.ref(`userTrips/${userId}`).get().then((snapshot) => {\n\n        if (snapshot.exists()) { \n            let trips = snapshot.val();\n\n\n            for (const tripId in trips) {\n                let trip = trips[tripId]\n\n                //get privacy setting \n                let privacy = trip['tripPrivacy']\n                let isPublic = privacy === 'public';\n                let isShared = trip['isShared']\n\n                let tripRef = `${privacy}Trips/${tripId}`\n\n                database.ref(`${tripRef}`).get().then(\n                    (snapshot) => {\n                        if (snapshot.exists()) {\n                            let tripData = snapshot.val()\n                            //get title\n                            let title = tripData['tripName']\n\n                            //get locationsCount\n                            let locationsCount = tripData['locationsCount']\n\n                            //get thumnail\n                            let thumbnail = tripData['featuredImg']\n\n                            //see if location is in trip\n                            let inTrip;\n\n                            if (locationId) {\n                                let locations = tripData.locations;\n\n\n                                if (locations) {\n                                    let location = locations[locationId]\n                                    if (location) {\n                                        inTrip = true\n                                    } else {\n                                        inTrip = false\n                                    }\n                                } else {\n                                    inTrip = false\n                                }\n                            }\n\n                            let existingTripUpdate = {\n                                tripId: tripId,\n                                thumbnail: thumbnail,\n                                title: title,\n                                locationsCount: locationsCount,\n                                isPublic: isPublic,\n                                isShared: isShared,\n                                inTrip: inTrip\n                            }\n\n                            existingTrips.push(existingTripUpdate)\n\n                            return existingTrips\n                        } else {\n                            console.log(`issue fetching: ${tripRef}`)\n                        }\n                    }\n                ).catch((error) => console.log(`could not fetch trips: ${error}`)).then((existingTrips) => callback(existingTrips))\n\n            }\n\n        } else {\n            callback(existingTrips)\n        }\n\n    })\n}\n\nexport default getUserTrips;","import React from 'react'\nimport PropTypes from 'prop-types'\nimport PrivateTab from '../../components/navigation/PrivateTab'\nimport OneToTwoCols from '../../components/layout/OneToTwoCols'\nimport TripCard from '../../components/cards/TripCard'\nimport getUserTrips from '../../utils/getUserTrips'\n\n\n\nclass MyTrips extends React.Component {\n\n    state = {\n        existingTrips: [],\n        loading: true\n    }\n    _isMounted = false;\n\n    componentDidMount() {\n        this._isMounted = true;\n        let userId = this.props.userId;\n        this._isMounted && getUserTrips(userId, (tripsList) => \n            {\n                if(tripsList) {\n                    this.setState({ existingTrips: tripsList, loading: false })\n                } else {\n                    this.setState({ loading: false })\n                }\n                \n            }\n            )\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    renderUserTrips() {\n\n        let { existingTrips, loading } = this.state;\n\n        if (loading) {\n            return (\n                <div aria-live=\"polite\">\n                    <p>Getting Trips...</p>\n                </div>\n            )\n        } else {\n            if(existingTrips.length > 0) {\n                return (\n                    <>\n                        <div aria-live=\"polite\" className=\"sr-only\">\n                            <p>Showing all trips</p>\n                        </div>\n                        <OneToTwoCols>\n                            {existingTrips.map((trip, index) => {\n                                let {\n                                    thumbnail,\n                                    title,\n                                    locationsCount,\n                                    isPublic,\n                                    isShared,\n                                    tripId } = trip;\n    \n                                return (\n                                    <TripCard\n                                        key={index}\n                                        thumbnail={thumbnail}\n                                        title={title}\n                                        tripId={tripId}\n                                        isPublic={isPublic}\n                                        isShared={isShared}\n                                        locationsCount={locationsCount}\n                                    />\n                                )\n                            })}\n                        </OneToTwoCols>\n                    </>)\n                \n            } else {\n                return (\n                    <div aria-live=\"polite\">\n                        <p>No trips here yet.</p>\n                    </div>\n                )\n            }\n  \n\n        }\n\n\n    }\n\n    render() {\n        return (\n            <>\n                <PrivateTab\n                    componentContent={() => this.renderUserTrips()}\n                    logInLocation={\"trips\"}\n                    isVerified={this.props.isVerified}\n                    isAuthenticated={this.props.isAuthenticated}\n                />\n            </>\n        )\n    }\n\n}\n\nMyTrips.propTypes = {\n    userId: PropTypes.string,\n    isAuthenticated: PropTypes.bool,\n    isVerified: PropTypes.bool\n}\n\n\n\nexport default MyTrips;","import React from 'react'\nimport PropTypes from 'prop-types';\nimport PublicTrips from './PublicTrips'\nimport MyTrips from './MyTrips'\n\n\n\n\nclass Trips extends React.Component {\n\n    state = {\n        isPublic: true\n    }\n\n    renderContent() {\n\n        if (this.state.isPublic) {\n            return <PublicTrips />\n        }\n        else {\n            return (\n                <MyTrips \n                    isVerified={this.props.isVerified} \n                    isAuthenticated={this.props.isAuthenticated}\n                    userId={this.props.userId}\n                    />\n            )\n        }\n\n    }\n\n    switchTabs(value) {\n        this.setState({isPublic: value})\n    }\n\n    render() {\n        return (\n            <>\n                <div className={`container trips mobile-padding`}>\n                    <h2>Trips</h2>\n                    <ul className={`tabs`}>\n                        <li>\n                            <button \n                                className={this.state.isPublic ? 'active' : 'inactive'} \n                                onClick={() => this.switchTabs(true)}>All Public Trips\n                            </button>\n                        </li>\n                        <li>\n                            <button\n                            className={this.state.isPublic ? 'inactive' : 'active' } \n                            onClick={() => this.switchTabs(false)}>\n                                My Trips\n                            </button>\n                            </li>\n                    </ul>\n                    {this.renderContent()}\n                </div>\n            </>\n        )\n    }\n\n}\n\nTrips.propTypes = {\n    userId: PropTypes.string,\n    isAuthenticated: PropTypes.bool,\n    isVerified: PropTypes.bool\n}\n\n\n\nexport default Trips;","import { Route } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport Authenticate from '../../screens/authentication/Authenticate'\nimport VerifyEmail from '../../screens/authentication/VerifyEmail'\n\n\nfunction PrivateRoute({ component: Component, isAuthenticated, logInLocation, isVerified, user, ...rest }) {\n    \n    return (\n        <Route\n\n            {...rest}\n\n            render={props => (\n\n                isAuthenticated ?\n\n                    (\n                        isVerified ?\n\n                            <Component {...props} />\n                            :\n                            <VerifyEmail logInLocation={logInLocation} />\n\n                    )\n\n                    :\n\n                    (<Authenticate logInLocation={logInLocation} />)\n            )} />\n\n    )\n}\n\n\nPrivateRoute.propTypes = {\n    isAuthenticated: PropTypes.bool.isRequired,\n    isVerified: PropTypes.bool.isRequired,\n    logInLocation: PropTypes.string\n}\n\nexport default PrivateRoute;","function Footer() {\n    return (\n        <footer>\n            <div className={`container`}>\n                <p>&copy; PhotoAtlas 2021</p>\n                <p className={`caption`}>\n                    All photographs and their titles/metadata on PhotoAtlas are copyrighted and owned by\n                    their respective owners (the photographers) and not by PhotoAtlas. As such Photo Atlas does\n                    not grant any licenses to any copyrights, patents or any other intellectual property rights.\n          </p>\n            </div>\n        </footer>\n    )\n}\n\nexport default Footer;","  //function source https://wisej.com/support/question/resize-image-before-uploading-with-upload-control\n  let resizeImage = function (img, maxHeight = 100, maxWidth = 100) {\n  \n    //get the original source photo width and height\n    const srcWidth = img.width;\n    const srcHeight = img.height;\n  \n    //define our target size letiables\n    let newWidth = srcWidth;\n    let newHeight = srcHeight;\n  \n    //only need to resize if source dimensions exceed our maximum dimensions\n    if ((srcWidth > maxWidth) || (srcHeight > maxHeight)) {\n      //Conserve aspect ratio of the original \n      let ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n  \n      //set new dimensions with aspect ratio preserved\n      newWidth = srcWidth * ratio;\n      newHeight = srcHeight * ratio;\n    }\n  \n    img.width = newWidth;\n    img.height = newHeight;\n  }\n\n  export default resizeImage;","import PropTypes from 'prop-types';\n\nimport resizeImage from '../../utils/resizeimage';\n\nconst ContainedImage = (props) => {\n\n  const { src, alt } = props;\n\n  const onImageLoad = ({ target: img }) => {\n\n    //ensure image is not bigger than desired size, while maintaining aspect ratio\n    resizeImage(img, props.maxHeight, props.maxWidth);\n\n  }\n\n  return (\n    <div className={`image-container`}>\n      <img onLoad={onImageLoad} src={src} alt={alt ? alt : ''} />\n    </div>\n  )\n\n}\n\nContainedImage.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string\n}\n\nexport default ContainedImage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ContainedImage from './ContainedImage';\nimport SimpleReactLightbox, { SRLWrapper } from \"simple-react-lightbox\";\n\n\n\n/* \nprops.imageList receives an array of objects like this one:\n\nconst imageList = [\n  {\n    src: \"https://picsum.photos/700/800\",\n    alt: \"placeholder 1\"\n  },\n  {\n    src: \"https://picsum.photos/1000/300\",\n    alt: \"placeholder 2\"\n  },\n  {\n    src: \"https://picsum.photos/200/300\",\n    alt: \"placeholder 3\"\n  },\n  {\n    src: \"https://picsum.photos/2000/700\",\n    alt: \"placeholder 4\"\n  }\n];\n*/\n\n\nconst windowWidth = window.innerWidth;\nconst breakPoint = 600;\nconst maxImageWidth = (windowWidth > breakPoint) ? (windowWidth / 2) : windowWidth;\n\nconst PhotoSlider = (props) => {\n  const { imageList } = props;\n  const imagesCount = imageList.length;\n\n  const lightboxOptions = {\n    buttons: {\n      showDownloadButton: false,\n      showAutoplayButton: false\n    }\n  }\n\n  return (\n    <SimpleReactLightbox>\n      <div className={`photo-slider`}>\n\n        <SRLWrapper options={lightboxOptions}>\n\n          {imageList.map((image, id) => {\n\n            const { src, alt, author, creditUrl } = image;\n\n            return (\n              <div key={id} className={`image-with-credit`}>\n                <a href={src}>\n                  <ContainedImage src={src} alt={alt} maxHeight={600} maxWidth={maxImageWidth} />\n                </a>\n                {author && <span className={`credit`}><a href={creditUrl}>{author}</a></span>}\n              </div>\n            )\n\n          })}\n\n        </SRLWrapper>\n\n      </div>\n\n      <p className={`caption`}>Total images: {imagesCount}</p>\n\n    </SimpleReactLightbox>\n\n  )\n\n}\n\nPhotoSlider.propTypes = {\n  imageList: PropTypes.arrayOf(PropTypes.object).isRequired\n}\n\n\nexport default PhotoSlider;\n","import PropTypes from 'prop-types';\n\nfunction SubjectIndicators(props) {\n\n    let { subjects } = props;\n\n    if (!subjects) {\n        subjects = [];\n    }\n\n\n    return (\n        <>\n            <h3>Photo Subjects</h3>\n            <div className={`data-container`}>\n                <ul className={`subject-indicators`}>\n\n                    {subjects.includes('abandoned') && <li className={`abandoned`}>Abandoned</li>}\n\n                    {subjects.includes('architecture') && <li className={`architecture`}>Architecture</li>}\n\n                    {subjects.includes('astro') && <li className={`astro`}>Astrophotography</li>}\n\n                    {subjects.includes('landscape') && <li className={`landscape`}>Landscape</li>}\n\n                    {subjects.includes('nature') && <li className={`nature`}>Nature</li>}\n\n                    {subjects.includes('street art') && <li className={`street-art`}>Street Art</li>}\n\n                    {subjects.includes('sunrise') && <li className={`sunrise`}>Sunrise</li>}\n\n                    {subjects.includes('sunset') && <li className={`sunset`}>Sunset</li>}\n\n                    {subjects.includes('transport') && <li className={`transport`}>Transport</li>}\n\n                    {subjects.includes('people') && <li className={`people`}>People</li>}\n\n                    {subjects.includes('urban') && <li className={`urban`}>Urban</li>}\n\n                    {subjects.includes('water') && <li className={`water`}>Water Feature</li>}\n\n                </ul>\n            </div>\n        </>\n    )\n\n}\n\nSubjectIndicators.propTypes = {\n    subjects: PropTypes.arrayOf(PropTypes.string)\n}\n\nexport default SubjectIndicators;","async function getFlickrPhotoInfo(photoId, handleResponse =\n    (responseData) => console.log(responseData)) {\n\n    let url = `https://api.flickr.com/services/rest/?api_key=${process.env.REACT_APP_FLICKR_API_KEY}&method=flickr.photos.getInfo&format=json&nojsoncallback=1}&photo_id=${photoId}`\n\n    await fetch(url)\n        .then(response => {\n            if (!response.ok) {\n                throw Error(response.statusText);\n            }\n            return response.json().then(data => {\n                handleResponse(data);\n            });\n        }).catch(error => {\n            console.log(error)\n        }\n        )\n};\n\nexport default getFlickrPhotoInfo;","\nimport PropTypes from 'prop-types'\n\nconst DirectionsLarge = (props) => {\n    return (\n        <a href={`https://maps.google.com/?q=${props.latitude},${props.longitude}`} className={`action-button directions`}>Directions</a>\n    )\n}\n\nDirectionsLarge.propTypes = {\n    latitude: PropTypes.number,\n    longitude: PropTypes.number\n}\n\nexport {DirectionsLarge};","import PropTypes from 'prop-types'\n\nconst AddToTripsLarge = ({added, ...rest}) => {\n\n    return (\n        <button className={`action-button ${added ? 'added' : 'add'}`} {...rest}>\n            {\n                added ? 'Change Trips' : 'Add to Trip'\n            }\n        </button>\n    )\n}\n\nconst AddToTripsSmall = ({added, ...rest}) => {\n\n    return (\n        <button className={`action-button-small ${added ? 'added' : 'add'}`} {...rest}>\n            {\n                added ? 'Change Trips' : 'Add to Trip'\n            }\n        </button>\n    )\n}\n\nAddToTripsLarge.propTypes = {\n    add: PropTypes.bool\n}\n\nAddToTripsSmall.propTypes = {\n    add: PropTypes.bool\n}\n\nexport {AddToTripsLarge, AddToTripsSmall};","import PropTypes from 'prop-types';\n\nfunction RadioButton(props) {\n\n    let { \n        id,\n        value,\n        labelText,\n        className,\n        name,\n        ...rest } = props;\n \n    let idName = id ? id : value;\n\n    return (\n        \n        <>\n        \n            <label className={`check-container ${className ? className : ''}`} htmlFor={idName}>{labelText ? labelText : 'label'}\n\n                <input\n                    \n                    type=\"radio\"\n\n                    id={idName}\n\n                    name={name}\n\n                    value={value}\n\n                    {...rest}\n\n                />\n\n                <span className={`radiomark`}></span>\n\n            </label>\n    </>\n    )\n}\n\nRadioButton.propTypes = {\n    className: PropTypes.string,\n    value: PropTypes.string.isRequired,\n    labelText: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n}\n\n\nexport default RadioButton;","function generateDate() {\n\tlet result;\n\tlet months = [\"JAN\",\"FEB\",\"MAR\",\"APR\",\"MAY\",\"JUN\",\"JUL\",\"AUG\",\"SEP\",\"OCT\",\"NOV\",\"DEC\"]\n\tlet d = new Date();\n\tlet day = d.getDate();\n\tlet month = months[d.getMonth()];\n\tlet year = d.getFullYear();\n\n\tresult = `${day}-${month}-${year}`\n\n\treturn result;\n\n}\n\nfunction generateTimeNumber() {\n\tlet result;\n\tlet d = new Date();\n\tlet hour = d.getHours();\n\tlet minutes = d.getMinutes();\n\tlet seconds = d.getSeconds();\n\tlet milliseconds = d.getMilliseconds();\n\tresult = `${hour}-${minutes}-${seconds}-${milliseconds}`\n\treturn result;\n}\n\n\nexport {generateDate, generateTimeNumber}\n","function generateId(length, prefix, sufix) {\n    let result  = '';\n    let characters  = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let charactersLength = characters.length;\n    for ( let i = 0; i < length; i++ ) {\n       result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    if(prefix) {\n        result = `${prefix}-${result}`\n    }\n    if(sufix) {\n        result = `${result}-${sufix}`\n    }\n    \n    return result;\n }\n\n export default generateId;\n","import React from 'react'\n\nimport firebase from '../../utils/firebase/firebaseConfig'\nimport Authenticate from '../../screens/authentication/Authenticate'\nimport Modal from './Modal'\nimport TexInput from '../forms/TextInput'\nimport SubmitButton from '../forms/SubmitButton'\nimport RadioButton from '../forms/RadioButton'\nimport { generateDate, generateTimeNumber } from '../../utils/generateDateAndTime'\nimport generateID from '../../utils/generateId'\nimport getUserTrips from '../../utils/getUserTrips'\n\nclass ManageTripsModal extends React.Component {\n    state = {\n        modalTitle: 'Add or Remove from Trips',\n        modalDescription: '',\n        isAuthenticated: false,\n        userId: '',\n        existingTrips: [],\n        newTripPrivacy: 'public',\n        newTripName: '',\n        newTripTags: '',\n        newUser: false,\n        creatingTrip: false,\n        tripNameLength: 0,\n        tripNameError: '',\n        tripTagsError: '',\n        newTripCreated: false,\n        needNewTrip: false,\n        errorCreatingTrip: '',\n        errorCreatingLocation: '',\n        errorUpdatingUserTrips: '',\n        errorAddingFilters: '',\n        updatingTrips: true\n    }\n\n    _isMounted = false;\n\n    closeModal() {\n        this.setState({\n            newTripCreated: false,\n            newTripPrivacy: 'public',\n            newTripName: '',\n            newTripTags: '',\n            errorCreatingTrip: '',\n            errorCreatingLocation: '',\n            errorUpdatingUserTrips: '',\n            errorAddingFilters: '',\n            needNewTrip: false\n        }, () => this.props.handleClose());\n    }\n\n    changeUserType(newUserValue) {\n        this.setState({ newUser: newUserValue }, () => {\n\n            if (this.state.newUser) {\n                this.setState(\n                    {\n                        modalTitle: 'Sign Up',\n                        modalDescription: 'Create an account to manage your trips.'\n                    }\n                )\n            } else {\n                this.setState(\n                    {\n                        modalTitle: 'Sign In',\n                        modalDescription: 'Sign in to manage your trips.'\n                    }\n                )\n            }\n        })\n    }\n\n    checkExistingTrips(userId) {\n        \n        this.setState({ updatingTrips: true })\n\n        this._isMounted && \n        getUserTrips(userId,  (existingTrips) => this.setState({ existingTrips: existingTrips, updatingTrips: false }), this.props.locationId)\n    }\n\n\n\n    checkAuth() {\n\n        let userId = this.props.userId;\n\n        if(!userId) {\n            let user = firebase.auth().currentUser;\n            if(user) {\n                userId = user.uid;\n            } \n        }\n\n\n        if (this._isMounted) {\n\n\n            if (userId) {\n\n           \n                //get user trips\n                this._isMounted && this.checkExistingTrips(userId);\n\n                this.setState({ isAuthenticated: true, userId: userId })\n\n                if (this.state.existingTrips.length < 1) {\n                    this.setState(\n                        {\n                            modalTitle: 'Save to a New Trip',\n                            modalDescription: '',\n                            updatingTrips: false\n                        }\n                    )\n                }\n\n            } else {\n                this.setState(\n                    {\n                        modalTitle: 'Sign In',\n                        modalDescription: 'Sign in to manage your trips.'\n                    }\n                )\n            }\n        }\n\n\n\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        this.checkAuth();\n        //set a listner or trips https://firebase.google.com/docs/database/web/read-and-write#web_value_events\n    }\n\n\n    componentDidUpdate(prevProps) {\n        this._isMounted = true;\n        // Typical usage (don't forget to compare props):\n        if (this.props.locationId !== prevProps.locationId) {\n            this.checkAuth();\n        }\n    }\n\n    renderModalContent() {\n        //modal will ask user to sign in or create account if user is not authenticated\n        //user will NOT be required to have a verified email when saving a location\n\n        //authenticate\n        if (!this.state.isAuthenticated) {\n            return (\n                <div className=\"modal-content-padding\">\n                    <Authenticate\n                        hideTitle\n                        changeUserOnParent={(newUserValue) => this.changeUserType(newUserValue)}\n                        afterSignIn={(user) => this.checkAuth(user)}\n                        afterCreateAccount={(user) => this.checkAuth(user)}\n\n                    />\n                </div>\n            )\n        } else {\n\n            if (this.state.updatingTrips) {\n                return (\n                    <div className=\"modal-content-padding center-text\">\n                        <p>Updating trips...</p>\n                    </div>)\n\n            } else {\n                if (this.state.existingTrips.length > 0 && !this.state.needNewTrip && !this.state.newTripCreated) {\n                    return this.selectExistingTrip();\n                }\n                else {\n                    if (!this.state.newTripCreated && !this.state.updatingTrips) {\n                        return this.getNewTripInfo();\n                    } else {\n\n                        return this.newTripCreated()\n\n\n                    }\n                }\n            }\n        }\n\n    }\n\n    selectExistingTrip() {\n        //show list of trips\n        //a button that triggets getNewTripInfo\n        return (\n            <>\n\n                {this.renderExistingTrips()}\n                <div className=\"modal-content-padding center-text\">\n                    <button onClick={() => this.switchForm()} className=\"button-link\"> + Create a New Trip</button>\n                </div>\n\n            </>\n        )\n\n    }\n\n    switchForm() {\n        this.setState({ needNewTrip: !this.state.needNewTrip })\n    }\n\n    renderExistingTrips() {\n        let { existingTrips } = this.state;\n\n\n\n        return (<ul className=\"existing-trips\">\n            {existingTrips.map((trip, index) => {\n                let {\n                    thumbnail,\n                    title,\n                    locationsCount,\n                    isPublic,\n                    isShared,\n                    tripId,\n                    inTrip } = trip;\n\n                return (\n                    <li key={index} className=\"trip-card-small\">\n                        <div className={`trip-card-image`}>\n                            <img src={thumbnail} alt=\"\" />\n                        </div>\n                        <div className={`trip-card-content`}>\n                            <p className={`title`}>{title}</p>\n                            <p className={`meta-data ${isPublic ? 'public' : 'private'}`}>\n                                {isPublic ? 'Public' : isShared ? 'Shared' : 'Private'}</p>\n                            <p className={`meta-data marker`}>\n                                {locationsCount} {(locationsCount > 1 || locationsCount < 1) ? 'Locations' : 'Location'}</p>\n                            <button className=\"add-or-remove\" onClick={(e) => { this.addOrRemoveFromTrip(tripId, isPublic) }}>\n                                {inTrip ? '- Remove' : '+ Add'}\n                                <span>{inTrip ? `from ${title}` : `to ${title}`}</span>\n                            </button>\n                        </div>\n                    </li>\n                )\n            })}\n        </ul>)\n\n    }\n\n    handleTripNamelInput(e) {\n        e.preventDefault();\n        let value = e.target.value;\n        let valueLength = value.length;\n\n        this.setState({\n            newTripName: e.target.value,\n            tripNameLength: valueLength,\n            tripNameError: \"\"\n        })\n        if (valueLength > 50) {\n            this.setState({\n                tripNameError: \"Your trip name is too long.\"\n            })\n        }\n    }\n\n    handleTripTagsInput(e) {\n        e.preventDefault();\n\n        this.setState({\n            newTripTags: e.target.value,\n            tripTagsError: \"\"\n        }, () => {\n            //check if tags have special characters other than comma\n            let testString = /^[a-zA-Z ,0-9]+$/;\n\n            if (this.state.newTripTags && !testString.test(this.state.newTripTags)) {\n                this.setState({\n                    tripTagsError: \"Tags may only contain letters, numbers, and commas\"\n                })\n            }\n        });\n\n\n    }\n\n    renderDatabaseErrors() {\n        if (\n            this.state.errorCreatingLocation ||\n            this.state.errorUpdatingUserTrips ||\n            this.state.errorCreatingTrip ||\n            this.state.errorAddingFilters\n        ) {\n            return (\n                <div className=\"error-font\" aria-live=\"polite\">\n                    <ul>\n                        {this.state.errorCreatingTrip && <li>{this.state.errorCreatingTrip}</li>}\n                        {this.state.errorUpdatingUserTrips && <li >{this.state.errorUpdatingUserTrips}</li>}\n                        {this.state.errorCreatingLocation && <li>{this.state.errorCreatingLocation}</li>}\n                        {this.state.errorAddingFilters && <li>{this.state.errorAddingFilters}</li>}\n                    </ul>\n                </div>\n            )\n        }\n\n\n    }\n\n    getNewTripInfo() {\n        return (\n            <>\n                <h3 className=\"h5-font center-text\">Create a New Trip</h3>\n                {this.renderDatabaseErrors()}\n\n                <form className=\"modal-content-padding\">\n                    <div className=\"form-component-wrapper\">\n                        <label htmlFor=\"trip-name\">Trip Name (Max 50 Characters)</label>\n                        <TexInput placeholder=\"Beautiful City\" id=\"trip-name\" value={this.state.newTripName} onChange={(e) => this.handleTripNamelInput(e)} required />\n                        {this.state.tripNameLength !== 0 && <p className=\"character-count\" aria-live=\"polite\">Characters left: {50 - this.state.tripNameLength}</p>}\n                        {this.state.tripNameError && <p className=\"error-font\" aria-live=\"polite\">{this.state.tripNameError}</p>}\n                    </div>\n\n                    <div className=\"form-component-wrapper\">\n                        <label htmlFor=\"trip-tags\">Tags (Comma separated keywords)</label>\n                        <TexInput placeholder=\"city, urban architecture\" id=\"trip-tags\" value={this.state.newTripTags} onChange={(e) => this.handleTripTagsInput(e)} />\n                        {this.state.tripTagsError && <p className=\"error-font\" aria-live=\"polite\">{this.state.tripTagsError}</p>}\n                    </div>\n\n                    <fieldset className=\"form-component-wrapper\">\n                        <legend>Visibility Settings</legend>\n                        <RadioButton onChange={(e) => this.handleNewTripPrivacy(e)} labelText=\"Public\" defaultChecked name=\"trip-privacy\" value=\"public\" />\n                        <label className=\"caption-font\" htmlFor=\"public\">Anyone on Photo Atlas can see</label>\n                        <RadioButton onChange={(e) => this.handleNewTripPrivacy(e)} labelText=\"Private\" name=\"trip-privacy\" value=\"private\" />\n                        <label className=\"caption-font\" htmlFor=\"private\">Only you can see</label>\n                    </fieldset>\n\n                    <div className=\"form-component-wrapper\">\n                        <SubmitButton onClick={(e) => this.createNewTrip(e)} value={`${this.state.creatingTrip ? 'Creating Trip...' : 'Create Trip'}`} />\n                    </div>\n\n\n                </form>\n\n                {this.state.existingTrips.length > 0 &&\n                    <div className=\"modal-content-padding\">\n                        <button onClick={() => this.switchForm()} className=\"secondary-button back-button\">Back to Existing Trips</button>\n                    </div>\n                }\n            </>\n        )\n\n    }\n\n    newTripCreated() {\n        return (\n            <div className=\"modal-content-padding center-text\">\n                <h3 className=\"h5-font center-text\">\n                    This location was added to your new trip.\n                </h3>\n            </div>\n        )\n\n    }\n\n    createNewFlickrSourcedLocation(locationRef) {\n        let database = firebase.database();\n        let locationId = this.props.locationId;\n        let locationPhotosArray = this.props.photos;\n        let locationName = locationPhotosArray[0].title;\n        let locationCoordinates = this.props.coordinates;\n        let locationSubjectsArray = this.props.subjects;\n        let date = generateDate();\n\n        // arrays are handled like objects on Firebase Realtime Database\n        //https://firebase.googleblog.com/2014/04/best-practices-arrays-in-firebase.html\n        //convert props arrays into objects for better database handling\n        let locationSubjects = {};\n        let locationPhotos = {};\n\n        locationPhotosArray.forEach(photo => {\n            let flickrId = photo.flickrId;\n            let photoId;\n            if (flickrId) {\n                photoId = `flickrPhoto-${flickrId}`\n            }\n\n            locationPhotos[photoId] = {\n                title: photo.title,\n                author: photo.author,\n                src: photo.src,\n                creditUrl: photo.creditUrl ? photo.creditUrl : null\n            }\n        }\n        )\n\n\n        locationSubjectsArray.forEach(subject => {\n\n            locationSubjects[subject] = true\n\n        });\n\n        database.ref(`${locationRef}`).set({\n            locationName: locationName,\n            photos: locationPhotos,\n            coordinates: locationCoordinates,\n            savedCount: 1,\n            subjects: locationSubjects,\n            addedDate: date,\n            curated: false, //indicates that app has not been curated by a PhotoAtlas user\n            userLastEditedDate: null,\n            woeId: this.props.woeId\n        }).then(() => {\n\n            // add subjects record\n            locationSubjectsArray.forEach(\n\n                subject => {\n\n                    let subjectRef = subject;\n\n                    let update = {};\n\n                    update[locationId] = true;\n\n                    database.ref(`subjects/${subjectRef}`).update(\n                        update\n                    ).catch(\n                        (error) => {\n                            this.setState({ errorAddingFilter: `Could not add all filters to database: ${error.message}` })\n                        });\n\n                })\n\n        }).catch(\n            (error) => {\n                this.setState({ errorCreatingLocation: `Could not add location to database: ${error.message}` })\n            }\n        )\n\n    }\n\n    createNewTrip(e) {\n        e.preventDefault();\n\n        this.setState(\n            {\n                errorCreatingTrip: '',\n                errorCreatingLocation: '',\n                errorUpdatingUserTrips: '',\n                errorAddingFilters: ''\n            }\n        )\n\n        if (!this.state.newTripName) {\n            this.setState({ tripNameError: 'Please name your trip.' })\n        }\n\n        if (!this.state.tripNameError && this.state.newTripName && !this.state.tripTagsError) {\n            this.setState({ creatingTrip: true })\n\n            let locationId = this.props.locationId;\n            let locationPhotosArray = this.props.photos;\n\n            let tripPrivacy = this.state.newTripPrivacy;\n            let tripName = this.state.newTripName;\n            let tripFeaturedImg = locationPhotosArray[0];\n            let tripFeaturedImgSrc = tripFeaturedImg.src;\n            let tripAuthor = this.state.userId;\n            let tripTags = this.state.newTripTags;\n            if (tripTags.endsWith(\",\") || tripTags.endsWith(\" ,\")) {\n                tripTags = tripTags.slice(0, -1)\n            }\n            let date = generateDate();\n            let time = generateTimeNumber();\n            let tripId = generateID(7, `trip-${date}`, `${time}`)\n\n            let locations = {}\n            locations[locationId] = true;\n\n            let database = firebase.database();\n\n            // create new trip\n            database.ref(`${tripPrivacy}Trips/` + tripId).set({\n                tripName: tripName,\n                featuredImg: tripFeaturedImgSrc,\n                author: tripAuthor,\n                locationsCount: 1,\n                locations: locations,\n                tags: tripTags,\n                createdOn: date,\n                lastEdited: date\n            }).catch((error) => {\n                this.setState({ errorCreatingTrip: `Could not create trip: ${error.message}` })\n            }).then(() => {\n                //add trip to user trips\n                database.ref(`userTrips/${tripAuthor}/${tripId}`).set({\n                    tripPrivacy: tripPrivacy,\n                    isShared: false\n                }).catch((error) => {\n                    this.setState({ errorUpdatingUserTrips: `Could to your list of trips: ${error.message}` })\n                });\n            }).then(() => {\n                if (locationId.startsWith(\"flickr-\")) { // check if primary source is from flickr or user created\n\n                    let locationRef = `appLocations/flickrSourced/${locationId}`;\n\n                    //check if location exists in lists of locations if not, then add location\n                    //use transactions to make sure that count stays accurate\n                    //https://firebase.google.com/docs/database/web/read-and-write#save_data_as_transactions\n\n                    database.ref(`${locationRef}`).get().then((snapshot) => {\n                        //if location exists\n                        if (snapshot.exists()) {\n                            //get how many people have saved it, and who has saved it\n                            let savedCount = snapshot.val().savedCount;\n\n                            //add to the saved count \n                            //and add the author\n                            if (savedCount) {\n                                database.ref(`${locationRef}`).transaction(\n                                    (location) => {\n                                        if (location) {\n                                            location.savedCount++;\n                                        }\n                                        return location;\n                                    }\n                                )\n                            }\n\n                        }\n                        else {\n                            //create the location\n                            this.createNewFlickrSourcedLocation(locationRef);\n                        }\n                    })\n                }\n\n            }).then(() => {\n\n                if (!this.state.errorCreatingTrip && !this.state.errorCreatingLocation && !this.state.errorUpdatingUserTrips && !this.state.errorAddingFilters) {\n                    this.setState({\n                        creatingTrip: false,\n                        newTripCreated: true,\n                        modalTitle: 'You have a New Trip',\n                        modalDescription: ''\n                    })\n                } else {\n                    this.setState({\n                        creatingTrip: false\n                    })\n                }\n            }).then(\n                () => this.checkExistingTrips(this.state.userId)\n            )\n\n        }\n\n    }\n\n    addOrRemoveFromTrip(tripId, isPublic) {\n\n        this.setState({ updatingTrips: true })\n\n        let database = firebase.database();\n        let privacy = isPublic ? 'public' : 'private';\n        let currentLocation = this.props.locationId;\n        let user = this.state.userId;\n        let date = generateDate();\n\n        let tripRef = `${privacy}Trips/${tripId}/`\n        //need to change\n        //last edited\n        //locationsCount\n        //locations\n\n        let locationRef = `appLocations/flickrSourced/${currentLocation}`\n        //need to change savedCount\n\n\n        database.ref(`${tripRef}/locations/${currentLocation}`).get().then(\n            snapshot => {\n\n                if (snapshot.exists()) {\n                    //remove\n\n                    database.ref(`${tripRef}`).transaction(\n                        trip => {\n                            if (trip) {\n                                //decrease locationsCount\n                                if (trip.locationsCount > 0) {\n                                    trip.locationsCount--;\n                                }\n                                //change the last edited\n                                trip.lastEdited = date;\n\n                            }\n                            return trip\n                        }).catch((error) => console.log(error)).then(() => {\n                            //remove location from trip\n                            database.ref(`${tripRef}/locations/${currentLocation}`).transaction(\n                                location => {\n                                    if (location) {\n                                        location = null\n                                    }\n                                    return location\n                                }\n                            )\n                        }).then(() => this.checkExistingTrips(user))\n\n                    database.ref(`${locationRef}`).transaction(\n                        location => {\n                            if (location) {\n                                //decrease savedCount\n\n                                location.savedCount--\n\n\n                            }\n                            return location\n                        }).catch((error) => console.log(error))\n\n\n                }\n                else {\n                    //add\n\n                    if (currentLocation.startsWith(\"flickr-\")) {\n                        let locationRef = `appLocations/flickrSourced/${currentLocation}`\n\n                        database.ref(`${locationRef}`).get().then(\n                            (snapshot) => {\n                                if (!snapshot.exists()) {\n                                    this.createNewFlickrSourcedLocation(locationRef)\n                                }\n                            }\n                        )\n                    }\n\n                    database.ref(`${tripRef}`).transaction(\n                        trip => {\n                            if (trip) {\n                                //increase locationsCount\n                                trip.locationsCount++;\n                                //change the last edited\n                                trip.lastEdited = date;\n                            }\n                            return trip\n                        }).catch((error) => console.log(error)).then(() => {\n                            //add location to trip\n                            //check if trip has locations\n                            database.ref(`${tripRef}/locations`).get().then((snapshot) => {\n                                if (snapshot.exists()) {\n                                    let update = {}\n                                    update[currentLocation] = true\n\n                                    database.ref(`${tripRef}/locations`).update(\n                                        update\n                                    ).catch((error) => console.log(error))\n                                } else {\n                                    let update = { locations: {} }\n                                    update.locations[currentLocation] = true\n\n                                    database.ref(`${tripRef}`).update(\n                                        update\n                                    ).catch((error) => console.log(error))\n                                }\n\n                            }).then(() => this.checkExistingTrips(user))\n\n                        })\n\n\n                    database.ref(`${locationRef}`).transaction(\n                        location => {\n                            if (location) {\n                                //increase savedCount\n                                location.savedCount++\n                            }\n                            return location\n                        }).catch((error) => console.log(error))\n\n                }\n            }).then(() => this.setState({ updatingTrips: false }))\n    }\n\n    handleNewTripPrivacy(e) {\n        this.setState({ newTripPrivacy: e.target.value })\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    render() {\n        let {\n            modalTitle,\n            modalDescription\n        } = this.state;\n\n        return (\n            <Modal\n                modalId='manage-trips-modal'\n                modalTitle={modalTitle}\n                modalDescription={modalDescription}\n                isOpen={this.props.isOpen}\n                handleClose={() => this.closeModal()}\n            >\n                {this.renderModalContent()}\n            </Modal>\n        )\n    }\n}\n\nexport default ManageTripsModal;","import firebase from './firebase/firebaseConfig'\n\nlet getSavesCount = (locationId, callback) => {\n    let database = firebase.database();\n\n    database.ref(`appLocations/flickrSourced/${locationId}`).get().then(\n        (snapshot) => {\n            let count = 0;\n            if (snapshot.exists()) {\n                let location = snapshot.val();\n                count = location['savedCount'];\n            }\n            return count\n        }).catch((error)=> console.log(error)).then((count) => {\n            callback(count)\n        }\n        )\n\n}\n\nexport default getSavesCount;","import React from 'react'\nimport PropTypes from 'prop-types';\n\nimport PhotoSlider from '../../components/slider/PhotoSlider'\nimport SubjectIndicators from '../../components/content/SubjectIndicators'\nimport getFlickrPhotoInfo from '../../utils/flickr/getFlickrPhotoInfo'\nimport createFlickrImageUrl from '../../utils/flickr/createFlickrImageUrl'\nimport getFlickrPlace from '../../utils/flickr/getFlickrPlace'\nimport getFlickrPhotos from '../../utils/flickr/getFlickrPhotos'\nimport filterTags from '../../utils/filterTags'\nimport { DirectionsLarge } from '../../components/buttons/DirectionsButtons'\nimport { AddToTripsLarge, AddToTripsSmall } from '../../components/buttons/AddToTripsButtons'\nimport ManageTripsModal from '../../components/modals/ManageTripsModal'\nimport firebase from '../../utils/firebase/firebaseConfig'\nimport getSavesCount from '../../utils/getSavesCount'\n\nclass Location extends React.Component {\n    state = {\n        locationId: '',\n        title: \"\",\n        distance: 'loading...',\n        saves: 0,\n        destination: {\n            latitude: 0,\n            longitude: 0,\n        },\n        imageList: [],\n        subjects: [],\n        firstPhoto: {},\n        showTripsModal: false,\n        inTrips: false,\n        userId: null,\n        woeId: null\n    };\n\n    _isMounted = false;\n\n\n    manageTripsModal() {\n        this.setState({ showTripsModal: !this.state.showTripsModal })\n        let userId = this.props.userId;\n        this.checkIfInTrips(userId)\n\n        getSavesCount(\n            this.state.locationId,\n            (count) => {\n\n                this.setState({ saves: count })\n            }\n        );\n\n    }\n\n    checkIfInTrips(userId) {\n\n\n\n        if (userId) {\n            let database = firebase.database()\n\n\n            this._isMounted && database.ref(`userTrips/${userId}`).get().then((snapshot) => {\n                let locationTrips = [];\n                if (snapshot.exists()) {\n                    let trips = snapshot.val();\n\n\n                    for (const tripId in trips) {\n\n                        let privacy = trips[tripId]['tripPrivacy']\n\n                        let location = this.state.locationId\n\n                        let locationRef = `${privacy}Trips/${tripId}/locations/${location}`\n\n                        this._isMounted && database.ref(`${locationRef}`).get().then(\n                            snapshot => {\n\n                                if (snapshot.exists()) {\n                                    locationTrips.push(tripId)\n                                }\n\n                                if (locationTrips.length > 0) {\n\n                                    this.setState({ inTrips: true })\n                                    \n                                } else {\n                                    this.setState({ inTrips: false })\n                                }\n\n                            })\n\n\n                    }\n\n                }\n                return locationTrips\n            })\n        }\n\n\n\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.userId !== this.props.userId) {\n            let userId = this.props.userId;\n\n            this.checkIfInTrips(userId)\n\n        }\n    }\n\n\n\n    componentDidMount() {\n        this._isMounted = true;\n        let userId = this.props.userId;\n        this.checkIfInTrips(userId)\n\n        //get the location id from the path\n        let path = this.props.location.pathname;\n        let locationId = path.replace(\"/location/\", \"\");\n        this.setState({ locationId: locationId });\n\n\n\n        getSavesCount(\n            locationId,\n            (count) => {\n\n                this.setState({ saves: count })\n            }\n        );\n\n\n\n        //get the woeId from the search query\n        let pathQuery = this.props.location.search;\n        let searchParams = new URLSearchParams(pathQuery);\n        let woeId = searchParams.get(\"woe\");\n        this.setState({woeId: woeId})\n\n\n        //if the path starts with flickr\n        if (locationId.startsWith(\"flickr-\")) {\n\n\n            //get the photo id\n            let photoId = locationId.replace(\"flickr-\", \"\");\n\n\n            //get the photo information\n            this._isMounted && getFlickrPhotoInfo(\n\n                photoId,\n\n                (data) => {\n\n                    let photoData = data.photo;\n                    let src, title, alt, lat, lon, author, creditUrl, tags;\n\n                    if (photoData) {\n                        src = createFlickrImageUrl(photoData);\n                        title = photoData.title._content;\n                        alt = photoData.description._content;\n                        lat = photoData.location.latitude;\n                        lon = photoData.location.longitude;\n                        author = photoData.owner.realname;\n                        if (!author) {\n                            author = photoData.owner.username\n                        }\n                        creditUrl = photoData.urls.url[0]._content;\n                        tags = photoData.tags\n                    }\n\n                    let firstPhoto = {\n                        src: src,\n                        title: title,\n                        alt: alt,\n                        lon: lon,\n                        lat: lat,\n                        author: author,\n                        creditUrl: creditUrl,\n                        tags: tags\n                    }\n\n                    this.setState({ firstPhoto: firstPhoto }, () => {\n\n                        this.getLocationDetailsFromFlickr(photoId, woeId);\n\n                    })\n                }\n            )\n\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n    getLocationDetailsFromFlickr(photoId, woeId) {\n\n        //get the photo data\n        let photo = this.state.firstPhoto;\n        let src = photo.src;\n        let title = photo.title;\n        let alt = photo.alt;\n        let lat = photo.lat;\n        let lon = photo.lon;\n        let author = photo.author;\n        let creditUrl = photo.creditUrl;\n\n\n\n        //get each tag\n        let tagsList = photo.tags;\n\n        if (!tagsList) {\n            tagsList = [];\n        } else {\n            tagsList = tagsList.tag\n        }\n\n        // generate a string from tags\n        let tagsString = '';\n        tagsList.forEach(\n            (tag, index) => {\n                tag = tag._content;\n                if (tag) {\n                    if (index === 0) {\n                        tagsString = tagsString.concat(tag)\n                    } else {\n                        tagsString = tagsString.concat(`, ${tag}`)\n                    }\n                }\n            }\n        )\n\n        //check if filter tags are within the tagsString, if so add subjects list\n        if (tagsString) {\n\n            let subjects = []\n\n            //make the filterTags string into an array\n            //for each item in the array check if it's in tags string\n            //once one tag is found subject\n            //use a \"for\" loop instead of \"forEach\" so that it breaks on first match\n\n            let setSubject = (tagsArray, subject) => {\n                for (let i = 0; i < tagsArray.length; i++) {\n                    let tag = tagsArray[i];\n                    if (tagsString.includes(tag)) {\n                        subjects.push(subject)\n                        break;\n                    }\n                }\n            }\n\n            //'abandoned'\n            let abandonedString = filterTags.abandonedTags;\n            let abandonedArray = abandonedString.split(', ');\n            setSubject(abandonedArray, 'abandoned');\n\n            //'architecture'\n            let architectureString = filterTags.architectureTags;\n            let architectureArray = architectureString.split(', ');\n            setSubject(architectureArray, 'architecture');\n\n            //'astro'\n            let astroString = filterTags.astroTags;\n            let astroArray = astroString.split(', ');\n            setSubject(astroArray, 'astro');\n\n            //'landscape'\n            let landscapeString = filterTags.landscapeTags;\n            let landscapeArray = landscapeString.split(', ');\n            setSubject(landscapeArray, 'landscape');\n\n            //'nature'\n            let natureString = filterTags.natureTags;\n            let natureArray = natureString.split(', ');\n            setSubject(natureArray, 'nature');\n\n            //'street art'\n            let streetArtString = filterTags.streetArtTags;\n            let streetArtArray = streetArtString.split(', ');\n            setSubject(streetArtArray, 'street art');\n\n            //'sunrise'\n            let sunriseString = filterTags.sunriseTags;\n            let sunriseArray = sunriseString.split(', ');\n            setSubject(sunriseArray, 'sunrise');\n\n            //'sunset'\n            let sunsetString = filterTags.sunsetTags;\n            let sunsetArray = sunsetString.split(', ');\n            setSubject(sunsetArray, 'sunset');\n\n            //'transport'\n            let transportString = filterTags.transportTags;\n            let transportArray = transportString.split(', ');\n            setSubject(transportArray, 'transport');\n\n            //'people'\n            let peopleString = filterTags.peopleTags;\n            let peopleArray = peopleString.split(', ');\n            setSubject(peopleArray, 'people');\n\n            //'urban'\n            let urbanString = filterTags.urbanTags;\n            let urbanArray = urbanString.split(', ');\n            setSubject(urbanArray, 'urban');\n\n            //'water'\n            let waterString = filterTags.waterTags;\n            let waterArray = waterString.split(', ');\n            setSubject(waterArray, 'water');\n\n            //if the location contains any subjects, update the state\n            if (subjects.length > 0) {\n                this.setState({ subjects: subjects })\n            }\n        }\n\n        //create a location object and add it to imageList\n\n        createFlickrImageUrl(photo)\n\n        let location = {\n            \"title\": title,\n            \"src\": src,\n            \"alt\": alt,\n            \"author\": author,\n            \"creditUrl\": creditUrl,\n            \"flickrId\": photoId\n        }\n\n        let place = async (options) => {\n            let placeName = await getFlickrPlace(options);\n            return placeName\n        }\n\n        place({ \"woeId\": woeId }).then(placeName => {\n\n            if (placeName) {\n                location.title = placeName\n            }\n\n        }).then(\n\n            this.setState(\n                {\n                    title: title,\n                    destination: {\n                        latitude: parseFloat(lat),\n                        longitude: parseFloat(lon)\n                    },\n\n                    imageList: [location] //will need to makesure this stays as first photo when others are added\n                }\n            )\n\n        ).then(\n            () => {\n\n\n                //use woeid to get other images\n                let options = {\n                    \"lat\": lat,\n                    \"lon\": lon,\n                    \"extras\": \"geo, description, owner_name, tags\",\n                    \"accuracy\": 16\n                }\n\n                getFlickrPhotos(options).then(\n                    data => {\n\n                        if (data) {\n\n                            let photos = data.photos\n\n                            if (photos) {\n                                photos = photos.photo\n                                let imageList = this.state.imageList;\n\n                                photos.forEach(\n                                    photo => {\n                                        //only select photos with the same woeid (same location)\n                                        //prevent duplicate locations and locations with no tags\n                                        if (photo.woeid === woeId && photo.id !== photoId && photo.tags) {\n\n                                            let newTitle = photo.title;\n                                            let newSrc = createFlickrImageUrl(photo);\n                                            let newAlt = photo.description._content;\n                                            let newAuthor = photo.ownername;\n                                            let ownerId = photo.owner;\n                                            let newCreditUrl = `https://www.flickr.com/photos/${ownerId}/${photo.id}`;\n                                            let newphotoId = photo.id;\n\n\n                                            let newLocation = {\n                                                \"title\": newTitle,\n                                                \"src\": newSrc,\n                                                \"alt\": newAlt,\n                                                \"author\": newAuthor,\n                                                \"creditUrl\": newCreditUrl,\n                                                \"flickrId\": newphotoId\n                                            }\n\n                                            imageList.push(newLocation);\n\n                                            this.setState({ imageList: imageList })\n\n                                        }\n\n                                    }\n                                )\n                            }\n                        }\n\n\n                    }\n                )\n            }\n\n        )\n\n    }\n\n\n    render() {\n\n        let { title,\n            saves,\n            destination,\n            imageList,\n            subjects,\n            inTrips } = this.state;\n\n        if (!title) {\n            title = \"Untitled Location\"\n        }\n\n        if (!saves) {\n            saves = 0;\n        }\n\n        return (\n            <>\n                <div className=\"location\">\n                    <div className='dark-background mobile-header'>\n                        <div className={`container mobile-padding`}>\n                            <button onClick={() => { window.history.back() }} className={`secondary-button back-button`}>Back</button>\n                            <AddToTripsSmall added={inTrips} onClick={() => { this.manageTripsModal() }} />\n                        </div>\n\n                    </div>\n                    <div className={`container mobile-padding`}>\n\n                        {imageList && <PhotoSlider imageList={imageList} />}\n\n                        <h2 className={`title`}>{title}</h2>\n                        <div className={`gird-70-30`}>\n                            <div className={`col-70`}>\n                                <p className={`meta-data saved`}>Saved in: {saves} {(saves > 1 || saves < 1) ? 'trips' : 'trip'}</p>\n                                <p className={`meta-data marker`}>Coordinates: <a href={`https://maps.google.com/?q=${destination.latitude},${destination.longitude}`}>{destination.latitude}, {destination.longitude}</a></p>\n                            </div>\n                            <div className={`col-30`}>\n                                <ul className=\"actions\">\n                                    <li>\n                                        <DirectionsLarge latitude={destination.latitude} longitude={destination.longitude} />\n                                    </li>\n                                    <li>\n                                        <AddToTripsLarge data-micromodal-trigger=\"modal-1\" onClick={() => { this.manageTripsModal() }} added={inTrips} />\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n\n                        {subjects.length > 0 && <SubjectIndicators subjects={subjects} />}\n\n                    </div>\n\n\n                </div>\n                <ManageTripsModal\n                    isOpen={this.state.showTripsModal}\n                    handleClose={() => this.manageTripsModal()}\n                    locationId={this.state.locationId}\n                    photos={this.state.imageList}\n                    coordinates={this.state.destination}\n                    subjects={this.state.subjects}\n                    userId={this.state.userId}\n                    woeId={this.state.woeId}\n\n                />\n            </>\n\n        )\n\n    }\n}\n\n\nLocation.propTypes = {\n    userId: PropTypes.string\n}\n\n\nexport default Location;","\nconst EditTripLarge = ({added, ...rest}) => {\n\n    return (\n        <button className={`action-button edit`} {...rest}>\n            Edit Trip\n        </button>\n    )\n}\n\nconst EditTripSmall = ({added, ...rest}) => {\n\n    return (\n        <button className={`action-button-small edit`} {...rest}>\n            Edit Trip\n        </button>\n    )\n}\n\n\nexport {EditTripLarge,  EditTripSmall};","import React from 'react'\nimport Modal from './Modal'\nimport TexInput from '../forms/TextInput'\nimport SubmitButton from '../forms/SubmitButton'\nimport RadioButton from '../forms/RadioButton'\nimport firebase from '../../utils/firebase/firebaseConfig'\n\nclass EditTripModal extends React.Component {\n\n    state = {\n        errorUpdatingTrip: '',\n        errorUpdatingUserTrips: '',\n        tripNameError: '',\n        tripNameLength: 0,\n        tripName: '',\n        tripTags: '',\n        tripTagsError: '',\n        tripPrivacy: this.props.originalTripPrivacy,\n        updatingTrip: false,\n        tripUpdate: false,\n        confirmDelete: false,\n        tripDeleted: false\n    }\n\n    _isMounted = false;\n\n\n\n\n    updateTrip(e) {\n        //update userTrips\n        //update trip\n        e.preventDefault();\n\n\n        if (!this.state.errorUpdatingTrip &&\n            !this.state.errorUpdatingUserTrips &&\n            !this.state.tripNameError &&\n            !this.state.tripTagsError\n        ) {\n\n            this.setState({ updatingTrip: true })\n            let database = firebase.database()\n            let userId = this.props.userId;\n            let tripId = this.props.tripId;\n            let originalPrivacy = this.props.originalTripPrivacy;\n\n\n            let tripRef = `${originalPrivacy}Trips/${tripId}`\n            let userTripRef = `userTrips/${userId}/${tripId}`\n\n            let newPrivacy = this.state.tripPrivacy\n            let tripUpdate = {}\n\n\n            if (this.state.tripName && (this.state.tripName !== this.props.originalTripName)) {\n                tripUpdate[\"tripName\"] = this.state.tripName\n            }\n\n            //this gets buggy when I update tags plus it's not refreshing the update...\n            if (this.state.tripTags && (this.state.tripTags !== this.props.originalTripTags)) {\n                tripUpdate[\"tags\"] = this.state.tripTags\n            }\n\n            //update trip name and tags\n            if (tripUpdate || newPrivacy) {\n                database.ref(`${tripRef}`).update(tripUpdate).catch(error => {\n                    this.setState({ errorUpdatingTrip: error })\n                }).then(() => {\n                    if (this.state.tripPrivacy) {\n                        let userTripsUpdate = {\n                            tripPrivacy: newPrivacy\n                        }\n                        //update userTrips\n                        database.ref(`${userTripRef}`).update(userTripsUpdate).catch(error => {\n                            this.setState({ errorUpdatingUserTrips: error })\n                        })\n\n                        //get trip from current spot and store it\n                        let tripData;\n                        database.ref(`${tripRef}`).get().then(\n                            (snapshot) => {\n                                tripData = snapshot.val()\n\n                            }\n                        ).catch(error => {\n                            this.setState({ errorUpdatingUserTrips: `When getting original privacy setting ${error}` })\n                        }).then(() => {\n                            //delete trip from current spot\n                            database.ref(`${tripRef}`).remove().catch(error => {\n                                this.setState({ errorUpdatingUserTrips: `When deleting original privacy setting ${error}` })\n                            })\n                        }).then(() => {\n                            //add trip under new privacy\n                            let tripRef = `${newPrivacy}Trips/${tripId}`\n                            database.ref(`${tripRef}`).set(\n                                tripData\n                            ).catch(error => {\n                                this.setState({ errorUpdatingUserTrips: `When setting new privacy setting ${error}` })\n                            })\n                        }).then(() =>\n                            //inidicate update finished\n                            this.setState({ updatingTrip: false, tripUpdate: true }))\n                    } else {\n                        //if privacy was not changed, simply indicate update done\n                        this.setState({ updatingTrip: false, tripUpdate: true })\n                    }\n                })\n\n            }\n\n        }\n\n\n    }\n\n\n    tripDeleted() {\n        return (\n            <div className=\"modal-content-padding center-text\">\n                <h3 className=\"h5-font center-text\">\n                    This trip has been deleted.\n                </h3>\n            </div>\n        )\n\n    }\n\n    tripUpdated() {\n        return (\n            <div className=\"modal-content-padding center-text\">\n                <h3 className=\"h5-font center-text\">\n                    Trip information updated.\n                </h3>\n            </div>\n        )\n\n    }\n\n    renderDatabaseErrors() {\n        if (\n            this.state.errorUpdatingUserTrips ||\n            this.state.errorUpdatingTrip\n        ) {\n            return (\n                <div className=\"error-font\" aria-live=\"polite\">\n                    <ul>\n                        {this.state.errorUpdatingTrip && <li>Issue updating trip: {this.state.errorUpdatingTrip}</li>}\n                        {this.state.errorUpdatingUserTrips && <li> Issue updating user trips: {this.state.errorUpdatingUserTrips}</li>}\n                    </ul>\n                </div>\n            )\n        }\n    }\n\n    deleteTrip() {\n        let database = firebase.database();\n        let userId = this.props.userId;\n        let tripId = this.props.tripId;\n        let originalPrivacy = this.props.originalTripPrivacy;\n        let tripRef = `${originalPrivacy}Trips/${tripId}`\n        let userTripRef = `userTrips/${userId}/${tripId}`\n\n        database.ref(`${tripRef}`).remove().catch(error => {\n            this.setState({ errorUpdatingTrips: `When deleting trip ${error}` })\n        }).then(\n            () => {\n                database.ref(`${userTripRef}`).remove().catch(error => {\n                    this.setState({ errorUpdatingUserTrips: `When deleting trip from user trips list: ${error}` })\n                })\n            }\n        ).then(\n            () => {\n                this.setState({ tripDeleted: true })\n            }\n        )\n\n    }\n\n    toggleDeleteFrom() {\n        this.setState({ confirmDelete: !this.state.confirmDelete })\n    }\n\n\n    componentDidUpdate(prevProps) {\n        if (this.props.originalTripPrivacy !== prevProps.originalTripPrivacy) {\n            this.setState({tripPrivacy:this.props.originalTripPrivacy })\n        }\n\n    }\n\n    renderUpdateForm() {\n        let pathQuery = this.props.searchQuery;\n        let searchParams = new URLSearchParams(pathQuery);\n        let searchPrivacy = searchParams.get(\"privacy\")\n        let privacy = this.state.tripPrivacy ? this.state.tripPrivacy : searchPrivacy;\n\n        let defaultPrivate = privacy === 'private'\n        let defaultPublic = privacy === 'public'\n\n        return (\n            <>\n                {this.renderDatabaseErrors()}\n\n                <form className=\"modal-content-padding\">\n                    <div className=\"form-component-wrapper\">\n                        <label htmlFor=\"trip-name\">Trip Name (Max 50 Characters)</label>\n                        <TexInput id=\"trip-name\"\n                            placeholder={this.props.originalTripName}\n                            value={this.state.tripName}\n                            onChange={(e) => this.handleTripNamelInput(e)}\n                            required />\n                        {this.state.tripNameLength !== 0 && <p className=\"character-count\" aria-live=\"polite\">Characters left: {50 - this.state.tripNameLength}</p>}\n                        {this.state.tripNameError && <p className=\"error-font\" aria-live=\"polite\">{this.state.tripNameError}</p>}\n                    </div>\n\n                    <div className=\"form-component-wrapper\">\n                        <label htmlFor=\"trip-tags\">Tags (Comma separated keywords)</label>\n                        <TexInput id=\"trip-tags\"\n                            placeholder={this.props.originalTripTags}\n                            value={this.state.tripTags}\n                            onChange={(e) => this.handleTripTagsInput(e)} />\n                        {this.state.tripTagsError && <p className=\"error-font\" aria-live=\"polite\">{this.state.tripTagsError}</p>}\n                    </div>\n\n                    <fieldset className=\"form-component-wrapper\">\n                        <legend>Visibility Settings</legend>\n\n                        <RadioButton\n                            defaultChecked={defaultPublic}\n                            onChange={(e) => this.handleTripPrivacy(e)}\n                            labelText=\"Public\"\n                            name=\"trip-privacy\"\n                            value=\"public\" />\n\n                        <label className=\"caption-font\" htmlFor=\"public\">Anyone on Photo Atlas can see</label>\n\n                        <RadioButton\n                            defaultChecked={defaultPrivate}\n                            onChange={(e) => this.handleTripPrivacy(e)}\n                            labelText=\"Private\"\n                            name=\"trip-privacy\"\n                            value=\"private\" />\n                        <label className=\"caption-font\" htmlFor=\"private\">Only you can see</label>\n\n                    </fieldset>\n\n                    <div className=\"form-component-wrapper\">\n                        <SubmitButton onClick={(e) => this.updateTrip(e)} value={`${this.state.updatingTrip ? 'Updating Trip...' : 'Update Trip'}`} />\n                    </div>\n\n                </form>\n\n                {\n                    <div className=\"modal-content-padding\">\n                        <button onClick={() => this.toggleDeleteFrom()} className=\"secondary-button delete-button\">Delete Trip</button>\n                        {this.state.confirmDelete && <div>\n                            <ul className=\"button-group\">\n                                <li><button onClick={() => this.deleteTrip()} className=\"default-button\">Delete</button></li>\n                                <li><button onClick={() => this.toggleDeleteFrom()} className=\"button-link\">Cancel</button></li>\n                            </ul>\n                        </div>}\n                    </div>\n                }\n            </>\n        )\n\n    }\n\n    handleTripNamelInput(e) {\n        e.preventDefault();\n        let value = e.target.value;\n        let valueLength = value.length;\n\n        this.setState({\n            tripName: e.target.value,\n            tripNameLength: valueLength,\n            tripNameError: \"\"\n        })\n        if (valueLength > 50) {\n            this.setState({\n                tripNameError: \"Your trip name is too long.\"\n            })\n        }\n    }\n\n    handleTripTagsInput(e) {\n        e.preventDefault();\n\n        this.setState({\n            tripTags: e.target.value,\n            tripTagsError: \"\"\n        }, () => {\n            //check if tags have special characters other than comma\n            let testString = /^[a-zA-Z ,0-9]+$/;\n\n            if (this.state.tripTags && !testString.test(this.state.tripTags)) {\n                this.setState({\n                    tripTagsError: \"Tags may only contain letters, numbers, and commas\"\n                })\n            }\n        });\n\n    }\n\n    handleTripPrivacy(e) {\n        this.setState({ tripPrivacy: e.target.value })\n    }\n\n\n    renderModalContent() {\n        if(this.state.tripDeleted) {\n            return this.tripDeleted()\n        } else {\n            if (!this.state.tripUpdate ||\n                this.state.errorUpdatingTrip ||\n                this.state.errorUpdatingUserTrips ||\n                this.state.tripNameError ||\n                this.state.tripTagsError) {\n                return this.renderUpdateForm()\n            } else {\n                return this.tripUpdated()\n            }\n        }\n\n    }\n\n    closeModal() {\n\n        //if the trip was updated\n        //reset the state of the modal\n        //and tell the parent of the update\n        //else close the modal and indate that the update did not happen\n\n        let update = {}\n\n        if (!this.state.tripDeleted) {\n\n            if (this.state.tripUpdate) {\n\n                let originalPrivacy = this.props.originalTripPrivacy\n                let newPrivacy = this.state.tripPrivacy\n\n\n                if (newPrivacy && (newPrivacy !== originalPrivacy)) {\n                    update = {\n                        updated: true,\n                        newPrivacy: newPrivacy\n                    }\n                } else {\n                    update = {\n                        updated: true\n                    }\n                }\n\n            } else {\n                update = { updated: false }\n            }\n\n            this.setState({ tripUpdate: false },\n                () => this.props.handleClose(update))\n\n        } else {\n            update = { updated: true, deleted: true }\n            this.props.handleClose(update)\n        } \n\n    }\n\n\n    render() {\n        return (\n\n            <Modal\n                modalId='edit-trip-modal'\n                modalTitle={'Update Trip'}\n                isOpen={this.props.isOpen}\n                handleClose={() => this.closeModal()}\n            >\n                {this.renderModalContent()}\n            </Modal>\n\n\n        )\n    }\n\n}\n\nexport default EditTripModal;\n","import React from 'react'\nimport MapWithCards from '../../components/layout/MapWithCards'\nimport ResultsList from '../../components/content/ResultsList'\nimport firebase from '../../utils/firebase/firebaseConfig'\nimport { EditTripLarge, EditTripSmall } from '../../components/buttons/EditTripButtons'\nimport EditTripModal from '../../components/modals/EditTripModal'\nclass TripContent extends React.Component {\n    state = {\n        loaded: false,\n        tripList: [],\n        tripName: '',\n        tripTags: '',\n        locationsCount: 0,\n        mapLat: null,\n        mapLon: null,\n        mapZoom: 10,\n        showModal: false,\n        tripPrivacy: null\n    }\n    _isMounted = false;\n\n    tripId = this.getTripId()\n\n    getPrivacy () {\n        let pathQuery = this.props.location.search;\n        let searchParams = new URLSearchParams(pathQuery);\n        let privacy = searchParams.get(\"privacy\");\n        return privacy;\n    }\n\n    getTripId() {\n        let pathname = this.props.location.pathname;\n        let tripId = pathname.replace(\"/trip/\", \"\");\n        return tripId;\n    }\n\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        let privacy = this.getPrivacy()\n\n        this.setState({tripPrivacy: privacy}, () =>  {\n            this._isMounted && this.getTripDetails(this.state.tripPrivacy, this.tripId);\n        }   \n        )\n\n        \n    }\n\n    getTripDetails(privacy, tripId) {\n        let database = firebase.database();\n\n        let tripName, locationsCount, tripRef, tripTags;\n        let list = []\n\n        if (privacy === 'public') {\n            tripRef = `publicTrips/${tripId}`\n        } else {\n            tripRef = `privateTrips/${tripId}`\n        }\n\n        database.ref(`${tripRef}`).get().then(\n            snapshot => {\n                let tripData = snapshot.val()\n                tripName = tripData['tripName']\n                tripTags = tripData['tags']\n                locationsCount = tripData['locationsCount']\n                this.setState({\n                    tripName: tripName,\n                    locationsCount: locationsCount,\n                    tripTags: tripTags\n                })\n                let locations = tripData['locations']\n\n\n\n                for (const locationId in locations) {\n\n\n                    let location, src, woeId, url, title, lat, lon, locationRef, photoId;\n                    if (locationId.startsWith(\"flickr-\")) {\n                        src = \"flickr\"\n                        locationRef = `appLocations/flickrSourced/${locationId}`\n                        photoId = locationId.replace(\"flickr-\", \"\");\n                    }\n\n\n                    database.ref(`${locationRef}`).get().then(\n                        (snapshot) => {\n                            let locationData = snapshot.val()\n                            if (locationData) {\n                                let photos = locationData[\"photos\"]\n                                let firstPhoto = photos[Object.keys(photos)[0]]\n                                let coordinates = locationData[\"coordinates\"]\n                                woeId = locationData['woeId']\n                                url = firstPhoto[\"src\"]\n                                title = locationData[\"locationName\"]\n                                lat = coordinates[\"latitude\"]\n                                lon = coordinates[\"longitude\"]\n                            }\n\n                            location = {\n                                \"src\": src,\n                                \"locationId\": photoId,\n                                \"woeId\": woeId,\n                                \"thumbnail\": url,\n                                \"title\": title,\n                                \"destination\": {\n                                    \"latitude\": parseFloat(lat),\n                                    \"longitude\": parseFloat(lon)\n                                }\n                            }\n\n                        }\n                    ).then(() => list.push(location)).catch(error => console.log(\"issue getting location info\", error)).then(\n                        () => {\n\n                            let firstLocation = list[0]\n                            let coordinates = firstLocation[\"destination\"]\n                            let lon = coordinates[\"longitude\"]\n                            let lat = coordinates[\"latitude\"]\n\n                            let update = {\n                                tripList: list,\n                                loaded: true,\n                                mapLat: lat,\n                                mapLon: lon\n                            }\n\n\n                            this.setState(update)\n                        }\n                    )\n                }\n            }\n        ).catch(error => console.log(error))\n\n    }\n\n    openModal(){\n        let privacy = this.getPrivacy()\n        this.setState({ tripPrivacy: privacy},\n            () => this.setState({showModal: true})) \n    }\n\n    closeModal(update) {\n        let updated = update['updated']\n        let deleted = update['deleted']\n\n        if(updated) {\n            if(deleted) {\n                this.setState({ showModal: !this.state.showModal },\n                    ()=> {\n                        this.props.history.push('/trips')\n                    })\n\n            } else {\n                let newPrivacy = update['newPrivacy']\n\n                if(newPrivacy && (this.state.tripPrivacy !== newPrivacy)) {\n                    this.props.history.push({\n                        search: `?privacy=${newPrivacy}`\n                      })\n    \n                    this.setState({tripPrivacy: newPrivacy})\n                    this._isMounted && this.getTripDetails(newPrivacy, this.tripId);\n                } else {\n                    this._isMounted && this.getTripDetails(this.state.tripPrivacy, this.tripId);\n                } \n            }\n\n        } \n        this.setState({ showModal: !this.state.showModal })\n        \n    }\n\n\n    render() {\n        let {\n            loaded,\n            tripList,\n            mapLat,\n            mapLon,\n            mapZoom,\n            locationsCount,\n            tripName,\n            tripTags,\n            tripPrivacy } = this.state;\n\n\n        return (\n            <>\n                <div className={`trip`}>\n            \n                    <MapWithCards\n                        mapLoctaions={tripList}\n                        mapLat={mapLat}\n                        mapLon={mapLon}\n                        mapZoom={mapZoom}\n                    >\n                        <div className='dark-background mobile-header'>\n                            <div className={`container mobile-padding`}>\n                                <button onClick={() => { window.history.back() }} className={`secondary-button back-button`}>Back</button>\n                                <EditTripSmall onClick={()=>this.openModal()} />\n                            </div>\n                        </div>\n\n                        <div className={`gird-70-30`}>\n                            <div className={`col-70`}>\n                                <div className={`container mobile-padding`}>\n                                    <h2 className=\"h6-font\">{tripName}</h2>\n                                    <p className={`meta-data ${tripPrivacy ==='public' ? 'public' : 'private'}`}>{tripPrivacy}</p>\n                                    <p className={`meta-data marker`}>{locationsCount} {locationsCount === 1 ? 'Location' : 'Locations'}</p>\n                                    <p className={`meta-data tags`}>Tags: {tripTags}</p>\n                                </div>\n                            </div>\n                            <div className={`col-30`}>\n                                <ul className=\"actions\">\n                                    <li>\n                                        <EditTripLarge onClick={()=>this.openModal()} />\n                                    </li>\n\n                                </ul>\n                            </div>\n                        </div>\n                        <div className={`container`}>\n                            <ResultsList loaded={loaded} list={tripList} />\n                        </div>\n\n                    </MapWithCards>\n                    <EditTripModal\n                        isOpen={this.state.showModal}\n                        handleClose={(update) => this.closeModal(update)}\n                        originalTripName={tripName}\n                        originalTripTags={tripTags}\n                        originalTripPrivacy={tripPrivacy}\n                        userId={this.props.userId}\n                        tripId={this.tripId}\n                        searchQuery={this.props.location.search}\n                    />\n                </div>\n            </>\n        )\n    }\n}\n\nexport default TripContent;","import { Switch, Route } from 'react-router-dom';\nimport React from 'react';\nimport firebase from './utils/firebase/firebaseConfig'\n\nimport Navbar from './components/navigation/Navbar';\nimport Home from './screens/explore/Home';\nimport SearchResults from './screens/explore/SearchResults';\nimport Account from './screens/Account';\nimport Trips from './screens/trips/Trips';\nimport PrivateRoute from './components/navigation/PrivateRoute';\nimport Footer from './components/content/Footer';\nimport Location from './screens/location/Location';\nimport TripContent from './screens/trips/TripContent';\n\n\nimport './styles/main.scss';\n\n\nclass App extends React.Component {\n\n  state = {\n    signedIn: false,\n    userVerified: false,\n    userId: null\n\n  }\n\n\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n\n\n      if (user) {\n        this.setState({\n          signedIn: true,\n          userVerified: user.emailVerified,\n          userId: user.uid\n        });\n      } else {\n        this.setState({ signedIn: false });\n      }\n    });\n  };\n\n\n  render() {\n\n    let { signedIn, userVerified } = this.state;\n\n    return (\n      <>\n\n        <Navbar />\n        <main>\n\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n\n            <Route path=\"/explore\" component={SearchResults} />\n\n            <Route path=\"/location\"\n\n              render={\n                (props) => <Location {...props} userId={this.state.userId} />\n\n              } />\n\n            <Route path=\"/trips\"\n\n              render={\n                (props) => <Trips {...props} userId={this.state.userId} isAuthenticated={signedIn} isVerified={userVerified} />\n\n              } />\n\n            <Route path=\"/trip\"\n\n              render={\n                (props) => <TripContent {...props} userId={this.state.userId} />\n\n              } />\n\n            <PrivateRoute path=\"/account\" component={Account} isAuthenticated={signedIn} isVerified={userVerified} logInLocation={\"account\"} />\n\n\n          </Switch>\n\n\n        </main>\n\n        <Footer />\n\n      </>\n    );\n  }\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\n\n\n\n\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n     <BrowserRouter>\n         <App />  \n    </BrowserRouter>    \n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}